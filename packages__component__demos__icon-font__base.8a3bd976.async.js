(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14,5],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return h}));var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",u=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i["a"];this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r["a"])({identifier:s,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var u=this.getOrInitializeService(o);if(!u){if(i)return null;throw Error("Service "+this.name+" is not available")}return u}catch(a){if(i)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,c(t))try{this.getOrInitializeService(s)}catch(p){}try{for(var i=Object(r["h"])(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var u=Object(r["e"])(o.value,2),a=u[0],h=u[1],f=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService(f);h.resolve(l)}catch(p){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r["b"])(this,void 0,void 0,(function(){var t;return Object(r["d"])(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r["f"])(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,a(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}();function a(t){return t===s?void 0:t}function c(t){return"EAGER"===t.instantiationMode}var h=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new u(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},"/b1K":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("WmNS"),i=n.n(r),o=n("k1fw"),s=n("9og8"),u=n("vDqi"),a=n.n(u),c=n("UIRo"),h=n("vWNn"),f=function(){var t=Object(s["a"])(i.a.mark((function t(e,n,r,s,u){var f,l;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.a.defaults.headers.common["Authorization"]="Bearer ".concat(c["a"].TOKEN),a.a.defaults.headers.delete["Content-Type"]="application/json",a.a.defaults.baseURL=u||c["a"].BASE_PATH,a.a.defaults.params=Object(o["a"])({},s),f=()=>{switch(e){case"get":return a.a.get(n,r);case"post":return a.a.post(n,r);case"delete":return a.a.delete(n,r);case"put":return a.a.put(n,r);case"patch":return a.a.patch(n,r);default:a.a.get(n,r);break}},t.prev=5,t.next=8,f();case 8:return l=t.sent,c["a"].PROD||console.log("******REQUEST*******",l),"get"!==e&&Object(h["a"])(void 0,l),t.abrupt("return",null===l||void 0===l?void 0:l.data);case 14:return t.prev=14,t.t0=t["catch"](5),Object(h["a"])(t.t0),t.abrupt("return",t.t0);case 18:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},1:function(t,e){},10:function(t,e){},"13Tv":function(t,e,n){t.exports={layout:"layout___3mNE1","layout-content":"layout-content___2g4Pf"}},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},6:function(t,e){},7:function(t,e){},8:function(t,e){},9:function(t,e){},I3ON:function(t,e,n){"use strict";n.r(e);n("OaEy");var r=n("2fM7"),i=n("tJVT"),o=n("q1tI"),s=n.n(o),u=n("KiPk"),a=n("zIRd"),c="firebase",h="8.1.1";a["a"].registerVersion(c,h,"app");n("xsWp");var f=n("UIRo");a["a"].initializeApp(f["b"]);var l=a["a"];e["default"]=()=>{var t,e=Object(o["useState"])([]),n=Object(i["a"])(e,2),a=n[0],c=n[1],h=Object(o["useState"])([]),f=Object(i["a"])(h,2),p=f[0],d=f[1],v=t=>{if(t){var e=null===p||void 0===p?void 0:p.filter((e=>e.type===t));d(e)}else b()},y=()=>{b()},g=l.firestore().collection("icon-script"),m=l.firestore().collection("icon-type");function b(){g.onSnapshot((t=>{var e=[];t.forEach((t=>{e.push(t.data())})),c(e)})),m.onSnapshot((t=>{var e=[];t.forEach((t=>{e.push(t.data())})),d(e)}))}return Object(o["useEffect"])((()=>{b()}),[]),Object(u["f"])({iconFontUrl:null===(t=a[0])||void 0===t?void 0:t.icon_script}),null===p||void 0===p||p.forEach((t=>{t.item=s.a.createElement(u["a"],{type:t.type}),t.copyCode='<IconFont type="'.concat(t.type,'" />')})),s.a.createElement(s.a.Fragment,null,s.a.createElement(u["e"],null,s.a.createElement(u["c"],{type:"link",danger:!0},"Search Color:"),s.a.createElement("span",null,s.a.createElement(r["a"],{showSearch:!0,allowClear:!0,size:"large",style:{width:240},optionFilterProp:"children",onChange:v,onBlur:y},null===p||void 0===p?void 0:p.map(((t,e)=>s.a.createElement(r["a"].Option,{value:t.type,key:String(e)},t.type)))))),s.a.createElement(u["b"],{data:p,antSpan:2,width:20}))}},JPxN:function(t,e,n){t.exports={"mr-1":"mr-1___mQmbM","mr-2":"mr-2___2qd0t","mr-3":"mr-3___23AC5","mr-4":"mr-4___kCx1F","mr-5":"mr-5___2qPys","mr-6":"mr-6___10UzW","mr-7":"mr-7___2yGX3","mr-8":"mr-8___3sC_f","mr-9":"mr-9___3vkg3","mr-10":"mr-10___2b38C","ml-1":"ml-1___3SYoS","ml-2":"ml-2___hnKtd","ml-3":"ml-3___2Gd-m","ml-4":"ml-4___2jYya","ml-5":"ml-5___2eoVv","ml-6":"ml-6___3jjCH","ml-7":"ml-7___1s6uW","ml-8":"ml-8___1tLFi","ml-9":"ml-9___2nSCf","ml-10":"ml-10___ovLs8","mb-1":"mb-1___3rvIA","mb-2":"mb-2___148K9","mb-3":"mb-3___2aOEP","mb-4":"mb-4___3_-2k","mb-5":"mb-5___3tXZs","mb-6":"mb-6___ALxLi","mb-7":"mb-7___26vQh","mb-8":"mb-8___24ZgD","mb-9":"mb-9___2mPK7","mb-10":"mb-10___80MdJ","mt-1":"mt-1___IQuM1","mt-2":"mt-2___PAzbD","mt-3":"mt-3___ToITg","mt-4":"mt-4___3JMhX","mt-5":"mt-5___HFjqa","mt-6":"mt-6___2ieRB","mt-7":"mt-7___sO4qn","mt-8":"mt-8___20DNG","mt-9":"mt-9___2Bjdd","mt-10":"mt-10___3Epuy",cyan_8:"cyan_8___1Iysn",cyan_4:"cyan_4___3Dt3U",warning:"warning___cvaoD",success:"success___3ebb_",black:"black___3rNCw",error:"error___3C10M",cyan_base:"cyan_base___KC88A",pink_base:"pink_base___23V2D","volcano-base":"volcano-base___chJ0v",purple_base:"purple_base___2v1_2"}},KiPk:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return b})),n.d(e,"b",(function(){return x})),n.d(e,"e",(function(){return S})),n.d(e,"d",(function(){return M})),n.d(e,"g",(function(){return H})),n.d(e,"f",(function(){return Y}));var r=n("0Owb"),i=n("q1tI"),o=n.n(i),s=n("cOkC"),u=n("R+Pm"),a=()=>null;function c(t){a=Object(u["a"])({scriptUrl:t})}var h=t=>(Object(s["noteOnce"])(!!a,"IconFont is not init"),a?o.a.createElement(a,Object(r["a"])({style:{fontSize:24}},t)):null),f=(n("+L6B"),n("2/Rp")),l=n("k1fw"),p=n("PpiC"),d=n("JPxN"),v=n.n(d),y=n("TSYQ"),g=n.n(y),m=t=>{var e=t.next,n=t.btnDisplay,i=void 0===n?"flex":n,s=t.btnJustify,u=void 0===s?"center":s,a=t.customStyle,c=(t.btnCls,t.style),h=t.mr,d=t.ml,y=t.mb,m=void 0===y?2:y,b=t.mt,w=t.children,_=t.disabled,I=Object(p["a"])(t,["next","btnDisplay","btnJustify","customStyle","btnCls","style","mr","ml","mb","mt","children","disabled"]);return o.a.createElement("span",{style:{display:i,justifyContent:u},className:g()(!_&&e&&v.a["".concat(e)],h&&v.a["mr-".concat(h)],d&&v.a["ml-".concat(d)],m&&v.a["mb-".concat(m)],b&&v.a["mt-".concat(b)])},o.a.createElement(f["a"],Object(r["a"])({style:Object(l["a"])({color:null===a||void 0===a?void 0:a.textColor,backgroundColor:null===a||void 0===a?void 0:a.backgroundColor,borderColor:null===a||void 0===a?void 0:a.backgroundColor},c)},I),w))},b=Object(i["memo"])(m),w=(n("jCWc"),n("kPKH")),_=(n("Q9mQ"),n("diRs")),I=(n("tU7J"),n("wFql")),E=n("c2Mw"),O=n.n(E),T=(n("14J3"),n("BMrR")),j=n("13Tv"),A=n.n(j),N=t=>{var e=t.children,n=t.gut1,r=void 0===n?10:n,i=t.gut2,s=void 0===i?10:i;return o.a.createElement(T["a"],{className:A.a.layout,gutter:[r,s]},e)},S=Object(i["memo"])(N),D=I["a"].Paragraph,k=t=>{var e=t.isAntCol,n=void 0===e||e,r=t.data,s=void 0===r?[]:r,u=t.antSpan,a=void 0===u?6:u,c=Object(p["a"])(t,["isAntCol","data","antSpan"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(N,null,s.map(((t,e)=>o.a.createElement(i["Fragment"],{key:e},n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(w["a"],{span:a},t.item,o.a.createElement("span",{style:Object(l["a"])({display:"flex",justifyContent:"center",marginTop:10},c)},o.a.createElement(D,{style:{justifyContent:"center",marginBottom:6,fontSize:18},copyable:{text:null===t||void 0===t?void 0:t.copyCode}}),o.a.createElement(_["a"],{content:o.a.createElement(o.a.Fragment,null,o.a.createElement(D,{code:!0,copyable:!0,style:{color:"#c41d7f"}},null===t||void 0===t?void 0:t.copyCode))},o.a.createElement(O.a,{style:{marginLeft:4,position:"relative",bottom:-5,fontSize:18}}))))))))))},x=k,C=n("7HPk"),P=n.n(C),R=n("wfry"),L=n.n(R),V=(n("49qf"),t=>{var e=t.nextTheme,n=Object(p["a"])(t,["nextTheme"]);return o.a.createElement(P.a,Object(l["a"])({className:g()(L.a[e])},n))}),M=V,U=(n("je13"),n("NFKh"),n("cg2h")),q=n.n(U);var F="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC5HI3rQq9BKcruxYfqgnkhyuI+9CGf1jYsyzWYpdw/3Cv9TX4u5w2GjcYoxzBY5s6ZcXbb4oGoLt9rn93g7sKT01tyUO/iQdYiOTvPsFiqcInMVHhaazBy5nH50owObGs+PRubc8bP+a+DT3vV8+l7TEd/H9pdwok/r7GlIIe5uQIDAQAB",z=new q.a;z.setPublicKey(F);var B;n("/b1K"),n("vWNn");(function(t){t[t["In"]=1]="In",t[t["Out"]=2]="Out",t[t["Both"]=4]="Both"})(B||(B={}));n("/xke");var G,K=n("TeRw");(function(t){t["subscribeSuccess"]="Subscribed successfully!",t["subscribeErr"]="Subscribed successfully!",t["subscribeDes"]="Your email has been subscribed successfully. We will send you interested news vai email box.",t["submitContactSuccess"]="Submitted successfully!",t["submitContactSuccessDesc"]="Thanks for contacting us through our website! We will contact you shortly."})(G||(G={}));var W=t=>{var e=t.type,n=Object(p["a"])(t,["type"]);return K["a"]["".concat(e)](Object(l["a"])({},n))},H=t=>{var e=t.message,n=t.nextTypes,r=Object(p["a"])(t,["message","nextTypes"]);switch(n){case"subscribeSuccess":return W({type:"success",message:G.subscribeSuccess});case"subscribeErr":return W({type:"error",message:G.subscribeErr});case"submitContactSuccess":return W({type:"success",message:G.submitContactSuccessDesc});default:return W(Object(l["a"])({message:e},r))}},Y=t=>{c(t.iconFontUrl)}},Qw5x:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}n.d(e,"a",(function(){return i}))},UIRo:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var r={apiKey:"AIzaSyDZrabzkRYJtDgFAamhZBQwfqPdQXCjo94",authDomain:"next-dev-store.firebaseapp.com",databaseURL:"https://next-dev-store.firebaseio.com",projectId:"next-dev-store",storageBucket:"next-dev-store.appspot.com",messagingSenderId:"528393281257",appId:"1:528393281257:web:0f4b1aecf2c5c2cc451a78"},i={PROD:"production"===Object({NODE_ENV:"production"}).node,BASE_PATH:"https://gorest.co.in/public-api",TOKEN:"0b4c0fa225e4e432de7e51fe13691e86e27ac12a360ca251bf714eeb00942325"}},mrSG:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"h",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return f}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function s(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r["throw"](t))}catch(e){o(e)}}function a(t){t.done?n(t.value):i(t.value).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(t){return function(e){return a([t,e])}}function a(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function a(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return p}));var o,s=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(o||(o={}));var u={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},a=o.INFO,c=(i={},i[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},f=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?u[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function l(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=u[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var u=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:u,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){var a=i[r];n(a)}}},qOnz:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return T})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return h})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return y})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return f})),n.d(e,"m",(function(){return l})),n.d(e,"n",(function(){return v})),n.d(e,"o",(function(){return m}));var r=n("mrSG"),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},o=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var s=t[n++],u=t[n++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&u)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")};function s(t){return u(void 0,t)}function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&a(r)&&(t[r]=u(t[r],e[r]));return t}function a(t){return"__proto__"!==t}var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function h(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function f(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function l(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function p(){return"object"===typeof self&&self.self===self}function d(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function v(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function y(){return h().indexOf("Electron/")>=0}function g(){var t=h();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return h().indexOf("MSAppHost/")>=0}var b="FirebaseError",w=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=b,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,_.prototype.create),o}return Object(r["c"])(e,t),e}(Error),_=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?I(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new w(i,u,r);return a},t}();function I(t,e){return t.replace(E,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var E=/\{\$([^}]+)}/g;function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,u=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^a&(c^h),s=1518500249):(o=a^c^h,s=1859775393):r<60?(o=a&c|h&(a|c),s=2400959708):(o=a^c^h,s=3395469782);i=(u<<5|u>>>27)+o+f+s+n[r]&4294967295;f=h,h=c,c=4294967295&(a<<30|a>>>2),a=u,u=i}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}})();function T(t,e){var n=new j(t,e);return n.subscribe.bind(n)}var j=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=A(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=N),void 0===r.error&&(r.error=N),void 0===r.complete&&(r.complete=N);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function A(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}function N(){}}).call(this,n("yLpj"))},tJVT:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}function i(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(a){i=!0,o=a}finally{try{r||null==u["return"]||u["return"]()}finally{if(i)throw o}}return n}}n.d(e,"a",(function(){return u}));var o=n("Qw5x");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){return r(t)||i(t,e)||Object(o["a"])(t,e)||s()}},vWNn:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("miYZ");var r=n("tsqr");function i(t,e){var n,i,o;null===t||void 0===t||t.isAxiosError;var s={code:null===t||void 0===t||null===(n=t.response)||void 0===n?void 0:n.status,description:{en:"Something happened in setting up the request that triggered an Error",kh:"Something happened in setting up the request that triggered an Error"}};if(void 0===(null===t||void 0===t?void 0:t.response))s={code:404,description:{en:"Server not found",kh:"Server not found"}};else if(null===t||void 0===t?void 0:t.response)console.log(t.response.data.message),s=t.response.data.message;else if(t.request)s={code:404,description:{en:"The request was made, but no response was received",kh:"The request was made, but no response was received"}};else if(!(null===e||void 0===e?void 0:e.data.data)||!(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.token))return"Something went wrong!";if(200!==(null===e||void 0===e?void 0:e.status));else if((null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.code)>299){var u,a;r["b"].error("Input Data ".concat(null===e||void 0===e||null===(u=e.data)||void 0===u||null===(a=u.data[0])||void 0===a?void 0:a.message))}else r["b"].success(" Successfully");return{error:s,res:e}}},wfry:function(t,e,n){t.exports={cyan_8:"cyan_8___ub18j",cyan_4:"cyan_4___1WVOO",warning:"warning___32Imv",success:"success___2tyDU",black:"black___2osXC",error:"error___31PA1",cyan_base:"cyan_base___3Fh_1",pink_base:"pink_base___3tqbR","volcano-base":"volcano-base___3l2TY",purple_base:"purple_base___2DYMw"}},x7I3:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Or})),n.d(e,"b",(function(){return jr})),n.d(e,"c",(function(){return Tr})),n.d(e,"d",(function(){return Ar})),n.d(e,"e",(function(){return Nr})),n.d(e,"f",(function(){return Sr})),n.d(e,"g",(function(){return Ir})),n.d(e,"h",(function(){return Er}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var s,u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},a=a||{},c=u||self;function h(){}function f(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function p(t){return Object.prototype.hasOwnProperty.call(t,d)&&t[d]||(t[d]=++v)}var d="closure_uid_"+(1e9*Math.random()>>>0),v=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g,m.apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function w(){return Date.now()}function _(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function I(){this.j=this.j,this.i=this.i}var E=0;I.prototype.j=!1,I.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0!=E))p(this)},I.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var O=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function j(t){t:{for(var e=Un,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function A(t){return Array.prototype.concat.apply([],arguments)}function N(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t){return/^[\s\xa0]*$/.test(t)}var D,k=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function x(t,e){return-1!=t.indexOf(e)}function C(t,e){return t<e?-1:t>e?1:0}t:{var P=c.navigator;if(P){var R=P.userAgent;if(R){D=R;break t}}D=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function V(t){var e={};for(var n in t)e[n]=t[n];return e}var M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<M.length;o++)n=M[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function q(t){return q[" "](t),t}function F(t,e){var n=tt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}q[" "]=h;var z,B=x(D,"Opera"),G=x(D,"Trident")||x(D,"MSIE"),K=x(D,"Edge"),W=K||G,H=x(D,"Gecko")&&!(x(D.toLowerCase(),"webkit")&&!x(D,"Edge"))&&!(x(D,"Trident")||x(D,"MSIE"))&&!x(D,"Edge"),Y=x(D.toLowerCase(),"webkit")&&!x(D,"Edge");function Q(){var t=c.document;return t?t.documentMode:void 0}t:{var X="",J=function(){var t=D;return H?/rv:([^\);]+)(\)|;)/.exec(t):K?/Edge\/([\d\.]+)/.exec(t):G?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Y?/WebKit\/(\S+)/.exec(t):B?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(J&&(X=J?J[1]:""),G){var $=Q();if(null!=$&&$>parseFloat(X)){z=String($);break t}}z=X}var Z,tt={};function et(t){return F(t,(function(){for(var e=0,n=k(String(z)).split("."),r=k(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=C(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||C(0==s[2].length,0==u[2].length)||C(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(c.document&&G){var nt=Q();Z=nt||(parseInt(z,10)||void 0)}else Z=void 0;var rt=Z,it=!G||9<=Number(rt),ot=G&&!et("9"),st=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",h,e),c.removeEventListener("test",h,e)}catch(n){}return t}();function ut(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function at(t,e){if(ut.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(H){t:{try{q(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:ct[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ut.prototype.b=function(){this.defaultPrevented=!0},_(at,ut);var ct={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ot)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ht="closure_listenable_"+(1e6*Math.random()|0),ft=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ft,this.Y=this.Z=!1}function pt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function dt(t){this.src=t,this.a={},this.b=0}function vt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=O(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(pt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function yt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var s=yt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):(e=new lt(e,this.src,o,!!r,i),e.Z=n,t.push(e)),e};var gt="closure_lm_"+(1e6*Math.random()|0),mt={};function bt(t,e,n,r,i){if(r&&r.once)return It(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=Dt(n),t&&t[ht]?t.va(e,n,l(r)?!!r.capture:!!r,i):wt(t,e,n,!1,r,i)}function wt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=l(i)?!!i.capture:!!i;if(s&&!it)return null;var u=Nt(t);if(u||(t[gt]=u=new dt(t)),n=u.add(e,n,r,s,o),n.proxy)return n;if(r=_t(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)st||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Tt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _t(){var t=At,e=it?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function It(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)It(t,e[o],n,r,i);return null}return n=Dt(n),t&&t[ht]?t.wa(e,n,l(r)?!!r.capture:!!r,i):wt(t,e,n,!0,r,i)}function Et(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Et(t,e[o],n,r,i);else r=l(r)?!!r.capture:!!r,n=Dt(n),t&&t[ht]?(t=t.c,e=String(e).toString(),e in t.a&&(o=t.a[e],n=yt(o,n,r,i),-1<n&&(pt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Nt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=yt(e,n,r,i)),(n=-1<t?e[t]:null)&&Ot(n))}function Ot(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ht])vt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Tt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Nt(e))?(vt(n,t),0==n.b&&(n.src=null,e[gt]=null)):pt(t)}}}function Tt(t){return t in mt?mt[t]:mt[t]="on"+t}function jt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ot(t),n.call(r,e)}function At(t,e){if(t.Y)return!0;if(!it){if(!e)t:{e=["window","event"];for(var n=c,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}return e=new at(e,this),jt(t,e)}return jt(t,new at(e,this))}function Nt(t){return t=t[gt],t instanceof dt?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dt(t){return"function"===typeof t?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function kt(){I.call(this),this.c=new dt(this),this.J=this,this.C=null}function xt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"===typeof e)e=new ut(e,t);else if(e instanceof ut)e.target=e.target||t;else{var i=e;e=new ut(r,t),U(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ct(s,r,!0,e)&&i}if(s=e.a=t,i=Ct(s,r,!0,e)&&i,i=Ct(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.a=n[o],i=Ct(s,r,!1,e)&&i}function Ct(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&vt(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}_(kt,I),kt.prototype[ht]=!0,s=kt.prototype,s.addEventListener=function(t,e,n,r){bt(this,t,e,n,r)},s.removeEventListener=function(t,e,n,r){Et(this,t,e,n,r)},s.G=function(){if(kt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)pt(n[r]);delete e.a[t],e.b--}}this.C=null},s.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},s.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Pt=c.JSON.stringify;function Rt(){this.b=this.a=null}var Lt,Vt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Ut}),(function(t){t.reset()}));function Mt(){var t=Gt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ut(){this.next=this.b=this.a=null}function qt(t){c.setTimeout((function(){throw t}),0)}function Ft(t,e){Lt||zt(),Bt||(Lt(),Bt=!0),Gt.add(t,e)}function zt(){var t=c.Promise.resolve(void 0);Lt=function(){t.then(Kt)}}Rt.prototype.add=function(t,e){var n=Vt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ut.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ut.prototype.reset=function(){this.next=this.b=this.a=null};var Bt=!1,Gt=new Rt;function Kt(){for(var t;t=Mt();){try{t.a.call(t.b)}catch(n){qt(n)}var e=Vt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Bt=!1}function Wt(t,e){kt.call(this),this.b=t||1,this.a=e||c,this.f=m(this.Za,this),this.g=w()}function Ht(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Yt(t,e,n){if("function"===typeof t)n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Qt(t){t.a=Yt((function(){t.a=null,t.c&&(t.c=!1,Qt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}_(Wt,kt),s=Wt.prototype,s.aa=!1,s.M=null,s.Za=function(){if(this.aa){var t=w()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),xt(this,"tick"),this.aa&&(Ht(this),this.start()))}},s.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=w())},s.G=function(){Wt.X.G.call(this),Ht(this),delete this.a};var Xt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return i(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Qt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(c.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(I);function Jt(t){I.call(this),this.b=t,this.a={}}_(Jt,I);var $t=[];function Zt(t,e,n,r){Array.isArray(n)||(n&&($t[0]=n.toString()),n=$t);for(var i=0;i<n.length;i++){var o=bt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function te(t){L(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Ot(t)}),t),t.a={}}function ee(){this.a=!0}function ne(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}function re(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}function ie(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+se(t,n)+(r?" "+r:"")}))}function oe(t,e){t.info((function(){return"TIMEOUT: "+e}))}function se(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Pt(n)}catch(u){return e}}Jt.prototype.G=function(){Jt.X.G.call(this),te(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ee.prototype.info=function(){};var ue={},ae=null;function ce(){return ae=ae||new kt}function he(t){ut.call(this,ue.Fa,t)}function fe(t){var e=ce();xt(e,new he(e,t))}function le(t,e){ut.call(this,ue.STAT_EVENT,t),this.stat=e}function pe(t){var e=ce();xt(e,new le(e,t))}function de(t){ut.call(this,ue.Ga,t)}function ve(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){t()}),e)}ue.Fa="serverreachability",_(he,ut),ue.STAT_EVENT="statevent",_(le,ut),ue.Ga="timingevent",_(de,ut);var ye={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ge={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function me(){}function be(t){var e;return(e=t.a)||(e=t.a={}),e}function we(){}me.prototype.a=null;var _e,Ie={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ee(){ut.call(this,"d")}function Oe(){ut.call(this,"c")}function Te(){}function je(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Jt(this),this.P=Ae,t=W?125:void 0,this.R=new Wt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}_(Ee,ut),_(Oe,ut),_(Te,me),_e=new Te;var Ae=45e3,Ne={},Se={};function De(t,e,n){t.H=1,t.i=tn(Ye(e)),t.j=n,t.I=!0,ke(t,null)}function ke(t,e){t.u=w(),Pe(t),t.l=Ye(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),yn(n.b,"t",r),t.D=0,t.a=vr(t.g,t.g.C?e:null),0<t.O&&(t.F=new Xt(m(t.Ca,t,t.a),t.O)),Zt(t.J,t.a,"readystatechange",t.Xa),e=t.B?V(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),fe(1),ne(t.c,t.m,t.l,t.f,t.S,t.j)}function xe(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ce(t,n);if(i==Se){4==e&&(t.h=4,pe(14),r=!1),ie(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ne){t.h=4,pe(15),ie(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ie(t.c,t.f,i,null),Ue(t,i)}4==e&&0==n.length&&(t.h=1,pe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ur(e),e.F=!0,pe(11))):(ie(t.c,t.f,n,"[Invalid Chunked Response]"),Me(t),Ve(t))}function Ce(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Se:(n=Number(e.substring(n,r)),isNaN(n)?Ne:(r+=1,r+n>e.length?Se:(e=e.substr(r,n),t.D=r+n,e)))}function Pe(t){t.T=w()+t.P,Re(t,t.P)}function Re(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ve(m(t.Va,t),e)}function Le(t){t.o&&(c.clearTimeout(t.o),t.o=null)}function Ve(t){0==t.g.v||t.A||hr(t.g,t)}function Me(t){Le(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ht(t.R),te(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ue(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||On(n.b,t)))if(n.I=t.N,!t.C&&On(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;cr(n),Jn(n)}sr(n),pe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ve(m(n.Sa,n),6e3));if(1>=En(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else lr(n,11)}else if((t.C||n.a==t)&&cr(n),!S(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"===typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(x(h,"spdy")||x(h,"quic")||x(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(Tn(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Ze(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=w()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),a=n;var p=t;if(a.la=dr(a,a.C?a.ga:null,a.fa),p.C){jn(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(Le(d),Pe(d)),a.a=p}else or(a);0<n.g.length&&tr(n)}else"stop"!=i[0]&&"close"!=i[0]||lr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?lr(n,7):Xn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);fe(4)}catch(y){}}function qe(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Fe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"===typeof t)T(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(f(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=qe(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ze(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ze)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Be(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ge(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Ge(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ge(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s=je.prototype,s.setTimeout=function(t){this.P=t},s.Xa=function(t){t=t.target;var e=this.F;e&&3==Kn(t)?e.f():this.Ca(t)},s.Ca=function(t){try{if(t==this.a)t:{var e=Kn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!W&&!this.a.$())){this.A||4!=e||7==n||fe(8==n||0>=r?3:2),Le(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,re(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,pe(12),Me(this),Ve(this);break t}ie(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ue(this,a)}this.I?(xe(this,e,o),W&&this.b&&3==e&&(Zt(this.J,this.R,"tick",this.Wa),this.R.start())):(ie(this.c,this.f,o,null),Ue(this,o)),4==e&&Me(this),this.b&&!this.A&&(4==e?hr(this.g,this):(this.b=!1,Pe(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,pe(12)):(this.h=0,pe(13)),Me(this),Ve(this)}}}catch(c){}},s.Wa=function(){if(this.a){var t=Kn(this.a),e=this.a.$();this.D<e.length&&(Le(this),xe(this,t,e),this.b&&4!=t&&Pe(this))}},s.cancel=function(){this.A=!0,Me(this)},s.Va=function(){this.o=null;var t=w();0<=t-this.T?(oe(this.c,this.l),2!=this.H&&(fe(3),pe(17)),Me(this),this.h=2,Ve(this)):Re(this,this.T-t)},s=ze.prototype,s.K=function(){Be(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},s.L=function(){return Be(this),this.a.concat()},s.get=function(t,e){return Ge(this.b,t)?this.b[t]:e},s.set=function(t,e){Ge(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},s.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ke=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function We(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function He(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof He){this.a=void 0!==e?e:t.a,Qe(this,t.f),this.j=t.j,Xe(this,t.c),Je(this,t.h),this.g=t.g,e=t.b;var n=new ln;n.c=e.c,e.a&&(n.a=new ze(e.a),n.b=e.b),$e(this,n),this.i=t.i}else t&&(n=String(t).match(Ke))?(this.a=!!e,Qe(this,n[1]||"",!0),this.j=rn(n[2]||""),Xe(this,n[3]||"",!0),Je(this,n[4]),this.g=rn(n[5]||"",!0),$e(this,n[6]||"",!0),this.i=rn(n[7]||"")):(this.a=!!e,this.b=new ln(null,this.a))}function Ye(t){return new He(t)}function Qe(t,e,n){t.f=n?rn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Xe(t,e,n){t.c=n?rn(e,!0):e}function Je(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function $e(t,e,n){e instanceof ln?(t.b=e,mn(t.b,t.a)):(n||(e=on(e,hn)),t.b=new ln(e,t.a))}function Ze(t,e,n){t.b.set(e,n)}function tn(t){return Ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),t}function en(t){return t instanceof He?Ye(t):new He(t,void 0)}function nn(t,e,n,r){var i=new He(null,void 0);return t&&Qe(i,t),e&&Xe(i,e),n&&Je(i,n),r&&(i.g=r),i}function rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function on(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,sn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sn(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}He.prototype.toString=function(){var t=[],e=this.f;e&&t.push(on(e,un,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(on(e,un,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,null!=n&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(on(n,"/"==n.charAt(0)?cn:an,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",on(n,fn)),t.join("")};var un=/[#\/\?@]/g,an=/[#\?:]/g,cn=/[#\?]/g,hn=/[#\?@]/g,fn=/#/g;function ln(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function pn(t){t.a||(t.a=new ze,t.b=0,t.c&&We(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function dn(t,e){pn(t),e=gn(t,e),Ge(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Ge(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Be(t)))}function vn(t,e){return pn(t),e=gn(t,e),Ge(t.a.b,e)}function yn(t,e,n){dn(t,e),0<n.length&&(t.c=null,t.a.set(gn(t,e),N(n)),t.b+=n.length)}function gn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function mn(t,e){e&&!t.f&&(pn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(dn(this,e),yn(this,n,t))}),t)),t.f=e}s=ln.prototype,s.add=function(t,e){pn(this),this.c=null,t=gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},s.forEach=function(t,e){pn(this),this.a.forEach((function(n,r){T(n,(function(n){t.call(e,n,r,this)}),this)}),this)},s.L=function(){pn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},s.K=function(t){pn(this);var e=[];if("string"===typeof t)vn(this,t)&&(e=A(e,this.a.get(gn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=A(e,t[n])}return e},s.set=function(t,e){return pn(this),this.c=null,t=gn(this,t),vn(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},s.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e},s.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var bn=function(){function t(t,e){this.b=t,this.a=e}return t}();function wn(t){this.g=t||_n,c.PerformanceNavigationTiming?(t=c.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(c.ia&&c.ia.ya&&c.ia.ya()&&c.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var _n=10;function In(t){return!!t.b||!!t.a&&t.a.size>=t.f}function En(t){return t.b?1:t.a?t.a.size:0}function On(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Tn(t,e){t.a?t.a.add(e):t.b=e}function jn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function An(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=o(t.a.values()),s=i.next();!s.done;s=i.next()){var u=s.value;r=r.concat(u.s)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return N(t.c)}function Nn(){}function Sn(){this.a=new Nn}function Dn(t,e,n){var r=n||"";try{Fe(t,(function(t,n){var i=t;l(t)&&(i=Pt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function kn(t,e){var n=new ee;if(c.Image){var r=new Image;r.onload=b(xn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=b(xn,n,r,"TestLoadImage: error",!1,e),r.onabort=b(xn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=b(xn,n,r,"TestLoadImage: timeout",!1,e),c.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function xn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}wn.prototype.cancel=function(){var t,e;if(this.c=An(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=o(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Nn.prototype.stringify=function(t){return c.JSON.stringify(t,void 0)},Nn.prototype.parse=function(t){return c.JSON.parse(t,void 0)};var Cn=c.JSON.parse;function Pn(t){kt.call(this),this.headers=new ze,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Rn,this.D=this.F=!1}_(Pn,kt);var Rn="",Ln=/^https?$/i,Vn=["POST","PUT"];function Mn(t){return G&&et(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Un(t){return"content-type"==t.toLowerCase()}function qn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Fn(t),Bn(t)}function Fn(t){t.u||(t.u=!0,xt(t,"complete"),xt(t,"error"))}function zn(t){if(t.b&&"undefined"!=typeof a&&(!t.s[1]||4!=Kn(t)||2!=t.W()))if(t.l&&4==Kn(t))Yt(t.za,0,t);else if(xt(t,"readystatechange"),4==Kn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ke)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ln.test(o?o.toLowerCase():"")}e=i}var u=e;if(u)xt(t,"complete"),xt(t,"success");else{t.h=6;try{var h=2<Kn(t)?t.a.statusText:""}catch(n){h=""}t.f=h+" ["+t.W()+"]",Fn(t)}}finally{Bn(t)}}}function Bn(t,e){if(t.a){Gn(t);var n=t.a,r=t.s[0]?h:null;t.a=null,t.s=null,e||xt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Gn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(c.clearTimeout(t.m),t.m=null)}function Kn(t){return t.a?t.a.readyState:0}function Wn(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Hn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Wn(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ze(t,e,n))}function Yn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qn(t){this.pa=0,this.g=[],this.c=new ee,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Yn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Yn("baseRetryDelayMs",5e3,t),this.Ra=Yn("retryDelaySeedMs",1e4,t),this.Ma=Yn("forwardChannelMaxRetries",2,t),this.ma=Yn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new wn(t&&t.concurrentRequestLimit),this.ka=new Sn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Xn(t){if($n(t),3==t.v){var e=t.R++,n=Ye(t.B);Ze(n,"SID",t.J),Ze(n,"RID",e),Ze(n,"TYPE","terminate"),rr(t,n),e=new je(t,t.c,e,void 0),e.H=2,e.i=tn(Ye(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(e.i.toString(),"")),!n&&c.Image&&((new Image).src=e.i,n=!0),n||(e.a=vr(e.g,null),e.a.ba(e.i)),e.u=w(),Pe(e)}pr(t)}function Jn(t){t.a&&(ur(t),t.a.cancel(),t.a=null)}function $n(t){Jn(t),t.j&&(c.clearTimeout(t.j),t.j=null),cr(t),t.b.cancel(),t.h&&("number"===typeof t.h&&c.clearTimeout(t.h),t.h=null)}function Zn(t,e){t.g.push(new bn(t.Oa++,e)),3==t.v&&tr(t)}function tr(t){In(t.b)||t.h||(t.h=!0,Ft(t.Ba,t),t.u=0)}function er(t,e){return!(En(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=ve(m(t.Ba,t,e),fr(t,t.u)),t.u++,!0))}function nr(t,e){var n;n=e?e.f:t.R++;var r=Ye(t.B);Ze(r,"SID",t.J),Ze(r,"RID",n),Ze(r,"AID",t.P),rr(t,r),t.i&&t.l&&Hn(r,t.i,t.l),n=new je(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ir(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Tn(t.b,n),De(n,r,e)}function rr(t,e){t.f&&Fe({},(function(t,n){Ze(e,n,t)}))}function ir(t,e,n){n=Math.min(t.g.length,n);var r=t.f?m(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(c-=o,0>c)o=Math.max(0,i[a].b-100),u=!1;else try{Dn(h,s,"req"+c+"_")}catch(f){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function or(t){t.a||t.j||(t.T=1,Ft(t.Aa,t),t.o=0)}function sr(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ve(m(t.Aa,t),fr(t,t.o)),t.o++,!0)}function ur(t){null!=t.s&&(c.clearTimeout(t.s),t.s=null)}function ar(t){t.a=new je(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ye(t.la);Ze(e,"RID","rpc"),Ze(e,"SID",t.J),Ze(e,"CI",t.H?"0":"1"),Ze(e,"AID",t.P),rr(t,e),Ze(e,"TYPE","xmlhttp"),t.i&&t.l&&Hn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=tn(Ye(e)),n.j=null,n.I=!0,ke(n,t)}function cr(t){null!=t.m&&(c.clearTimeout(t.m),t.m=null)}function hr(t,e){var n=null;if(t.a==e){cr(t),ur(t),t.a=null;var r=2}else{if(!On(t.b,e))return;n=e.s,jn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=w()-e.u;var i=t.u;r=ce(),xt(r,new de(r,n,e,i)),tr(t)}else or(t);else if(i=e.h,3==i||0==i&&0<t.I||!(1==r&&er(t,e)||2==r&&sr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:lr(t,5);break;case 4:lr(t,10);break;case 3:lr(t,6);break;default:lr(t,2)}}function fr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function lr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=m(t.Ya,t);n||(n=new He("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Qe(n,"https"),tn(n)),kn(n.toString(),r)}else pe(2);t.v=0,t.f&&t.f.ra(e),pr(t),$n(t)}function pr(t){t.v=0,t.I=-1,t.f&&(0==An(t.b).length&&0==t.g.length||(t.b.c.length=0,N(t.g),t.g.length=0),t.f.qa())}function dr(t,e,n){var r=en(n);if(""!=r.c)e&&Xe(r,e+"."+r.c),Je(r,r.h);else{var i=c.location;r=nn(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&L(t.V,(function(t,e){Ze(r,e,t)})),e=t.A,n=t.na,e&&n&&Ze(r,e,n),Ze(r,"VER",t.ha),rr(t,r),r}function vr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new Pn(t.Na),e.F=t.C,e}function yr(){}function gr(){if(G&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function mr(t,e){kt.call(this),this.a=new Qn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!S(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!S(e)&&(this.a.A=e,t=this.b,null!==t&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new _r(this)}function br(t){Ee.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function wr(){Oe.call(this),this.status=1}function _r(t){this.a=t}s=Pn.prototype,s.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?be(this.H):be(_e),this.a.onreadystatechange=m(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void qn(this,o)}t=n||"";var i=new ze(this.headers);r&&Fe(r,(function(t,e){i.set(e,t)})),r=j(i.L()),n=c.FormData&&t instanceof c.FormData,!(0<=O(Vn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Gn(this),0<this.o&&((this.D=Mn(this.a))?(this.a.timeout=this.o,this.a.ontimeout=m(this.xa,this)):this.m=Yt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){qn(this,o)}},s.xa=function(){"undefined"!=typeof a&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,xt(this,"timeout"),this.abort(8))},s.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,xt(this,"complete"),xt(this,"abort"),Bn(this))},s.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Bn(this,!0)),Pn.X.G.call(this)},s.za=function(){this.j||(this.A||this.l||this.g?zn(this):this.Ua())},s.Ua=function(){zn(this)},s.W=function(){try{return 2<Kn(this)?this.a.status:-1}catch(t){return-1}},s.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},s.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Cn(e)}},s.ua=function(){return this.h},s.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},s=Qn.prototype,s.ha=8,s.v=1,s.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new je(this,this.c,t,void 0),r=this.l;if(this.O&&(r?(r=V(r),U(r,this.O)):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(o="__data__"in o.a&&(o=o.a.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(e+=o,4096<e){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ir(this,n,e),i=Ye(this.B),Ze(i,"RID",t),Ze(i,"CVER",22),this.A&&Ze(i,"X-HTTP-Session-Id",this.A),rr(this,i),this.i&&r&&Hn(i,this.i,r),Tn(this.b,n),this.Ia&&Ze(i,"TYPE","init"),this.da?(Ze(i,"$req",e),Ze(i,"SID","null"),n.U=!0,De(n,i,null)):De(n,i,e),this.v=2}}else 3==this.v&&(t?nr(this,t):0==this.g.length||In(this.b)||nr(this))},s.Aa=function(){if(this.j=null,ar(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ve(m(this.Ta,this),t)}},s.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,pe(10),Jn(this),ar(this))},s.Sa=function(){null!=this.m&&(this.m=null,Jn(this),sr(this),pe(19))},s.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),pe(2)):(this.c.info("Failed to ping google.com"),pe(1))},s=yr.prototype,s.ta=function(){},s.sa=function(){},s.ra=function(){},s.qa=function(){},s.Ja=function(){},gr.prototype.a=function(t,e){return new mr(t,e)},_(mr,kt),mr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;pe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=dr(t,null,t.fa),tr(t)},mr.prototype.close=function(){Xn(this.a)},mr.prototype.h=function(t){if("string"===typeof t){var e={};e.__data__=t,Zn(this.a,e)}else this.l?(e={},e.__data__=Pt(t),Zn(this.a,e)):Zn(this.a,t)},mr.prototype.G=function(){this.a.f=null,delete this.f,Xn(this.a),delete this.a,mr.X.G.call(this)},_(br,Ee),_(wr,Oe),_(_r,yr),_r.prototype.ta=function(){xt(this.a,"a")},_r.prototype.sa=function(t){xt(this.a,new br(t))},_r.prototype.ra=function(t){xt(this.a,new wr(t))},_r.prototype.qa=function(){xt(this.a,"b")},gr.prototype.createWebChannel=gr.prototype.a,mr.prototype.send=mr.prototype.h,mr.prototype.open=mr.prototype.g,mr.prototype.close=mr.prototype.close,ye.NO_ERROR=0,ye.TIMEOUT=8,ye.HTTP_ERROR=6,ge.COMPLETE="complete",we.EventType=Ie,Ie.OPEN="a",Ie.CLOSE="b",Ie.ERROR="c",Ie.MESSAGE="d",kt.prototype.listen=kt.prototype.va,Pn.prototype.listenOnce=Pn.prototype.wa,Pn.prototype.getLastError=Pn.prototype.Qa,Pn.prototype.getLastErrorCode=Pn.prototype.ua,Pn.prototype.getStatus=Pn.prototype.W,Pn.prototype.getResponseJson=Pn.prototype.Pa,Pn.prototype.getResponseText=Pn.prototype.$,Pn.prototype.send=Pn.prototype.ba;var Ir=function(){return new gr},Er=function(){return ce()},Or=ye,Tr=ge,jr=ue,Ar={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},Nr=we,Sr=Pn}).call(this,n("yLpj"))},xsWp:function(t,e,n){"use strict";(function(t){var e=n("mrSG"),r=n("zIRd"),i=n("q/0M"),o=n("qOnz"),s=n("x7I3"),u=n("/6Yf"),a=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},c=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),h=function(){function t(t){this.uid=t}return t.prototype.u=function(){return null!=this.uid},t.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();h.UNAUTHENTICATED=new h(null),h.l=new h("google-credentials-uid"),h._=new h("first-party-uid");var f=new i["b"]("@firebase/firestore");function l(){return f.logLevel}function p(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(f.logLevel<=i["a"].DEBUG){var o=n.map(y);f.debug.apply(f,Object(e["g"])(["Firestore (8.1.1): "+t],o))}}function d(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(f.logLevel<=i["a"].ERROR){var o=n.map(y);f.error.apply(f,Object(e["g"])(["Firestore (8.1.1): "+t],o))}}function v(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(f.logLevel<=i["a"].WARN){var o=n.map(y);f.warn.apply(f,Object(e["g"])(["Firestore (8.1.1): "+t],o))}}function y(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function g(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.1.1) INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function m(t,e){t||g()}function b(t,e){return t}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(e["c"])(n,t),n}(Error),I=function(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t},E=function(){function t(){this.I=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.m=function(){},t.prototype.A=function(t){this.I=t,t(h.UNAUTHENTICATED)},t.prototype.R=function(){this.I=null},t}(),O=function(){function t(t){var e=this;this.P=null,this.currentUser=h.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then((function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.V,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.V!==e?(p("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(m("string"==typeof n.accessToken),new I(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.m=function(){this.forceRefresh=!0},t.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},t.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},t.prototype.p=function(){var t=this.auth&&this.auth.getUid();return m(null===t||"string"==typeof t),new h(t)},t}(),T=function(){function t(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=h._}return Object.defineProperty(t.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),j=function(){function t(t,e){this.v=t,this.S=e}return t.prototype.getToken=function(){return Promise.resolve(new T(this.v,this.S))},t.prototype.A=function(t){t(h._)},t.prototype.R=function(){},t.prototype.m=function(){},t}();function A(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var N=function(){function t(){}return t.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=A(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function S(t,e){return t<e?-1:t>e?1:0}function D(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function k(t){return t+"\0"}var x=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.C=function(t){return this.seconds===t.seconds?S(this.nanoseconds,t.nanoseconds):S(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),C=function(){function t(t){this.timestamp=t}return t.N=function(e){return new t(e)},t.min=function(){return new t(new x(0,0))},t.prototype.F=function(t){return this.timestamp.C(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t}(),P=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&g(),void 0===n?n=t.length-e:n>t.length-e&&g(),this.segments=t,this.offset=e,this.k=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.$(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.L(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.B=function(t){return t=void 0===t?1:t,this.L(this.segments,this.offset+t,this.length-t)},t.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},t.prototype.U=function(){return this.segments[this.offset]},t.prototype.K=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.W=function(){return 0===this.length},t.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},t.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),R=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.prototype.L=function(t,e,r){return new n(t,e,r)},n.prototype.J=function(){return this.H().join("/")},n.prototype.toString=function(){return this.J()},n.Y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new _(w.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new n(r)},n.X=function(){return new n([])},n}(P),L=/^[_a-zA-Z][_a-zA-Z0-9]*$/,V=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.prototype.L=function(t,e,r){return new n(t,e,r)},n.Z=function(t){return L.test(t)},n.prototype.J=function(){return this.H().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),n.Z(t)||(t="`"+t+"`"),t})).join(".")},n.prototype.toString=function(){return this.J()},n.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},n.et=function(){return new n(["__name__"])},n.nt=function(t){for(var e=[],r="",i=0,o=function(){if(0===r.length)throw new _(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new _(w.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new _(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new _(w.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)},n.X=function(){return new n([])},n}(P),M=function(){function t(t){this.path=t}return t.st=function(e){return new t(R.Y(e))},t.it=function(e){return new t(R.Y(e).B(5))},t.prototype.rt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===R.$(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.$=function(t,e){return R.$(t.path,e.path)},t.ot=function(t){return t.length%2==0},t.ct=function(e){return new t(new R(e.slice()))},t}();function U(t){return null==t}function q(t){return 0===t&&1/t==-1/0}function F(t){return"number"==typeof t&&Number.isInteger(t)&&!q(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var z=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function B(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new z(t,e,n,r,i,o,s)}function G(t){var e=b(t);if(null===e.ut){var n=e.path.J();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.J()+t.op.toString()+Ut(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.J()+t.dir}(t)})).join(","),U(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=zn(e.startAt)),e.endAt&&(n+="|ub:",n+=zn(e.endAt)),e.ut=n}return e.ut}function K(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Hn(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Rt(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gn(t.startAt,e.startAt)&&Gn(t.endAt,e.endAt)}function W(t){return M.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var H=function(){function t(t){this.at=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.at,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},t.prototype.ht=function(){return 2*this.at.length},t.prototype.F=function(t){return S(this.at,t.at)},t.prototype.isEqual=function(t){return this.at===t.at},t}();H.lt=new H("");var Y,Q,X=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=C.min()),void 0===o&&(o=C.min()),void 0===s&&(s=H.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.dt=function(e){return new t(this.target,this.targetId,this._t,e,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.wt=function(e,n){return new t(this.target,this.targetId,this._t,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Et=function(e){return new t(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,e,this.resumeToken)},t}(),J=function(t){this.count=t};function $(t){switch(t){case w.OK:return g();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return g()}}function Z(t){if(void 0===t)return d("GRPC error has no .code"),w.UNKNOWN;switch(t){case Y.OK:return w.OK;case Y.CANCELLED:return w.CANCELLED;case Y.UNKNOWN:return w.UNKNOWN;case Y.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Y.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Y.INTERNAL:return w.INTERNAL;case Y.UNAVAILABLE:return w.UNAVAILABLE;case Y.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Y.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Y.NOT_FOUND:return w.NOT_FOUND;case Y.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Y.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Y.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Y.ABORTED:return w.ABORTED;case Y.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Y.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Y.DATA_LOSS:return w.DATA_LOSS;default:return g()}}(Q=Y||(Y={}))[Q.OK=0]="OK",Q[Q.CANCELLED=1]="CANCELLED",Q[Q.UNKNOWN=2]="UNKNOWN",Q[Q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Q[Q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Q[Q.NOT_FOUND=5]="NOT_FOUND",Q[Q.ALREADY_EXISTS=6]="ALREADY_EXISTS",Q[Q.PERMISSION_DENIED=7]="PERMISSION_DENIED",Q[Q.UNAUTHENTICATED=16]="UNAUTHENTICATED",Q[Q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Q[Q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Q[Q.ABORTED=10]="ABORTED",Q[Q.OUT_OF_RANGE=11]="OUT_OF_RANGE",Q[Q.UNIMPLEMENTED=12]="UNIMPLEMENTED",Q[Q.INTERNAL=13]="INTERNAL",Q[Q.UNAVAILABLE=14]="UNAVAILABLE",Q[Q.DATA_LOSS=15]="DATA_LOSS";var tt=function(){function t(t,e){this.$=t,this.root=e||nt.EMPTY}return t.prototype.Tt=function(e,n){return new t(this.$,this.root.Tt(e,n,this.$).copy(null,null,nt.It,null,null))},t.prototype.remove=function(e){return new t(this.$,this.root.remove(e,this.$).copy(null,null,nt.It,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.W=function(){return this.root.W()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.At=function(){return this.root.At()},t.prototype.Rt=function(){return this.root.Rt()},t.prototype.Pt=function(t){return this.root.Pt(t)},t.prototype.forEach=function(t){this.Pt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Pt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.yt=function(){return new et(this.root,null,this.$,!1)},t.prototype.Vt=function(t){return new et(this.root,t,this.$,!1)},t.prototype.vt=function(){return new et(this.root,null,this.$,!0)},t.prototype.bt=function(t){return new et(this.root,t,this.$,!0)},t}(),et=function(){function t(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}return t.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},t.prototype.Nt=function(){return this.Dt.length>0},t.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),nt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.W=function(){return!1},t.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.W()?this:this.left.min()},t.prototype.At=function(){return this.min().key},t.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},t.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},t.prototype.Ot=function(){if(this.left.W())return t.EMPTY;var e=this;return e.left.Mt()||e.left.left.Mt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.Ot(),null)).Ft()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.W()||i.left.Mt()||i.left.left.Mt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Mt()&&(i=i.$t()),i.right.W()||i.right.Mt()||i.right.left.Mt()||(i=i.Lt()),0===n(e,i.key)){if(i.right.W())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Ot())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ft()},t.prototype.Mt=function(){return this.color},t.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},t.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},t.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},t.prototype.Bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.$t=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},t.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw g();if(this.right.Mt())throw g();var t=this.left.Qt();if(t!==this.right.Qt())throw g();return t+(this.Mt()?0:1)},t}();nt.EMPTY=null,nt.RED=!0,nt.It=!1,nt.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw g()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Tt=function(t,e,n){return new nt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.W=function(){return!0},t.prototype.Pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.At=function(){return null},t.prototype.Rt=function(){return null},t.prototype.Mt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.Qt=function(){return 0},t}());var rt=function(){function t(t){this.$=t,this.data=new tt(this.$)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.At()},t.prototype.last=function(){return this.data.Rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pt((function(e,n){return t(e),!1}))},t.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(this.$(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Wt=function(t,e){var n;for(n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},t.prototype.jt=function(t){var e=this.data.Vt(t);return e.Nt()?e.Ct().key:null},t.prototype.yt=function(){return new it(this.data.yt())},t.prototype.Vt=function(t){return new it(this.data.Vt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.W=function(){return this.data.W()},t.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.yt(),r=e.data.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(0!==this.$(i,o))return!1}return!0},t.prototype.H=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.$);return n.data=e,n},t}(),it=function(){function t(t){this.zt=t}return t.prototype.Ct=function(){return this.zt.Ct().key},t.prototype.Nt=function(){return this.zt.Nt()},t}(),ot=new tt(M.$);function st(){return ot}function ut(){return st()}var at=new tt(M.$);function ct(){return at}var ht=new tt(M.$),ft=new rt(M.$);function lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ft,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var pt=new rt(S);function dt(){return pt}var vt=function(){function t(t){this.$=t?function(e,n){return t(e,n)||M.$(e.key,n.key)}:function(t,e){return M.$(t.key,e.key)},this.Ht=ct(),this.Jt=new tt(this.$)}return t.Yt=function(e){return new t(e.$)},t.prototype.has=function(t){return null!=this.Ht.get(t)},t.prototype.get=function(t){return this.Ht.get(t)},t.prototype.first=function(){return this.Jt.At()},t.prototype.last=function(){return this.Jt.Rt()},t.prototype.W=function(){return this.Jt.W()},t.prototype.indexOf=function(t){var e=this.Ht.get(t);return e?this.Jt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Jt.Pt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Jt.yt(),r=e.Jt.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.$=this.$,r.Ht=e,r.Jt=n,r},t}(),yt=function(){function t(){this.Xt=new tt(M.$)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);n?0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):g():this.Xt=this.Xt.Tt(e,t)},t.prototype.Zt=function(){var t=[];return this.Xt.Pt((function(e,n){t.push(n)})),t},t}(),gt=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=u}return t.ie=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,vt.Yt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&An(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),mt=function(){function t(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}return t.ae=function(e,n){var r=new Map;return r.set(e,bt.he(e,n)),new t(C.min(),r,dt(),st(),lt())},t}(),bt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}return t.he=function(e,n){return new t(H.lt,n,lt(),lt(),lt())},t}(),wt=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},_t=function(t,e){this.targetId=t,this.Te=e},It=function(t,e,n,r){void 0===n&&(n=H.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Et=function(){function t(){this.Ie=0,this.me=jt(),this.Ae=H.lt,this.Re=!1,this.Pe=!0}return Object.defineProperty(t.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),t.prototype.Ve=function(t){t.ht()>0&&(this.Pe=!0,this.Ae=t)},t.prototype.pe=function(){var t=lt(),e=lt(),n=lt();return this.me.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:g()}})),new bt(this.Ae,this.Re,t,e,n)},t.prototype.ve=function(){this.Pe=!1,this.me=jt()},t.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},t.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.Ie+=1},t.prototype.Ce=function(){this.Ie-=1},t.prototype.Ne=function(){this.Pe=!0,this.Re=!0},t}(),Ot=function(){function t(t){this.xe=t,this.Fe=new Map,this.Oe=st(),this.Me=Tt(),this.ke=new rt(S)}return t.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof pn?this.Le(r,t.Ee):t.Ee instanceof dn&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Be(s,t.key,t.Ee)}},t.prototype.qe=function(t){var e=this;this.Ue(t,(function(n){var r=e.Qe(n);switch(t.state){case 0:e.Ke(n)&&r.Ve(t.resumeToken);break;case 1:r.Ce(),r.ge||r.ve(),r.Ve(t.resumeToken);break;case 2:r.Ce(),r.ge||e.removeTarget(n);break;case 3:e.Ke(n)&&(r.Ne(),r.Ve(t.resumeToken));break;case 4:e.Ke(n)&&(e.We(n),r.Ve(t.resumeToken));break;default:g()}}))},t.prototype.Ue=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fe.forEach((function(t,r){n.Ke(r)&&e(r)}))},t.prototype.je=function(t){var e=t.targetId,n=t.Te.count,r=this.Ge(e);if(r){var i=r.target;if(W(i))if(0===n){var o=new M(i.path);this.Be(e,o,new dn(o,C.min()))}else m(1===n);else this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e))}},t.prototype.He=function(t){var e=this,n=new Map;this.Fe.forEach((function(r,i){var o=e.Ge(i);if(o){if(r.le&&W(o.target)){var s=new M(o.target.path);null!==e.Oe.get(s)||e.Je(i,s)||e.Be(i,s,new dn(s,t))}r.ye&&(n.set(i,r.pe()),r.ve())}}));var r=lt();this.Me.forEach((function(t,n){var i=!0;n.Wt((function(t){var n=e.Ge(t);return!n||2===n._t||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new mt(t,n,this.ke,this.Oe,r);return this.Oe=st(),this.Me=Tt(),this.ke=new rt(S),i},t.prototype.Le=function(t,e){if(this.Ke(t)){var n=this.Je(t,e.key)?2:0;this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t))}},t.prototype.Be=function(t,e,n){if(this.Ke(t)){var r=this.Qe(t);this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n))}},t.prototype.removeTarget=function(t){this.Fe.delete(t)},t.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},t.prototype.De=function(t){this.Qe(t).De()},t.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new Et,this.Fe.set(t,e)),e},t.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new rt(S),this.Me=this.Me.Tt(t,e)),e},t.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||p("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},t.prototype.We=function(t){var e=this;this.Fe.set(t,new Et),this.xe.Xe(t).forEach((function(n){e.Be(t,n,null)}))},t.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},t}();function Tt(){return new tt(M.$)}function jt(){return new tt(M.$)}function At(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nt(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function St(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function kt(t){var e=t.mapValue.fields.__previous_value__;return Dt(e)?kt(e):e}function xt(t){var e=Ft(t.mapValue.fields.__local_write_time__.timestampValue);return new x(e.seconds,e.nanos)}var Ct=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dt(t)?4:10:g()}function Rt(t,e){var n=Pt(t);if(n!==Pt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xt(t).isEqual(xt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ft(t.timestampValue),r=Ft(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Bt(t.bytesValue).isEqual(Bt(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return zt(t.geoPointValue.latitude)===zt(e.geoPointValue.latitude)&&zt(t.geoPointValue.longitude)===zt(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return zt(t.integerValue)===zt(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=zt(t.doubleValue),r=zt(e.doubleValue);return n===r?q(n)===q(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return D(t.arrayValue.values||[],e.arrayValue.values||[],Rt);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(At(n)!==At(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Rt(n[i],r[i])))return!1;return!0}(t,e);default:return g()}}function Lt(t,e){return void 0!==(t.values||[]).find((function(t){return Rt(t,e)}))}function Vt(t,e){var n=Pt(t),r=Pt(e);if(n!==r)return S(n,r);switch(n){case 0:return 0;case 1:return S(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=zt(t.integerValue||t.doubleValue),r=zt(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Mt(t.timestampValue,e.timestampValue);case 4:return Mt(xt(t),xt(e));case 5:return S(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Bt(t),r=Bt(e);return n.F(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=S(n[i],r[i]);if(0!==o)return o}return S(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=S(zt(t.latitude),zt(e.latitude));return 0!==n?n:S(zt(t.longitude),zt(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Vt(n[i],r[i]);if(o)return o}return S(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=S(r[s],o[s]);if(0!==u)return u;var a=Vt(n[r[s]],i[o[s]]);if(0!==a)return a}return S(r.length,o.length)}(t.mapValue,e.mapValue);default:throw g()}}function Mt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return S(t,e);var n=Ft(t),r=Ft(e),i=S(n.seconds,r.seconds);return 0!==i?i:S(n.nanos,r.nanos)}function Ut(t){return qt(t)}function qt(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ft(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Bt(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,M.it(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=qt(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+qt(t.fields[o])}return e+"}"}(t.mapValue):g();var e,n}function Ft(t){if(m(!!t),"string"==typeof t){var e=0,n=Ct.exec(t);if(m(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:zt(t.seconds),nanos:zt(t.nanos)}}function zt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Bt(t){return"string"==typeof t?H.fromBase64String(t):H.fromUint8Array(t)}function Gt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function Kt(t){return!!t&&"integerValue"in t}function Wt(t){return!!t&&"arrayValue"in t}function Ht(t){return!!t&&"nullValue"in t}function Yt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qt(t){return!!t&&"mapValue"in t}var Xt={asc:"ASCENDING",desc:"DESCENDING"},Jt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$t=function(t,e){this.t=t,this.tn=e};function Zt(t){return{integerValue:""+t}}function te(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:q(e)?"-0":e}}function ee(t,e){return F(e)?Zt(e):te(t,e)}function ne(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function re(t,e){return t.tn?e.toBase64():e.toUint8Array()}function ie(t,e){return ne(t,e.M())}function oe(t){return m(!!t),C.N(function(t){var e=Ft(t);return new x(e.seconds,e.nanos)}(t))}function se(t,e){return function(t){return new R(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).J()}function ue(t){var e=R.Y(t);return m(De(e)),e}function ae(t,e){return se(t.t,e.path)}function ce(t,e){var n=ue(e);if(n.get(1)!==t.t.projectId)throw new _(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new _(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new M(pe(n))}function he(t,e){return se(t.t,e)}function fe(t){var e=ue(t);return 4===e.length?R.X():pe(e)}function le(t){return new R(["projects",t.t.projectId,"databases",t.t.database]).J()}function pe(t){return m(t.length>4&&"documents"===t.get(4)),t.B(5)}function de(t,e,n){return{name:ae(t,e),fields:n.proto.mapValue.fields}}function ve(t,e){var n;if(e instanceof tn)n={update:de(t,e.key,e.value)};else if(e instanceof un)n={delete:ae(t,e.key)};else if(e instanceof en)n={update:de(t,e.key,e.data),updateMask:Se(e.en)};else if(e instanceof rn)n={transform:{document:ae(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Re)return{fieldPath:e.field.J(),setToServerValue:"REQUEST_TIME"};if(n instanceof Le)return{fieldPath:e.field.J(),appendMissingElements:{values:n.elements}};if(n instanceof Me)return{fieldPath:e.field.J(),removeAllFromArray:{values:n.elements}};if(n instanceof qe)return{fieldPath:e.field.J(),increment:n.nn};throw g()}(0,t)}))}};else{if(!(e instanceof an))return g();n={verify:ae(t,e.key)}}return e.rn.sn||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ie(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g()}(t,e.rn)),n}function ye(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?We.updateTime(oe(t.updateTime)):void 0!==t.exists?We.exists(t.exists):We.on()}(e.currentDocument):We.on();if(e.update){e.update.name;var r=ce(t,e.update.name),i=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Be(e.map((function(t){return V.nt(t)})))}(e.updateMask);return new en(r,i,o,n)}return new tn(r,i,n)}if(e.delete){var s=ce(t,e.delete);return new un(s,n)}if(e.transform){var u=ce(t,e.transform.document),a=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)m("REQUEST_TIME"===e.setToServerValue),n=new Re;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Le(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Me(i)}else"increment"in e?n=new qe(t,e.increment):g();var o=V.nt(e.fieldPath);return new Ge(o,n)}(t,e)}));return m(!0===n.exists),new rn(u,a)}if(e.verify){var c=ce(t,e.verify);return new an(c,n)}return g()}function ge(t,e){return{documents:[he(t,e.path)]}}function me(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=he(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=he(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Yt(t.value))return{unaryFilter:{field:Te(t.field),op:"IS_NAN"}};if(Ht(t.value))return{unaryFilter:{field:Te(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Yt(t.value))return{unaryFilter:{field:Te(t.field),op:"IS_NOT_NAN"}};if(Ht(t.value))return{unaryFilter:{field:Te(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Te(t.field),op:Oe(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Te(t.field),direction:Ee(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.tn||U(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=_e(e.startAt)),e.endAt&&(n.structuredQuery.endAt=_e(e.endAt)),n}function be(t){var e=fe(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){m(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=we(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Kn(je(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return U(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ie(n.startAt));var h=null;return n.endAt&&(h=Ie(n.endAt)),gn(e,i,u,s,a,"F",c,h)}function we(t){return t?void 0!==t.unaryFilter?[Ne(t)]:void 0!==t.fieldFilter?[Ae(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return we(t)})).reduce((function(t,e){return t.concat(e)})):g():[]}function _e(t){return{before:t.before,values:t.position}}function Ie(t){var e=!!t.before,n=t.values||[];return new Fn(n,e)}function Ee(t){return Xt[t]}function Oe(t){return Jt[t]}function Te(t){return{fieldPath:t.J()}}function je(t){return V.nt(t.fieldPath)}function Ae(t){return xn.create(je(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return g()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ne(t){switch(t.unaryFilter.op){case"IS_NAN":var e=je(t.unaryFilter.field);return xn.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=je(t.unaryFilter.field);return xn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=je(t.unaryFilter.field);return xn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=je(t.unaryFilter.field);return xn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return g()}}function Se(t){var e=[];return t.fields.forEach((function(t){return e.push(t.J())})),{fieldPaths:e}}function De(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var ke=function(){this.cn=void 0};function xe(t,e,n){return t instanceof Re?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Le?Ve(t,e):t instanceof Me?Ue(t,e):function(t,e){var n=Pe(t,e),r=Fe(n)+Fe(t.nn);return Kt(n)&&Kt(t.nn)?Zt(r):te(t.serializer,r)}(t,e)}function Ce(t,e,n){return t instanceof Le?Ve(t,e):t instanceof Me?Ue(t,e):n}function Pe(t,e){return t instanceof qe?Kt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Re=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n}(ke),Le=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(e["c"])(n,t),n}(ke);function Ve(t,e){for(var n=ze(e),r=function(t){n.some((function(e){return Rt(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Me=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(e["c"])(n,t),n}(ke);function Ue(t,e){for(var n=ze(e),r=function(t){n=n.filter((function(e){return!Rt(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var qe=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.nn=n,r}return Object(e["c"])(n,t),n}(ke);function Fe(t){return zt(t.integerValue||t.doubleValue)}function ze(t){return Wt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Be=function(){function t(t){this.fields=t,t.sort(V.$)}return t.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},t.prototype.isEqual=function(t){return D(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ge=function(t,e){this.field=t,this.transform=e},Ke=function(t,e){this.version=t,this.transformResults=e},We=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.on=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function He(t,e){return void 0!==t.updateTime?e instanceof pn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof pn}var Ye=function(){};function Qe(t,e,n){return t instanceof tn?function(t,e,n){return new pn(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof en?function(t,e,n){if(!He(t.rn,e))return new vn(t.key,n.version);var r=nn(t,e);return new pn(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof rn?function(t,e,n){if(m(null!=n.transformResults),!He(t.rn,e))return new vn(t.key,n.version);var r=on(t,e),i=function(t,e,n){var r=[];m(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof pn&&(u=e.field(o.field)),r.push(Ce(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=sn(t,r.data(),i);return new pn(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new dn(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Xe(t,e,n,r){return t instanceof tn?function(t,e){if(!He(t.rn,e))return e;var n=Ze(e);return new pn(t.key,n,t.value,{an:!0})}(t,e):t instanceof en?function(t,e){if(!He(t.rn,e))return e;var n=Ze(e),r=nn(t,e);return new pn(t.key,n,r,{an:!0})}(t,e):t instanceof rn?function(t,e,n,r){if(!He(t.rn,e))return e;var i=on(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof pn&&(c=n.field(u.field)),null===c&&r instanceof pn&&(c=r.field(u.field)),i.push(xe(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=sn(t,i.data(),o);return new pn(t.key,i.version,s,{an:!0})}(t,e,r,n):function(t,e){return He(t.rn,e)?new dn(t.key,C.min()):e}(t,e)}function Je(t,e){return t instanceof rn?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof pn?e.field(o.field):void 0,u=Pe(o.transform,s||null);null!=u&&(n=null==n?(new hn).set(o.field,u):n.set(o.field,u))}return n?n.hn():null}(t,e):null}function $e(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||D(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Le&&e instanceof Le||t instanceof Me&&e instanceof Me?D(t.elements,e.elements,Rt):t instanceof qe&&e instanceof qe?Rt(t.nn,e.nn):t instanceof Re&&e instanceof Re}(t.transform,e.transform)}(t,e)})))}function Ze(t){return t instanceof pn?t.version:C.min()}var tn=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.rn=r,i.type=0,i}return Object(e["c"])(n,t),n}(Ye),en=function(t){function n(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.en=r,o.rn=i,o.type=1,o}return Object(e["c"])(n,t),n}(Ye);function nn(t,e){return function(t,e){var n=new hn(e);return t.en.fields.forEach((function(e){if(!e.W()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.hn()}(t,e instanceof pn?e.data():cn.empty())}var rn=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.rn=We.exists(!0),r}return Object(e["c"])(n,t),n}(Ye);function on(t,e){return e}function sn(t,e,n){for(var r=new hn(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.hn()}var un=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=3,r}return Object(e["c"])(n,t),n}(Ye),an=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=4,r}return Object(e["c"])(n,t),n}(Ye),cn=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Qt(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},t.prototype.isEqual=function(t){return Rt(this.proto,t.proto)},t}(),hn=function(){function t(t){void 0===t&&(t=cn.empty()),this.ln=t,this._n=new Map}return t.prototype.set=function(t,e){return this.fn(t,e),this},t.prototype.delete=function(t){return this.fn(t,null),this},t.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Pt(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.K(),e)},t.prototype.hn=function(){var t=this.dn(V.X(),this._n);return null!=t?new cn(t):this.ln},t.prototype.dn=function(t,e){var n=this,r=!1,i=this.ln.field(t),o=Qt(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.dn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function fn(t){var e=[];return Nt(t.fields||{},(function(t,n){var r=new V([t]);if(Qt(n)){var i=fn(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Be(e)}var ln=function(t,e){this.key=t,this.version=e},pn=function(t){function n(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).wn=r,o.an=!!i.an,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(e["c"])(n,t),n.prototype.field=function(t){return this.wn.field(t)},n.prototype.data=function(){return this.wn},n.prototype.En=function(){return this.wn.proto},n.prototype.isEqual=function(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},n.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n}(ln),dn=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(e["c"])(n,t),n.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(ln),vn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(ln),yn=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.In=null,this.mn=null,this.startAt,this.endAt};function gn(t,e,n,r,i,o,s,u){return new yn(t,e,n,r,i,o,s,u)}function mn(t){return new yn(t)}function bn(t){return!U(t.limit)&&"F"===t.limitType}function wn(t){return!U(t.limit)&&"L"===t.limitType}function _n(t){return t.Tn.length>0?t.Tn[0].field:null}function In(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function En(t){return null!==t.collectionGroup}function On(t){var e=b(t);if(null===e.In){e.In=[];var n=In(e),r=_n(e);if(null!==n&&null===r)n.tt()||e.In.push(new Kn(n)),e.In.push(new Kn(V.et(),"asc"));else{for(var i=!1,o=0,s=e.Tn;o<s.length;o++){var u=s[o];e.In.push(u),u.field.tt()&&(i=!0)}if(!i){var a=e.Tn.length>0?e.Tn[e.Tn.length-1].dir:"asc";e.In.push(new Kn(V.et(),a))}}}return e.In}function Tn(t){var e=b(t);if(!e.mn)if("F"===e.limitType)e.mn=B(e.path,e.collectionGroup,On(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=On(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Kn(o.field,s))}var u=e.endAt?new Fn(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Fn(e.startAt.position,!e.startAt.before):null;e.mn=B(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.mn}function jn(t,e,n){return new yn(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function An(t,e){return K(Tn(t),Tn(e))&&t.limitType===e.limitType}function Nn(t){return G(Tn(t))+"|lt:"+t.limitType}function Sn(t){return"Query(target="+function(t){var e=t.path.J();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.J()+" "+e.op+" "+Ut(e.value);var e})).join(", ")+"]"),U(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.J()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+zn(t.startAt)),t.endAt&&(e+=", endAt: "+zn(t.endAt)),"Target("+e+")"}(Tn(t))+"; limitType="+t.limitType+")"}function Dn(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.rt(t.collectionGroup)&&t.path.j(n):M.ot(t.path)?t.path.isEqual(n):t.path.G(n)}(t,e)&&function(t,e){for(var n=0,r=t.Tn;n<r.length;n++){var i=r[n];if(!i.field.tt()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Bn(t.startAt,On(t),e))&&(!t.endAt||!Bn(t.endAt,On(t),e))}(t,e)}function kn(t){return function(e,n){for(var r=!1,i=0,o=On(t);i<o.length;i++){var s=o[i],u=Wn(s,e,n);if(0!==u)return u;r=r||s.field.tt()}return 0}}var xn=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(e["c"])(n,t),n.create=function(t,e,r){return t.tt()?"in"===e||"not-in"===e?this.Rn(t,e,r):new Cn(t,e,r):"array-contains"===e?new Vn(t,r):"in"===e?new Mn(t,r):"not-in"===e?new Un(t,r):"array-contains-any"===e?new qn(t,r):new n(t,e,r)},n.Rn=function(t,e,n){return"in"===e?new Pn(t,n):new Rn(t,n)},n.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Pn(Vt(e,this.value)):null!==e&&Pt(this.value)===Pt(e)&&this.Pn(Vt(e,this.value))},n.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return g()}},n.prototype.An=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},n}((function(){})),Cn=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=M.it(r.referenceValue),i}return Object(e["c"])(n,t),n.prototype.matches=function(t){var e=M.$(t.key,this.key);return this.Pn(e)},n}(xn),Pn=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ln("in",n),r}return Object(e["c"])(n,t),n.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},n}(xn),Rn=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ln("not-in",n),r}return Object(e["c"])(n,t),n.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},n}(xn);function Ln(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return M.it(t.referenceValue)}))}var Vn=function(t){function n(e,n){return t.call(this,e,"array-contains",n)||this}return Object(e["c"])(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return Wt(e)&&Lt(e.arrayValue,this.value)},n}(xn),Mn=function(t){function n(e,n){return t.call(this,e,"in",n)||this}return Object(e["c"])(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Lt(this.value.arrayValue,e)},n}(xn),Un=function(t){function n(e,n){return t.call(this,e,"not-in",n)||this}return Object(e["c"])(n,t),n.prototype.matches=function(t){if(Lt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Lt(this.value.arrayValue,e)},n}(xn),qn=function(t){function n(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(e["c"])(n,t),n.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Wt(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Lt(e.value.arrayValue,t)}))},n}(xn),Fn=function(t,e){this.position=t,this.before=e};function zn(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ut(t)})).join(",")}function Bn(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.tt()?M.$(M.it(s.referenceValue),n.key):Vt(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Gn(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Rt(t.position[n],e.position[n]))return!1;return!0}var Kn=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Wn(t,e,n){var r=t.field.tt()?M.$(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Vt(r,i):g()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}function Hn(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Yn=function(){function t(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}return t.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Qe(o,e,r[i]))}return e},t.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Xe(i,e,e,this.gn))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Xe(a,e,o,this.gn))}return e},t.prototype.vn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.pn(r.key,t.get(r.key));i&&(n=n.Tt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),lt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&D(this.mutations,t.mutations,(function(t,e){return $e(t,e)}))&&D(this.baseMutations,t.baseMutations,(function(t,e){return $e(t,e)}))},t}(),Qn=function(){function t(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}return t.from=function(e,n,r){m(e.mutations.length===r.length);for(var i=ht,o=e.mutations,s=0;s<o.length;s++)i=i.Tt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Xn=function(){function t(t,e){this.Dn=t,this.Cn=e,this.Nn={}}return t.prototype.get=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.Cn(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Nt(this.Nn,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.W=function(){return St(this.Nn)},t}(),Jn=function(){function t(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t((function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)}),(function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Mn&&g(),this.Mn=!0,this.On?this.error?this.kn(n,this.error):this.$n(e,this.result):new t((function(t,i){r.xn=function(n){r.$n(e,n).next(t,i)},r.Fn=function(e){r.kn(n,e).next(t,i)}}))},t.prototype.Ln=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.$n=function(e,n){return e?this.Bn((function(){return e(n)})):t.resolve(n)},t.prototype.kn=function(e,n){return e?this.Bn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.qn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Un=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.qn(r)},t}(),$n=function(){function t(){this.Qn=new Xn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Kn=!1}return t.prototype.Wn=function(t){var e=this.Qn.get(t);return e?e.readTime:C.min()},t.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},t.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},t.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?Jn.resolve(n.zn):this.Yn(t,e)},t.prototype.getEntries=function(t,e){return this.Xn(t,e)},t.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},t.prototype.Gn=function(){},t}(),Zn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};function tr(t){return new $t(t,!0)}function er(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var nr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rr=function(){function t(){this.ts=[]}return t.prototype.es=function(t){this.ts.push(t)},t.prototype.ns=function(){this.ts.forEach((function(t){return t()}))},t}(),ir=function(){function t(t,e,n){this.ss=t,this.rs=e,this.os=n}return t.prototype.cs=function(t,e){var n=this;return this.rs.us(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.ss.Jn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].pn(e,t);return t}))},t.prototype.ls=function(t,e,n){var r=ut();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].pn(t,e);r=r.Tt(t,e)})),r},t.prototype._s=function(t,e){var n=this;return this.ss.getEntries(t,e).next((function(e){return n.fs(t,e)}))},t.prototype.fs=function(t,e){var n=this;return this.rs.ds(t,e).next((function(r){var i=n.ls(t,e,r),o=st();return i.forEach((function(t,e){e||(e=new dn(t,C.min())),o=o.Tt(t,e)})),o}))},t.prototype.ws=function(t,e,n){return function(t){return M.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Es(t,e.path):En(e)?this.Ts(t,e,n):this.Is(t,e,n)},t.prototype.Es=function(t,e){return this.cs(t,new M(e)).next((function(t){var e=ct();return t instanceof pn&&(e=e.Tt(t.key,t)),e}))},t.prototype.Ts=function(t,e,n){var r=this,i=e.collectionGroup,o=ct();return this.os.As(t,i).next((function(s){return Jn.forEach(s,(function(s){var u=function(t,e){return new yn(e,null,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Is(t,u,n).next((function(t){t.forEach((function(t,e){o=o.Tt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Is=function(t,e,n){var r,i,o=this;return this.ss.ws(t,e,n).next((function(n){return r=n,o.rs.Rs(t,e)})).next((function(e){return i=e,o.Ps(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=Xe(a,h,h,o.gn);r=f instanceof pn?r.Tt(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Dn(e,n)||(r=r.remove(t))})),r}))},t.prototype.Ps=function(t,e,n){for(var r=lt(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof en&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.ss.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof pn&&(c=c.Tt(t,e))})),c}))},t}(),or=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}return t.Vs=function(e,n){for(var r=lt(),i=lt(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),sr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}return t.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},t}();sr.Ds=-1;var ur=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ms=0},t.prototype.Ls=function(){this.Ms=this.Os},t.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,(function(){return e.$s=Date.now(),t()})),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},t.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},t.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},t.prototype.qs=function(){return(Math.random()-.5)*this.Ms},t}(),ar=function(){function n(t,e,r){this.name=t,this.version=e,this.Ws=r,12.2===n.js(Object(o["g"])())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return n.delete=function(t){return p("SimpleDb","Removing database:",t),dr(window.indexedDB.deleteDatabase(t)).Ln()},n.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(n.zs())return!0;var t=Object(o["g"])(),e=n.js(t),r=0<e&&e<10,i=n.Hs(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},n.zs=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({NODE_ENV:"production"}))||void 0===e?void 0:e.Js)},n.Ys=function(t,e){return t.store(e)},n.js=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},n.Hs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},n.prototype.Xs=function(t){return Object(e["b"])(this,void 0,void 0,(function(){var n,r=this;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return this.db?[3,2]:(p("SimpleDb","Opening database:",this.name),n=this,[4,new Promise((function(e,n){var i=indexedDB.open(r.name,r.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){n(new hr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var r=e.target.error;"VersionError"===r.name?n(new _(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new hr(t,r))},i.onupgradeneeded=function(t){p("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;r.Ws.createOrUpgrade(e,i.transaction,t.oldVersion,r.version).next((function(){p("SimpleDb","Database upgrade to version "+r.version+" complete")}))}}))]);case 1:n.db=e.sent(),e.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return r.Zs(t)}),this.db)]}}))}))},n.prototype.ti=function(t){this.Zs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},n.prototype.runTransaction=function(t,n,r,i){return Object(e["b"])(this,void 0,void 0,(function(){var o,s,u,a,c;return Object(e["d"])(this,(function(h){switch(h.label){case 0:o="readonly"===n,s=0,u=function(){var n,u,c,h,f;return Object(e["d"])(this,(function(e){switch(e.label){case 0:++s,e.label=1;case 1:return e.trys.push([1,4,,5]),[4,a.Xs(t)];case 2:return a.db=e.sent(),n=lr.open(a.db,t,o?"readonly":"readwrite",r),u=i(n).catch((function(t){return n.abort(t),Jn.reject(t)})).Ln(),c={},u.catch((function(){})),[4,n.ei];case 3:return[2,(c.value=(e.sent(),u),c)];case 4:return h=e.sent(),f="FirebaseError"!==h.name&&s<3,p("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),a.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},a=this,h.label=1;case 1:return[5,u()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},n.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},n}(),cr=function(){function t(t){this.ni=t,this.si=!1,this.ii=null}return Object.defineProperty(t.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.si=!0},t.prototype.oi=function(t){this.ii=t},t.prototype.delete=function(){return dr(this.ni.delete())},t}(),hr=function(t){function n(e,n){var r=this;return(r=t.call(this,w.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(e["c"])(n,t),n}(_);function fr(t){return"IndexedDbTransactionError"===t.name}var lr=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ci=new Zn,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){e.error?n.ci.reject(new hr(t,e.error)):n.ci.resolve()},this.transaction.onerror=function(e){var r=yr(e.target.error);n.ci.reject(new hr(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new hr(n,e)}},Object.defineProperty(t.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(p("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new pr(e)},t}(),pr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),dr(n)},t.prototype.add=function(t){return p("SimpleDb","ADD",this.store.name,t,t),dr(this.store.add(t))},t.prototype.get=function(t){var e=this;return dr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),p("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return p("SimpleDb","DELETE",this.store.name,t),dr(this.store.delete(t))},t.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),dr(this.store.count())},t.prototype.ui=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ai(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.hi=function(t,e){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.li=!1;var r=this.cursor(n);return this.ai(r,(function(t,e,n){return n.delete()}))},t.prototype._i=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ai(r,e)},t.prototype.fi=function(t){var e=this.cursor({});return new Jn((function(n,r){e.onerror=function(t){var e=yr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.ai=function(t,e){var n=[];return new Jn((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new cr(i),s=e(i.primaryKey,i.value,o);if(s instanceof Jn){var u=s.catch((function(t){return o.done(),Jn.reject(t)}));n.push(u)}o.On?r():null===o.ri?i.continue():i.continue(o.ri)}else r()}})).next((function(){return Jn.qn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function dr(t){return new Jn((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=yr(t.target.error);n(e)}}))}var vr=!1;function yr(t){var e=ar.js(Object(o["g"])());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new _("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return vr||(vr=!0,setTimeout((function(){throw r}),0)),r}}return t}function gr(){return"undefined"!=typeof window?window:null}function mr(){return"undefined"!=typeof document?document:null}var br=function(){function t(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new Zn,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch((function(t){}))}return t.Ii=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.mi=setTimeout((function(){return e.Ai()}),t)},t.prototype.Ks=function(){return this.Ai()},t.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new _(w.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Ai=function(){var t=this;this.di.Ri((function(){return null!==t.mi?(t.clearTimeout(),t.op().then((function(e){return t.Ti.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},t}(),wr=function(){function t(){var t=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new ur(this,"async_queue_retry"),this.Di=function(){var e=mr();e&&p("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Si.Qs()};var e=mr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Di)}return Object.defineProperty(t.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),t.prototype.Ri=function(t){this.enqueue(t)},t.prototype.Ni=function(t){this.xi(),this.Fi(t)},t.prototype.Oi=function(){if(!this.yi){this.yi=!0;var t=mr();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di)}},t.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise((function(t){})):this.Fi(t)},t.prototype.Mi=function(t){var e=this;this.Ri((function(){return e.gi.push(t),e.ki()}))},t.prototype.ki=function(){return Object(e["b"])(this,void 0,void 0,(function(){var t,n=this;return Object(e["d"])(this,(function(e){switch(e.label){case 0:if(0===this.gi.length)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return e.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!fr(t=e.sent()))throw t;return p("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gi.length>0&&this.Si.Bs((function(){return n.ki()})),e.label=5;case 5:return[2]}}))}))},t.prototype.Fi=function(t){var e=this,n=this.Pi.then((function(){return e.vi=!0,t().catch((function(t){throw e.pi=t,e.vi=!1,d("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.vi=!1,t}))}));return this.Pi=n,n},t.prototype.Us=function(t,e,n){var r=this;this.xi(),this.bi.indexOf(t)>-1&&(e=0);var i=br.Ii(this,t,e,n,(function(t){return r.$i(t)}));return this.Vi.push(i),i},t.prototype.xi=function(){this.pi&&g()},t.prototype.Li=function(){},t.prototype.Bi=function(){return Object(e["b"])(this,void 0,void 0,(function(){var t;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,t=this.Pi];case 1:e.sent(),e.label=2;case 2:if(t!==this.Pi)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},t.prototype.Ui=function(t){var e=this;return this.Bi().then((function(){e.Vi.sort((function(t,e){return t.wi-e.wi}));for(var n=0,r=e.Vi;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ns===t)break}return e.Bi()}))},t.prototype.Qi=function(t){this.bi.push(t)},t.prototype.$i=function(t){var e=this.Vi.indexOf(t);this.Vi.splice(e,1)},t}();function _r(t,e){if(d("AsyncQueue",e+": "+t),fr(t))return new _(w.UNAVAILABLE,e+": "+t);throw t}function Ir(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=S(n,i);return 0===s?S(r,o):s}var Er=function(){function t(t){this.Ki=t,this.buffer=new rt(Ir),this.Wi=0}return t.prototype.ji=function(){return++this.Wi},t.prototype.Gi=function(t){var e=[t,this.ji()];if(this.buffer.size<this.Ki)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ir(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Or={zi:!1,Hi:0,Ji:0,Yi:0},Tr=function(){function t(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}return t.er=function(e){return new t(e,t.nr,t.sr)},t}();Tr.nr=10,Tr.sr=1e3,Tr.ir=new Tr(41943040,Tr.nr,Tr.sr),Tr.rr=new Tr(-1,0,0);var jr=function(){function t(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}return t.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},t.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(t.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),t.prototype.hr=function(t){var n=this,r=this.ur?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ar=this.di.Us("lru_garbage_collection",r,(function(){return Object(e["b"])(n,void 0,void 0,(function(){var n;return Object(e["d"])(this,(function(e){switch(e.label){case 0:this.ar=null,this.ur=!0,e.label=1;case 1:return e.trys.push([1,3,,7]),[4,t._r(this.cr)];case 2:return e.sent(),[3,7];case 3:return fr(n=e.sent())?(p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n),[3,6]):[3,4];case 4:return[4,Zi(n)];case 5:e.sent(),e.label=6;case 6:return[3,7];case 7:return[4,this.hr(t)];case 8:return e.sent(),[2]}}))}))}))},t}(),Ar=function(){function t(t,e){this.dr=t,this.params=e}return t.prototype.wr=function(t,e){return this.dr.Er(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Tr=function(t,e){var n=this;if(0===e)return Jn.resolve(sr.Ds);var r=new Er(e);return this.dr.Ue(t,(function(t){return r.Gi(t.sequenceNumber)})).next((function(){return n.dr.Ir(t,(function(t){return r.Gi(t)}))})).next((function(){return r.maxValue}))},t.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},t.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},t.prototype.Rr=function(t,e){var n=this;return-1===this.params.Xi?(p("LruGarbageCollector","Garbage collection skipped; disabled"),Jn.resolve(Or)):this.Pr(t).next((function(r){return r<n.params.Xi?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Xi),Or):n.gr(t,e)}))},t.prototype.Pr=function(t){return this.dr.Pr(t)},t.prototype.gr=function(t,e){var n,r,o,s,u,a,c,h=this,f=Date.now();return this.wr(t,this.params.Zi).next((function(e){return e>h.params.tr?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.tr+" from "+e),r=h.params.tr):r=e,s=Date.now(),h.Tr(t,r)})).next((function(r){return n=r,u=Date.now(),h.mr(t,n,e)})).next((function(e){return o=e,a=Date.now(),h.Ar(t,n)})).next((function(t){return c=Date.now(),l()<=i["a"].DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-f)+"ms\n\tDetermined least recently used "+r+" in "+(u-s)+"ms\n\tRemoved "+o+" targets in "+(a-u)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-f)+"ms"),Jn.resolve({zi:!0,Hi:r,Ji:o,Yi:t})}))},t}();function Nr(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Dr(e)),e=Sr(t.get(n),e);return Dr(e)}function Sr(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Dr(t){return t+"\x01\x01"}function kr(t){var e=t.length;if(m(e>=2),2===e)return m("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),R.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&g(),t.charAt(s+1)){case"\x01":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:g()}o=s+2}return new R(r)}var xr=function(t){this.yr=t};function Cr(t,e){if(e.document)return function(t,e,n){var r=ce(t,e.name),i=oe(e.updateTime),o=new cn({mapValue:{fields:e.fields}});return new pn(r,i,o,{hasCommittedMutations:!!n})}(t.yr,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=M.ct(e.noDocument.path),r=Mr(e.noDocument.readTime);return new dn(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=M.ct(e.unknownDocument.path),o=Mr(e.unknownDocument.version);return new vn(i,o)}return g()}function Pr(t,e,n){var r=Rr(n),i=e.key.path.q().H();if(e instanceof pn){var o=function(t,e){return{name:ae(t,e.key),fields:e.En().mapValue.fields,updateTime:ne(t,e.version.M())}}(t.yr,e),s=e.hasCommittedMutations;return new fi(null,null,o,s,r,i)}if(e instanceof dn){var u=e.key.path.H(),a=Vr(e.version),c=e.hasCommittedMutations;return new fi(null,new ci(u,a),null,c,r,i)}if(e instanceof vn){var h=e.key.path.H(),f=Vr(e.version);return new fi(new hi(h,f),null,null,!0,r,i)}return g()}function Rr(t){var e=t.M();return[e.seconds,e.nanoseconds]}function Lr(t){var e=new x(t[0],t[1]);return C.N(e)}function Vr(t){var e=t.M();return new ii(e.seconds,e.nanoseconds)}function Mr(t){var e=new x(t.seconds,t.nanoseconds);return C.N(e)}function Ur(t,e){var n=(e.baseMutations||[]).map((function(e){return ye(t.yr,e)})),r=e.mutations.map((function(e){return ye(t.yr,e)})),i=x.fromMillis(e.localWriteTimeMs);return new Yn(e.batchId,i,n,r)}function qr(t){var e,n,r=Mr(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Mr(t.lastLimboFreeSnapshotVersion):C.min();return void 0!==t.query.documents?(m(1===(n=t.query).documents.length),e=Tn(mn(fe(n.documents[0])))):e=function(t){return Tn(be(t))}(t.query),new X(e,t.targetId,0,t.lastListenSequenceNumber,r,i,H.fromBase64String(t.resumeToken))}function Fr(t,e){var n,r=Vr(e.ft),i=Vr(e.lastLimboFreeSnapshotVersion);n=W(e.target)?ge(t.yr,e.target):me(t.yr,e.target);var o=e.resumeToken.toBase64();return new pi(e.targetId,G(e.target),r,o,e.sequenceNumber,i,n)}function zr(t){var e=be({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?jn(e,e.limit,"L"):e}var Br=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Vr=r,this.pr={}}return t.vr=function(e,n,r,i){return m(""!==e.uid),new t(e.u()?e.uid:"",n,r,i)},t.prototype.br=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wr(t)._i({index:ui.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Sr=function(t,e,n,r){var i=this,o=Hr(t),s=Wr(t);return s.add({}).next((function(u){m("number"==typeof u);for(var a=new Yn(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return ve(t.yr,e)})),i=n.mutations.map((function(e){return ve(t.yr,e)}));return new ui(e,n.batchId,n.gn.toMillis(),r,i)}(i.serializer,i.userId,a),h=[],f=new rt((function(t,e){return S(t.J(),e.J())})),l=0,p=r;l<p.length;l++){var d=p[l],v=ai.key(i.userId,d.key.path,u);f=f.add(d.key.path.q()),h.push(s.put(c)),h.push(o.put(v,ai.PLACEHOLDER))}return f.forEach((function(e){h.push(i.os.Dr(t,e))})),t.es((function(){i.pr[u]=a.keys()})),Jn.qn(h).next((function(){return a}))}))},t.prototype.Cr=function(t,e){var n=this;return Wr(t).get(e).next((function(t){return t?(m(t.userId===n.userId),Ur(n.serializer,t)):null}))},t.prototype.Nr=function(t,e){var n=this;return this.pr[e]?Jn.resolve(this.pr[e]):this.Cr(t,e).next((function(t){if(t){var r=t.keys();return n.pr[e]=r,r}return null}))},t.prototype.Fr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Wr(t)._i({index:ui.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(m(e.batchId>=r),o=Ur(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Or=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Wr(t)._i({index:ui.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Mr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wr(t).ui(ui.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ur(e.serializer,t)}))}))},t.prototype.us=function(t,e){var n=this,r=ai.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Hr(t)._i({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=kr(a);if(u===n.userId&&e.path.isEqual(h))return Wr(t).get(c).next((function(t){if(!t)throw g();m(t.userId===n.userId),o.push(Ur(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.ds=function(t,e){var n=this,r=new rt(S),i=[];return e.forEach((function(e){var o=ai.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Hr(t)._i({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=kr(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Jn.qn(i).next((function(){return n.kr(t,r)}))},t.prototype.Rs=function(t,e){var n=this,r=e.path,i=r.length+1,o=ai.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new rt(S);return Hr(t)._i({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=kr(a);s===n.userId&&r.j(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.kr(t,u)}))},t.prototype.kr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Wr(t).get(e).next((function(t){if(null===t)throw g();m(t.userId===n.userId),r.push(Ur(n.serializer,t))})))})),Jn.qn(i).next((function(){return r}))},t.prototype.$r=function(t,e){var n=this;return Kr(t.Lr,this.userId,e).next((function(r){return t.es((function(){n.Br(e.batchId)})),Jn.forEach(r,(function(e){return n.Vr.qr(t,e)}))}))},t.prototype.Br=function(t){delete this.pr[t]},t.prototype.Ur=function(t){var e=this;return this.br(t).next((function(n){if(!n)return Jn.resolve();var r=IDBKeyRange.lowerBound(ai.prefixForUser(e.userId)),i=[];return Hr(t)._i({range:r},(function(t,n,r){if(t[0]===e.userId){var o=kr(t[1]);i.push(o)}else r.done()})).next((function(){m(0===i.length)}))}))},t.prototype.Qr=function(t,e){return Gr(t,this.userId,e)},t.prototype.Kr=function(t){var e=this;return Yr(t).get(this.userId).next((function(t){return t||new si(e.userId,-1,"")}))},t}();function Gr(t,e,n){var r=ai.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Hr(t)._i({range:o,li:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Kr(t,e,n){var r=t.store(ui.store),i=t.store(ai.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r._i({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){m(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=ai.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Jn.qn(o).next((function(){return c}))}function Wr(t){return Pi.Ys(t,ui.store)}function Hr(t){return Pi.Ys(t,ai.store)}function Yr(t){return Pi.Ys(t,si.store)}var Qr=function(){function t(t,e){this.serializer=t,this.os=e}return t.prototype.jn=function(t,e,n){return $r(t).put(Zr(e),n)},t.prototype.Hn=function(t,e){var n=$r(t),r=Zr(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Wr(t,r)}))},t.prototype.Jn=function(t,e){var n=this;return $r(t).get(Zr(e)).next((function(t){return n.jr(t)}))},t.prototype.Gr=function(t,e){var n=this;return $r(t).get(Zr(e)).next((function(t){var e=n.jr(t);return e?{zn:e,size:ti(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ut();return this.zr(t,e,(function(t,e){var i=n.jr(e);r=r.Tt(t,i)})).next((function(){return r}))},t.prototype.Hr=function(t,e){var n=this,r=ut(),i=new tt(M.$);return this.zr(t,e,(function(t,e){var o=n.jr(e);o?(r=r.Tt(t,o),i=i.Tt(t,ti(e))):(r=r.Tt(t,null),i=i.Tt(t,0))})).next((function(){return{Jr:r,Yr:i}}))},t.prototype.zr=function(t,e,n){if(e.W())return Jn.resolve();var r=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),i=e.yt(),o=i.Ct();return $r(t)._i({range:r},(function(t,e,r){for(var s=M.ct(t);o&&M.$(o,s)<0;)n(o,null),o=i.Ct();o&&o.isEqual(s)&&(n(o,e),o=i.Nt()?i.Ct():null),o?r.oi(o.path.H()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Nt()?i.Ct():null}))},t.prototype.ws=function(t,e,n){var r=this,i=ct(),o=e.path.length+1,s={};if(n.isEqual(C.min())){var u=e.path.H();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.H(),c=Rr(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=fi.collectionReadTimeIndex}return $r(t)._i(s,(function(t,n,s){if(t.length===o){var u=Cr(r.serializer,n);e.path.j(u.key.path)?u instanceof pn&&Dn(e,u)&&(i=i.Tt(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.Xr=function(t){return new Xr(this,!!t&&t.Zr)},t.prototype.eo=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Jr(t).get(li.key).next((function(t){return m(!!t),t}))},t.prototype.Wr=function(t,e){return Jr(t).put(li.key,e)},t.prototype.jr=function(t){if(t){var e=Cr(this.serializer,t);return e instanceof dn&&e.version.isEqual(C.min())?null:e}return null},t}(),Xr=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).no=e,r.Zr=n,r.so=new Xn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(e["c"])(n,t),n.prototype.Zn=function(t){var e=this,n=[],r=0,i=new rt((function(t,e){return S(t.J(),e.J())}));return this.Qn.forEach((function(o,s){var u=e.so.get(o);if(s.zn){var a=Pr(e.no.serializer,s.zn,e.Wn(o));i=i.add(o.path.q());var c=ti(a);r+=c-u,n.push(e.no.jn(t,o,a))}else if(r-=u,e.Zr){var h=Pr(e.no.serializer,new dn(o,C.min()),e.Wn(o));n.push(e.no.jn(t,o,h))}else n.push(e.no.Hn(t,o))})),i.forEach((function(r){n.push(e.no.os.Dr(t,r))})),n.push(this.no.updateMetadata(t,r)),Jn.qn(n)},n.prototype.Yn=function(t,e){var n=this;return this.no.Gr(t,e).next((function(t){return null===t?(n.so.set(e,0),null):(n.so.set(e,t.size),t.zn)}))},n.prototype.Xn=function(t,e){var n=this;return this.no.Hr(t,e).next((function(t){var e=t.Jr;return t.Yr.forEach((function(t,e){n.so.set(t,e)})),e}))},n}($n);function Jr(t){return Pi.Ys(t,li.store)}function $r(t){return Pi.Ys(t,fi.store)}function Zr(t){return t.path.H()}function ti(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g();e=t.noDocument}return JSON.stringify(e).length}var ei=function(){function t(){this.io=new ni}return t.prototype.Dr=function(t,e){return this.io.add(e),Jn.resolve()},t.prototype.As=function(t,e){return Jn.resolve(this.io.getEntries(e))},t}(),ni=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new rt(R.$),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.K(),n=t.q(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new rt(R.$)).H()},t}(),ri=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;m(n<r&&n>=0&&r<=11);var o=new lr("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(oi.store)}(t),function(t){t.createObjectStore(si.store,{keyPath:si.keyPath}),t.createObjectStore(ui.store,{keyPath:ui.keyPath,autoIncrement:!0}).createIndex(ui.userMutationsIndex,ui.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ai.store)}(t),gi(t),function(t){t.createObjectStore(fi.store)}(t));var s=Jn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(di.store),t.deleteObjectStore(pi.store),t.deleteObjectStore(vi.store)}(t),gi(t)),s=s.next((function(){return function(t){var e=t.store(vi.store),n=new vi(0,0,C.min().M(),0);return e.put(vi.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ui.store).ui().next((function(n){t.deleteObjectStore(ui.store),t.createObjectStore(ui.store,{keyPath:ui.keyPath,autoIncrement:!0}).createIndex(ui.userMutationsIndex,ui.userMutationsKeyPath,{unique:!0});var r=e.store(ui.store),i=n.map((function(t){return r.put(t)}));return Jn.qn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(mi.store,{keyPath:mi.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(li.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(fi.store);e.createIndex(fi.readTimeIndex,fi.readTimeIndexPath,{unique:!1}),e.createIndex(fi.collectionReadTimeIndex,fi.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(bi.store,{keyPath:bi.keyPath})}(t),function(t){t.createObjectStore(wi.store,{keyPath:wi.keyPath})}(t)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(fi.store)._i((function(t,n){e+=ti(n)})).next((function(){var n=new li(e);return t.store(li.store).put(li.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(si.store),r=t.store(ui.store);return n.ui().next((function(n){return Jn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ui(ui.userMutationsIndex,i).next((function(r){return Jn.forEach(r,(function(r){m(r.userId===n.userId);var i=Ur(e.serializer,r);return Kr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(di.store),n=t.store(fi.store);return t.store(vi.store).get(vi.key).next((function(t){var r=[];return n._i((function(n,i){var o=new R(n),s=function(t){return[0,Nr(t)]}(o);r.push(e.get(s).next((function(n){return n?Jn.resolve():function(n){return e.put(new di(0,Nr(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Jn.qn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(yi.store,{keyPath:yi.keyPath});var n=e.store(yi.store),r=new ni,i=function(t){if(r.add(t)){var e=t.K(),i=t.q();return n.put({collectionId:e,parent:Nr(i)})}};return e.store(fi.store)._i({li:!0},(function(t,e){var n=new R(t);return i(n.q())})).next((function(){return e.store(ai.store)._i({li:!0},(function(t,e){t[0];var n=t[1],r=(t[2],kr(n));return i(r.q())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(pi.store);return n._i((function(t,r){var i=qr(r),o=Fr(e.serializer,i);return n.put(o)}))},t}(),ii=function(t,e){this.seconds=t,this.nanoseconds=e},oi=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};oi.store="owner",oi.key="owner";var si=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};si.store="mutationQueues",si.keyPath="userId";var ui=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ui.store="mutations",ui.keyPath="batchId",ui.userMutationsIndex="userMutationsIndex",ui.userMutationsKeyPath=["userId","batchId"];var ai=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Nr(e)]},t.key=function(t,e,n){return[t,Nr(e),n]},t}();ai.store="documentMutations",ai.PLACEHOLDER=new ai;var ci=function(t,e){this.path=t,this.readTime=e},hi=function(t,e){this.path=t,this.version=e},fi=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};fi.store="remoteDocuments",fi.readTimeIndex="readTimeIndex",fi.readTimeIndexPath="readTime",fi.collectionReadTimeIndex="collectionReadTimeIndex",fi.collectionReadTimeIndexPath=["parentPath","readTime"];var li=function(t){this.byteSize=t};li.store="remoteDocumentGlobal",li.key="remoteDocumentGlobalKey";var pi=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};pi.store="targets",pi.keyPath="targetId",pi.queryTargetsIndexName="queryTargetsIndex",pi.queryTargetsKeyPath=["canonicalId","targetId"];var di=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};di.store="targetDocuments",di.keyPath=["targetId","path"],di.documentTargetsIndex="documentTargetsIndex",di.documentTargetsKeyPath=["path","targetId"];var vi=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};vi.key="targetGlobalKey",vi.store="targetGlobal";var yi=function(t,e){this.collectionId=t,this.parent=e};function gi(t){t.createObjectStore(di.store,{keyPath:di.keyPath}).createIndex(di.documentTargetsIndex,di.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(pi.store,{keyPath:pi.keyPath}).createIndex(pi.queryTargetsIndexName,pi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(vi.store)}yi.store="collectionParents",yi.keyPath=["collectionId","parent"];var mi=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};mi.store="clientMetadata",mi.keyPath="clientId";var bi=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};bi.store="bundles",bi.keyPath="bundleId";var wi=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};wi.store="namedQueries",wi.keyPath="name";var _i=Object(e["g"])(Object(e["g"])(Object(e["g"])(Object(e["g"])([si.store,ui.store,ai.store,fi.store,pi.store,oi.store,vi.store,di.store],[mi.store]),[li.store]),[yi.store]),[bi.store,wi.store]),Ii=function(){function t(t){this.serializer=t}return t.prototype.ro=function(t,e){return Ei(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Mr(e.createTime),version:e.version};var e}))},t.prototype.oo=function(t,e){return Ei(t).put({bundleId:(n=e).id,createTime:Vr(oe(n.createTime)),version:n.version});var n},t.prototype.co=function(t,e){return Oi(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:zr(e.bundledQuery),readTime:Mr(e.readTime)};var e}))},t.prototype.uo=function(t,e){return Oi(t).put(function(t){return{name:t.name,readTime:Vr(oe(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ei(t){return Pi.Ys(t,bi.store)}function Oi(t){return Pi.Ys(t,wi.store)}var Ti=function(){function t(){this.ao=new ni}return t.prototype.Dr=function(t,e){var n=this;if(!this.ao.has(e)){var r=e.K(),i=e.q();t.es((function(){n.ao.add(e)}));var o={collectionId:r,parent:Nr(i)};return ji(t).put(o)}return Jn.resolve()},t.prototype.As=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[k(e),""],!1,!0);return ji(t).ui(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(kr(o.parent))}return n}))},t}();function ji(t){return Pi.Ys(t,yi.store)}var Ai=function(){function t(t){this.ho=t}return t.prototype.next=function(){return this.ho+=2,this.ho},t.lo=function(){return new t(0)},t._o=function(){return new t(-1)},t}(),Ni=function(){function t(t,e){this.Vr=t,this.serializer=e}return t.prototype.fo=function(t){var e=this;return this.wo(t).next((function(n){var r=new Ai(n.highestTargetId);return n.highestTargetId=r.next(),e.Eo(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.To=function(t){return this.wo(t).next((function(t){return C.N(new x(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Io=function(t){return this.wo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.mo=function(t,e,n){var r=this;return this.wo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Eo(t,i)}))},t.prototype.Ao=function(t,e){var n=this;return this.Ro(t,e).next((function(){return n.wo(t).next((function(r){return r.targetCount+=1,n.Po(e,r),n.Eo(t,r)}))}))},t.prototype.yo=function(t,e){return this.Ro(t,e)},t.prototype.Vo=function(t,e){var n=this;return this.po(t,e.targetId).next((function(){return Si(t).delete(e.targetId)})).next((function(){return n.wo(t)})).next((function(e){return m(e.targetCount>0),e.targetCount-=1,n.Eo(t,e)}))},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return Si(t)._i((function(s,u){var a=qr(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Vo(t,a)))})).next((function(){return Jn.qn(o)})).next((function(){return i}))},t.prototype.Ue=function(t,e){return Si(t)._i((function(t,n){var r=qr(n);e(r)}))},t.prototype.wo=function(t){return Di(t).get(vi.key).next((function(t){return m(null!==t),t}))},t.prototype.Eo=function(t,e){return Di(t).put(vi.key,e)},t.prototype.Ro=function(t,e){return Si(t).put(Fr(this.serializer,e))},t.prototype.Po=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.vo=function(t){return this.wo(t).next((function(t){return t.targetCount}))},t.prototype.bo=function(t,e){var n=G(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Si(t)._i({range:r,index:pi.queryTargetsIndexName},(function(t,n,r){var o=qr(n);K(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.So=function(t,e,n){var r=this,i=[],o=ki(t);return e.forEach((function(e){var s=Nr(e.path);i.push(o.put(new di(n,s))),i.push(r.Vr.Do(t,n,e))})),Jn.qn(i)},t.prototype.Co=function(t,e,n){var r=this,i=ki(t);return Jn.forEach(e,(function(e){var o=Nr(e.path);return Jn.qn([i.delete([n,o]),r.Vr.No(t,n,e)])}))},t.prototype.po=function(t,e){var n=ki(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ki(t),i=lt();return r._i({range:n,li:!0},(function(t,e,n){var r=kr(t[1]),o=new M(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Qr=function(t,e){var n=Nr(e.path),r=IDBKeyRange.bound([n],[k(n)],!1,!0),i=0;return ki(t)._i({index:di.documentTargetsIndex,li:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ze=function(t,e){return Si(t).get(e).next((function(t){return t?qr(t):null}))},t}();function Si(t){return Pi.Ys(t,pi.store)}function Di(t){return Pi.Ys(t,vi.store)}function ki(t){return Pi.Ys(t,di.store)}var xi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ci=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).Lr=e,r.Fo=n,r}return Object(e["c"])(n,t),n}(rr),Pi=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Cs=o,this.window=s,this.document=u,this.Oo=c,this.Mo=h,this.ko=null,this.$o=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Lo=null,this.inForeground=!1,this.Bo=null,this.qo=null,this.Uo=Number.NEGATIVE_INFINITY,this.Qo=function(t){return Promise.resolve()},!t.Gs())throw new _(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Vr=new Vi(this,i),this.Ko=n+"main",this.serializer=new xr(a),this.Wo=new ar(this.Ko,11,new ri(this.serializer)),this.jo=new Ni(this.Vr,this.serializer),this.os=new Ti,this.ss=function(t,e){return new Qr(t,e)}(this.serializer,this.os),this.Go=new Ii(this.serializer),this.window&&this.window.localStorage?this.zo=this.window.localStorage:(this.zo=null,!1===h&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ys=function(t,e){if(t instanceof Ci)return ar.Ys(t.Lr,e);throw g()},t.prototype.start=function(){var t=this;return this.Ho().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new _(w.FAILED_PRECONDITION,xi);return t.Jo(),t.Yo(),t.Xo(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.jo.Io(e)}))})).then((function(e){t.ko=new sr(e,t.Oo)})).then((function(){t.$o=!0})).catch((function(e){return t.Wo&&t.Wo.close(),Promise.reject(e)}))},t.prototype.Zo=function(t){var n=this;return this.Qo=function(r){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){return this.lr?[2,t(r)]:[2]}))}))},t(this.isPrimary)},t.prototype.tc=function(t){var n=this;this.Wo.ti((function(r){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return null===r.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.ec=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri((function(){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(t){switch(t.label){case 0:return this.lr?[4,this.Ho()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Ho=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Li(e).put(new mi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.nc(e).next((function(e){e||(t.isPrimary=!1,t.Cs.Mi((function(){return t.Qo(!1)})))}))})).next((function(){return t.sc(e)})).next((function(n){return t.isPrimary&&!n?t.ic(e).next((function(){return!1})):!!n&&t.rc(e).next((function(){return!0}))}))})).catch((function(e){if(fr(e))return p("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Cs.Mi((function(){return t.Qo(e)})),t.isPrimary=e}))},t.prototype.nc=function(t){var e=this;return Ri(t).get(oi.key).next((function(t){return Jn.resolve(e.oc(t))}))},t.prototype.cc=function(t){return Li(t).delete(this.clientId)},t.prototype.uc=function(){return Object(e["b"])(this,void 0,void 0,(function(){var n,r,i,o,s=this;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return!this.isPrimary||this.ac(this.Uo,18e5)?[3,2]:(this.Uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Ys(e,mi.store);return n.ui().next((function(t){var e=s.hc(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Jn.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(n=e.sent(),this.zo)for(r=0,i=n;r<i.length;r++)o=i[r],this.zo.removeItem(this.lc(o.clientId));e.label=2;case 2:return[2]}}))}))},t.prototype.Xo=function(){var t=this;this.qo=this.Cs.Us("client_metadata_refresh",4e3,(function(){return t.Ho().then((function(){return t.uc()})).then((function(){return t.Xo()}))}))},t.prototype.oc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sc=function(t){var e=this;return this.Mo?Jn.resolve(!0):Ri(t).get(oi.key).next((function(n){if(null!==n&&e.ac(n.leaseTimestampMs,5e3)&&!e._c(n.ownerId)){if(e.oc(n)&&e.networkEnabled)return!0;if(!e.oc(n)){if(!n.allowTabSynchronization)throw new _(w.FAILED_PRECONDITION,xi);return!1}}return!(!e.networkEnabled||!e.inForeground)||Li(t).ui().next((function(t){return void 0===e.hc(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&p("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.fc=function(){return Object(e["b"])(this,void 0,void 0,(function(){var t=this;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return this.$o=!1,this.dc(),this.qo&&(this.qo.cancel(),this.qo=null),this.wc(),this.Ec(),[4,this.Wo.runTransaction("shutdown","readwrite",[oi.store,mi.store],(function(e){var n=new Ci(e,sr.Ds);return t.ic(n).next((function(){return t.cc(n)}))}))];case 1:return e.sent(),this.Wo.close(),this.Tc(),[2]}}))}))},t.prototype.hc=function(t,e){var n=this;return t.filter((function(t){return n.ac(t.updateTimeMs,e)&&!n._c(t.clientId)}))},t.prototype.Ic=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Li(e).ui().next((function(e){return t.hc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return Br.vr(t,this.serializer,this.os,this.Vr)},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.Pc=function(){return this.os},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r=this;p("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Wo.runTransaction(t,o,_i,(function(o){return i=new Ci(o,r.ko?r.ko.next():sr.Ds),"readwrite-primary"===e?r.nc(i).next((function(t){return!!t||r.sc(i)})).next((function(e){if(!e)throw d("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Cs.Mi((function(){return r.Qo(!1)})),new _(w.FAILED_PRECONDITION,nr);return n(i)})).next((function(t){return r.rc(i).next((function(){return t}))})):r.yc(i).next((function(){return n(i)}))})).then((function(t){return i.ns(),t}))},t.prototype.yc=function(t){var e=this;return Ri(t).get(oi.key).next((function(t){if(null!==t&&e.ac(t.leaseTimestampMs,5e3)&&!e._c(t.ownerId)&&!e.oc(t)&&!(e.Mo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new _(w.FAILED_PRECONDITION,xi)}))},t.prototype.rc=function(t){var e=new oi(this.clientId,this.allowTabSynchronization,Date.now());return Ri(t).put(oi.key,e)},t.Gs=function(){return ar.Gs()},t.prototype.ic=function(t){var e=this,n=Ri(t);return n.get(oi.key).next((function(t){return e.oc(t)?(p("IndexedDbPersistence","Releasing primary lease."),n.delete(oi.key)):Jn.resolve()}))},t.prototype.ac=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(d("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Jo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bo=function(){t.Cs.Ri((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ho()}))},this.document.addEventListener("visibilitychange",this.Bo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.wc=function(){this.Bo&&(this.document.removeEventListener("visibilitychange",this.Bo),this.Bo=null)},t.prototype.Yo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Lo=function(){e.dc(),e.Cs.Ri((function(){return e.fc()}))},this.window.addEventListener("unload",this.Lo))},t.prototype.Ec=function(){this.Lo&&(this.window.removeEventListener("unload",this.Lo),this.Lo=null)},t.prototype._c=function(t){var e;try{var n=null!==(null===(e=this.zo)||void 0===e?void 0:e.getItem(this.lc(t)));return p("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return d("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.dc=function(){if(this.zo)try{this.zo.setItem(this.lc(this.clientId),String(Date.now()))}catch(t){d("Failed to set zombie client id.",t)}},t.prototype.Tc=function(){if(this.zo)try{this.zo.removeItem(this.lc(this.clientId))}catch(t){}},t.prototype.lc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ri(t){return Pi.Ys(t,oi.store)}function Li(t){return Pi.Ys(t,mi.store)}var Vi=function(){function t(t,e){this.db=t,this.cr=new Ar(this,e)}return t.prototype.Er=function(t){var e=this.Vc(t);return this.db.Ac().vo(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Vc=function(t){var e=0;return this.Ir(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ue=function(t,e){return this.db.Ac().Ue(t,e)},t.prototype.Ir=function(t,e){return this.vc(t,(function(t,n){return e(n)}))},t.prototype.Do=function(t,e,n){return Mi(t,n)},t.prototype.No=function(t,e,n){return Mi(t,n)},t.prototype.mr=function(t,e,n){return this.db.Ac().mr(t,e,n)},t.prototype.qr=function(t,e){return Mi(t,e)},t.prototype.bc=function(t,e){return function(t,e){var n=!1;return Yr(t).fi((function(r){return Gr(t,r,e).next((function(t){return t&&(n=!0),Jn.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Ar=function(t,e){var n=this,r=this.db.Rc().Xr(),i=[],o=0;return this.vc(t,(function(s,u){if(u<=e){var a=n.bc(t,s).next((function(e){if(!e)return o++,r.Jn(t,s).next((function(){return r.Hn(s),ki(t).delete([0,Nr(s.path)])}))}));i.push(a)}})).next((function(){return Jn.qn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.dt(t.Fo);return this.db.Ac().yo(t,n)},t.prototype.Sc=function(t,e){return Mi(t,e)},t.prototype.vc=function(t,e){var n,r=ki(t),i=sr.Ds;return r._i({index:di.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==sr.Ds&&e(new M(kr(n)),i),i=u,n=s):i=sr.Ds})).next((function(){i!==sr.Ds&&e(new M(kr(n)),i)}))},t.prototype.Pr=function(t){return this.db.Rc().eo(t)},t}();function Mi(t,e){return ki(t).put(function(t,e){return new di(0,Nr(t.path),e)}(e,t.Fo))}function Ui(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var qi=function(){function t(t,e,n,r){this.persistence=t,this.Dc=e,this.serializer=r,this.Cc=new tt(S),this.Nc=new Xn((function(t){return G(t)}),K),this.xc=C.min(),this.rs=t.mc(n),this.Fc=t.Rc(),this.jo=t.Ac(),this.Oc=new ir(this.Fc,this.rs,this.persistence.Pc()),this.Go=t.gc(),this.Dc.Mc(this.Oc)}return t.prototype._r=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Rr(n,e.Cc)}))},t}();function Fi(t,e,n,r){return new qi(t,e,n,r)}function zi(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return r=b(t),i=r.rs,o=r.Oc,[4,r.persistence.runTransaction("Handle user change","readonly",(function(t){var e;return r.rs.Mr(t).next((function(s){return e=s,i=r.persistence.mc(n),o=new ir(r.Fc,i,r.persistence.Pc()),i.Mr(t)})).next((function(n){for(var r=[],i=[],s=lt(),u=0,a=e;u<a.length;u++){var c=a[u];r.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=n;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return o._s(t,s).next((function(t){return{kc:t,$c:r,Lc:i}}))}))}))];case 1:return s=e.sent(),[2,(r.rs=i,r.Oc=o,r.Dc.Mc(r.Oc),s)]}}))}))}function Bi(t,e){var n=b(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Fc.Xr({Zr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Jn.resolve();return o.forEach((function(t){s=s.next((function(){return r.Jn(e,t)})).next((function(e){var o=e,s=n.Sn.get(t);m(null!==s),(!o||o.version.F(s)<0)&&(o=i.yn(t,o,n))&&r.jn(o,n.bn)}))})),s.next((function(){return t.rs.$r(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.rs.Ur(t)})).next((function(){return n.Oc._s(t,r)}))}))}function Gi(t){var e=b(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.jo.To(t)}))}function Ki(t,e){var n=b(t),r=e.ft,i=n.Cc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Fc.Xr({Zr:!0});i=n.Cc;var s=[];e.re.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.jo.Co(t,e.de,o).next((function(){return n.jo.So(t,e._e,o)})));var a=e.resumeToken;if(a.ht()>0){var c=u.wt(a,r).dt(t.Fo);i=i.Tt(o,c),function(t,e,n){return m(e.resumeToken.ht()>0),0===t.resumeToken.ht()||e.ft.O()-t.ft.O()>=3e8||n._e.size+n.fe.size+n.de.size>0}(u,c,e)&&s.push(n.jo.yo(t,c))}}}));var u=st();if(e.ce.forEach((function(r,i){e.ue.has(r)&&s.push(n.persistence.Vr.Sc(t,r))})),s.push(function(t,e,n,r,i){var o=lt();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var i=st();return n.forEach((function(n,o){var s=t.get(n),u=r;o instanceof dn&&o.version.isEqual(C.min())?(e.Hn(n,u),i=i.Tt(n,o)):null==s||o.version.F(s.version)>0||0===o.version.F(s.version)&&s.hasPendingWrites?(e.jn(o,u),i=i.Tt(n,o)):p("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),i}))}(t,o,e.ce,r).next((function(t){u=t}))),!r.isEqual(C.min())){var a=n.jo.To(t).next((function(e){return n.jo.mo(t,t.Fo,r)}));s.push(a)}return Jn.qn(s).next((function(){return o.apply(t)})).next((function(){return n.Oc.fs(t,u)}))})).then((function(t){return n.Cc=i,t}))}function Wi(t,e){var n=b(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.rs.Fr(t,e)}))}function Hi(t,e){var n=b(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.jo.bo(t,e).next((function(i){return i?(r=i,Jn.resolve(r)):n.jo.fo(t).next((function(i){return r=new X(e,i,0,t.Fo),n.jo.Ao(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Cc.get(t.targetId);return(null===r||t.ft.F(r.ft)>0)&&(n.Cc=n.Cc.Tt(t.targetId,t),n.Nc.set(e,t.targetId)),t}))}function Yi(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o,s,u;return Object(e["d"])(this,(function(e){switch(e.label){case 0:i=b(t),o=i.Cc.get(n),s=r?"readwrite":"readwrite-primary",e.label=1;case 1:return e.trys.push([1,4,,5]),r?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.Vr.removeTarget(t,o)}))];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:if(!fr(u=e.sent()))throw u;return p("LocalStore","Failed to update sequence numbers for target "+n+": "+u),[3,5];case 5:return i.Cc=i.Cc.remove(n),i.Nc.delete(o.target),[2]}}))}))}function Qi(t,e,n){var r=b(t),i=C.min(),o=lt();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=b(t),i=r.Nc.get(n);return void 0!==i?Jn.resolve(r.Cc.get(i)):r.jo.bo(e,n)}(r,t,Tn(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.jo.xo(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Dc.ws(t,e,n?i:C.min(),n?o:lt())})).next((function(t){return{documents:t,Bc:o}}))}))}function Xi(t,e){var n=b(t),r=b(n.jo),i=n.Cc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ze(t,e).next((function(t){return t?t.target:null}))}))}function Ji(t){var e=b(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=b(t),i=st(),o=Rr(n),s=$r(e),u=IDBKeyRange.lowerBound(o,!0);return s._i({index:fi.readTimeIndex,range:u},(function(t,e){var n=Cr(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime})).next((function(){return{qc:i,readTime:Lr(o)}}))}(e.Fc,t,e.xc)})).then((function(t){var n=t.qc,r=t.readTime;return e.xc=r,n}))}function $i(t){return Object(e["b"])(this,void 0,void 0,(function(){var n;return Object(e["d"])(this,(function(e){return[2,(n=b(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=$r(t),n=C.min();return e._i({index:fi.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Lr(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){n.xc=t}))]}))}))}function Zi(t){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){if(t.code!==w.FAILED_PRECONDITION||t.message!==nr)throw t;return p("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var to=function(){function t(t,e,n,r,i,o){this.Cs=t,this.Uc=n,this.Qc=r,this.Kc=i,this.listener=o,this.state=0,this.Wc=0,this.jc=null,this.stream=null,this.Si=new ur(t,e)}return t.prototype.Gc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.zc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Hc()},t.prototype.stop=function(){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(t){switch(t.label){case 0:return this.Gc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Jc=function(){this.state=0,this.Si.reset()},t.prototype.Yc=function(){var t=this;this.zc()&&null===this.jc&&(this.jc=this.Cs.Us(this.Uc,6e4,(function(){return t.Xc()})))},t.prototype.Zc=function(t){this.tu(),this.stream.send(t)},t.prototype.Xc=function(){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(t){return this.zc()?[2,this.close(0)]:[2]}))}))},t.prototype.tu=function(){this.jc&&(this.jc.cancel(),this.jc=null)},t.prototype.close=function(t,n){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return this.tu(),this.Si.cancel(),this.Wc++,3!==t?this.Si.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(d(n.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):n&&n.code===w.UNAUTHENTICATED&&this.Kc.m(),null!==this.stream&&(this.eu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.nu(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.eu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.su(this.Wc),n=this.Wc;this.Kc.getToken().then((function(e){t.Wc===n&&t.iu(e)}),(function(n){e((function(){var e=new _(w.UNKNOWN,"Fetching auth token failed: "+n.message);return t.ru(e)}))}))},t.prototype.iu=function(t){var e=this,n=this.su(this.Wc);this.stream=this.ou(t),this.stream.cu((function(){n((function(){return e.state=2,e.listener.cu()}))})),this.stream.nu((function(t){n((function(){return e.ru(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Hc=function(){var t=this;this.state=4,this.Si.Bs((function(){return Object(e["b"])(t,void 0,void 0,(function(){return Object(e["d"])(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.ru=function(t){return p("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.su=function(t){var e=this;return function(n){e.Cs.Ri((function(){return e.Wc===t?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),eo=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(e["c"])(n,t),n.prototype.ou=function(t){return this.Qc.uu("Listen",t)},n.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:g()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.tn?(m(void 0===e||"string"==typeof e),H.fromBase64String(e||"")):(m(void 0===e||e instanceof Uint8Array),H.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?w.UNKNOWN:Z(t.code);return new _(e,t.message||"")}(s);n=new It(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var c=ce(t,a.document.name),h=oe(a.document.updateTime),f=new cn({mapValue:{fields:a.document.fields}}),l=new pn(c,h,f,{}),p=a.targetIds||[],d=a.removedTargetIds||[];n=new wt(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=ce(t,v.document),b=v.readTime?oe(v.readTime):C.min(),I=new dn(y,b),E=v.removedTargetIds||[];n=new wt([],E,I.key,I)}else if("documentRemove"in e){e.documentRemove;var O=e.documentRemove;O.document;var T=ce(t,O.document),j=O.removedTargetIds||[];n=new wt([],j,T,null)}else{if(!("filter"in e))return g();e.filter;var A=e.filter;A.targetId;var N=A.count||0,S=new J(N),D=A.targetId;n=new _t(D,S)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return C.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?C.min():e.readTime?oe(e.readTime):C.min()}(t);return this.listener.au(e,n)},n.prototype.hu=function(t){var e={};e.database=le(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=W(r)?{documents:ge(t,r)}:{query:me(t,r)}).targetId=e.targetId,e.resumeToken.ht()>0?n.resumeToken=re(t,e.resumeToken):e.ft.F(C.min())>0&&(n.readTime=ne(t,e.ft.M())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,e._t);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.Zc(e)},n.prototype.lu=function(t){var e={};e.database=le(this.serializer),e.removeTarget=t,this.Zc(e)},n}(to),no=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s._u=!1,s}return Object(e["c"])(n,t),Object.defineProperty(n.prototype,"fu",{get:function(){return this._u},enumerable:!1,configurable:!0}),n.prototype.start=function(){this._u=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},n.prototype.eu=function(){this._u&&this.du([])},n.prototype.ou=function(t){return this.Qc.uu("Write",t)},n.prototype.onMessage=function(t){if(m(!!t.streamToken),this.lastStreamToken=t.streamToken,this._u){this.Si.reset();var e=function(t,e){return t&&t.length>0?(m(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?oe(t.updateTime):oe(e);n.isEqual(C.min())&&(n=oe(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ke(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=oe(t.commitTime);return this.listener.wu(n,e)}return m(!t.writeResults||0===t.writeResults.length),this._u=!0,this.listener.Eu()},n.prototype.Tu=function(){var t={};t.database=le(this.serializer),this.Zc(t)},n.prototype.du=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return ve(e.serializer,t)}))};this.Zc(n)},n}(to),ro=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qc=n,i.serializer=r,i.Iu=!1,i}return Object(e["c"])(n,t),n.prototype.mu=function(){if(this.Iu)throw new _(w.FAILED_PRECONDITION,"The client has already been terminated.")},n.prototype.Au=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then((function(i){return r.Qc.Au(t,e,n,i)})).catch((function(t){throw t.code===w.UNAUTHENTICATED&&r.credentials.m(),t}))},n.prototype.Ru=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then((function(i){return r.Qc.Ru(t,e,n,i)})).catch((function(t){throw t.code===w.UNAUTHENTICATED&&r.credentials.m(),t}))},n.prototype.terminate=function(){this.Iu=!1},n}((function(){})),io=function(){function t(t,e){this.di=t,this.Pu=e,this.state="Unknown",this.gu=0,this.yu=null,this.Vu=!0}return t.prototype.pu=function(){var t=this;0===this.gu&&(this.vu("Unknown"),this.yu=this.di.Us("online_state_timeout",1e4,(function(){return t.yu=null,t.bu("Backend didn't respond within 10 seconds."),t.vu("Offline"),Promise.resolve()})))},t.prototype.Su=function(t){"Online"===this.state?this.vu("Unknown"):(this.gu++,this.gu>=1&&(this.Du(),this.bu("Connection failed 1 times. Most recent error: "+t.toString()),this.vu("Offline")))},t.prototype.set=function(t){this.Du(),this.gu=0,"Online"===t&&(this.Vu=!1),this.vu(t)},t.prototype.vu=function(t){t!==this.state&&(this.state=t,this.Pu(t))},t.prototype.bu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vu?(d(e),this.Vu=!1):p("OnlineStateTracker",e)},t.prototype.Du=function(){null!==this.yu&&(this.yu.cancel(),this.yu=null)},t}(),oo=function(t,n,r,i,o){var s=this;this.Cu=t,this.Nu=n,this.di=r,this.xu={},this.Fu=[],this.Ou=new Map,this.Mu=new Set,this.ku=[],this.$u=o,this.$u.Lu((function(t){r.Ri((function(){return Object(e["b"])(s,void 0,void 0,(function(){return Object(e["d"])(this,(function(t){switch(t.label){case 0:return vo(this)?(p("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(e["b"])(this,void 0,void 0,(function(){var n;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return(n=b(t)).Mu.add(4),[4,uo(n)];case 1:return e.sent(),n.Bu.set("Unknown"),n.Mu.delete(4),[4,so(n)];case 2:return e.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Bu=new io(r,i)};function so(t){return Object(e["b"])(this,void 0,void 0,(function(){var n,r;return Object(e["d"])(this,(function(e){switch(e.label){case 0:if(!vo(t))return[3,4];n=0,r=t.ku,e.label=1;case 1:return n<r.length?[4,(0,r[n])(!0)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function uo(t){return Object(e["b"])(this,void 0,void 0,(function(){var n,r;return Object(e["d"])(this,(function(e){switch(e.label){case 0:n=0,r=t.ku,e.label=1;case 1:return n<r.length?[4,(0,r[n])(!1)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function ao(t,e){var n=b(t);n.Ou.has(e.targetId)||(n.Ou.set(e.targetId,e),po(n)?lo(n):Do(n).zc()&&ho(n,e))}function co(t,e){var n=b(t),r=Do(n);n.Ou.delete(e),r.zc()&&fo(n,e),0===n.Ou.size&&(r.zc()?r.Yc():vo(n)&&n.Bu.set("Unknown"))}function ho(t,e){t.qu.De(e.targetId),Do(t).hu(e)}function fo(t,e){t.qu.De(e),Do(t).lu(e)}function lo(t){t.qu=new Ot({Xe:function(e){return t.xu.Xe(e)},Ze:function(e){return t.Ou.get(e)||null}}),Do(t).start(),t.Bu.pu()}function po(t){return vo(t)&&!Do(t).Gc()&&t.Ou.size>0}function vo(t){return 0===b(t).Mu.size}function yo(t){t.qu=void 0}function go(t){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){return t.Ou.forEach((function(e,n){ho(t,e)})),[2]}))}))}function mo(t,n){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){return yo(t),po(t)?(t.Bu.Su(n),lo(t)):t.Bu.set("Unknown"),[2]}))}))}function bo(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o,s;return Object(e["d"])(this,(function(u){switch(u.label){case 0:if(t.Bu.set("Online"),!(n instanceof It&&2===n.state&&n.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(e["d"])(this,(function(e){switch(e.label){case 0:r=n.cause,i=0,o=n.targetIds,e.label=1;case 1:return i<o.length?(s=o[i],t.Ou.has(s)?[4,t.xu.Uu(s,r)]:[3,3]):[3,5];case 2:e.sent(),t.Ou.delete(s),t.qu.removeTarget(s),e.label=3;case 3:e.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,n)];case 2:return u.sent(),[3,5];case 3:return i=u.sent(),p("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),i),[4,wo(t,i)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(n instanceof wt?t.qu.$e(n):n instanceof _t?t.qu.je(n):t.qu.qe(n),r.isEqual(C.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,Gi(t.Cu)];case 8:return o=u.sent(),r.F(o)>=0?[4,function(t,e){var n=t.qu.He(e);return n.re.forEach((function(n,r){if(n.resumeToken.ht()>0){var i=t.Ou.get(r);i&&t.Ou.set(r,i.wt(n.resumeToken,e))}})),n.oe.forEach((function(e){var n=t.Ou.get(e);if(n){t.Ou.set(e,n.wt(H.lt,n.ft)),fo(t,e);var r=new X(n.target,e,1,n.sequenceNumber);ho(t,r)}})),t.xu.Qu(n)}(t,r)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return p("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,wo(t,s)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function wo(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i=this;return Object(e["d"])(this,(function(o){switch(o.label){case 0:if(!fr(n))throw n;return t.Mu.add(1),[4,uo(t)];case 1:return o.sent(),t.Bu.set("Offline"),r||(r=function(){return Gi(t.Cu)}),t.di.Mi((function(){return Object(e["b"])(i,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return p("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return e.sent(),t.Mu.delete(1),[4,so(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function _o(t,e){return e().catch((function(n){return wo(t,n,e)}))}function Io(t){return Object(e["b"])(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(e["d"])(this,(function(e){switch(e.label){case 0:n=b(t),r=ko(n),i=n.Fu.length>0?n.Fu[n.Fu.length-1].batchId:-1,e.label=1;case 1:if(!function(t){return vo(t)&&t.Fu.length<10}(n))return[3,7];e.label=2;case 2:return e.trys.push([2,4,,6]),[4,Wi(n.Cu,i)];case 3:return null===(o=e.sent())?(0===n.Fu.length&&r.Yc(),[3,7]):(i=o.batchId,function(t,e){t.Fu.push(e);var n=ko(t);n.zc()&&n.fu&&n.du(e.mutations)}(n,o),[3,6]);case 4:return s=e.sent(),[4,wo(n,s)];case 5:return e.sent(),[3,6];case 6:return[3,1];case 7:return Eo(n)&&Oo(n),[2]}}))}))}function Eo(t){return vo(t)&&!ko(t).Gc()&&t.Fu.length>0}function Oo(t){ko(t).start()}function To(t){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){return ko(t).Tu(),[2]}))}))}function jo(t){return Object(e["b"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(e["d"])(this,(function(e){for(n=ko(t),r=0,i=t.Fu;r<i.length;r++)o=i[r],n.du(o.mutations);return[2]}))}))}function Ao(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return i=t.Fu.shift(),o=Qn.from(i,n,r),[4,_o(t,(function(){return t.xu.Ku(o)}))];case 1:return e.sent(),[4,Io(t)];case 2:return e.sent(),[2]}}))}))}function No(t,n){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(r){switch(r.label){case 0:return n&&ko(t).fu?[4,function(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return $(i=n.code)&&i!==w.ABORTED?(r=t.Fu.shift(),ko(t).Jc(),[4,_o(t,(function(){return t.xu.Wu(r.batchId,n)}))]):[3,3];case 1:return e.sent(),[4,Io(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}(t,n)]:[3,2];case 1:r.sent(),r.label=2;case 2:return Eo(t)&&Oo(t),[2]}}))}))}function So(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return r=b(t),n?(r.Mu.delete(2),[4,so(r)]):[3,2];case 1:return e.sent(),[3,5];case 2:return n?[3,4]:(r.Mu.add(2),[4,uo(r)]);case 3:e.sent(),r.Bu.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))}function Do(t){var n=this;return t.ju||(t.ju=function(t,e,n){var r=b(t);return r.mu(),new eo(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:go.bind(null,t),nu:mo.bind(null,t),au:bo.bind(null,t)}),t.ku.push((function(r){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return r?(t.ju.Jc(),po(t)?lo(t):t.Bu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ju.stop()];case 2:e.sent(),yo(t),e.label=3;case 3:return[2]}}))}))}))),t.ju}function ko(t){var n=this;return t.Gu||(t.Gu=function(t,e,n){var r=b(t);return r.mu(),new no(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:To.bind(null,t),nu:No.bind(null,t),Eu:jo.bind(null,t),wu:Ao.bind(null,t)}),t.ku.push((function(r){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return r?(t.Gu.Jc(),[4,Io(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Gu.stop()];case 3:e.sent(),t.Fu.length>0&&(p("RemoteStore","Stopping write stream with "+t.Fu.length+" pending writes"),t.Fu=[]),e.label=4;case 4:return[2]}}))}))}))),t.Gu}var xo=function(){this.zu=void 0,this.listeners=[]},Co=function(){this.queries=new Xn((function(t){return Nn(t)}),An),this.onlineState="Unknown",this.Hu=new Set};function Po(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s,u,a,c;return Object(e["d"])(this,(function(e){switch(e.label){case 0:if(r=b(t),i=n.query,o=!1,(s=r.queries.get(i))||(o=!0,s=new xo),!o)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),u=s,[4,r.Ju(i)];case 2:return u.zu=e.sent(),[3,4];case 3:return a=e.sent(),c=_r(a,"Initialization of query '"+Sn(n.query)+"' failed"),[2,void n.onError(c)];case 4:return r.queries.set(i,s),s.listeners.push(n),n.Yu(r.onlineState),s.zu&&n.Xu(s.zu)&&Mo(r),[2]}}))}))}function Ro(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(e["d"])(this,(function(e){return r=b(t),i=n.query,o=!1,(s=r.queries.get(i))&&(u=s.listeners.indexOf(n))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),o?[2,(r.queries.delete(i),r.Zu(i))]:[2]}))}))}function Lo(t,e){for(var n=b(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Xu(s)&&(r=!0);a.zu=s}}r&&Mo(n)}function Vo(t,e,n){var r=b(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Mo(t){t.Hu.forEach((function(t){t.next()}))}var Uo=function(){function t(t,e,n){this.query=t,this.ta=e,this.ea=!1,this.na=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Xu=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new gt(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ea?this.sa(t)&&(this.ta.next(t),o=!0):this.ia(t,this.onlineState)&&(this.ra(t),o=!0),this.na=t,o},t.prototype.onError=function(t){this.ta.error(t)},t.prototype.Yu=function(t){this.onlineState=t;var e=!1;return this.na&&!this.ea&&this.ia(this.na,t)&&(this.ra(this.na),e=!0),e},t.prototype.ia=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.oa&&n||t.docs.W()&&"Offline"!==e)},t.prototype.sa=function(t){if(t.docChanges.length>0)return!0;var e=this.na&&this.na.hasPendingWrites!==t.hasPendingWrites;return!(!t.ne&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.ra=function(t){t=gt.ie(t.query,t.docs,t.ee,t.fromCache),this.ea=!0,this.ta.next(t)},t}(),qo=function(){function t(){this.ca=new rt(Fo.ua),this.aa=new rt(Fo.ha)}return t.prototype.W=function(){return this.ca.W()},t.prototype.Do=function(t,e){var n=new Fo(t,e);this.ca=this.ca.add(n),this.aa=this.aa.add(n)},t.prototype.la=function(t,e){var n=this;t.forEach((function(t){return n.Do(t,e)}))},t.prototype.No=function(t,e){this._a(new Fo(t,e))},t.prototype.fa=function(t,e){var n=this;t.forEach((function(t){return n.No(t,e)}))},t.prototype.da=function(t){var e=this,n=new M(new R([])),r=new Fo(n,t),i=new Fo(n,t+1),o=[];return this.aa.Kt([r,i],(function(t){e._a(t),o.push(t.key)})),o},t.prototype.wa=function(){var t=this;this.ca.forEach((function(e){return t._a(e)}))},t.prototype._a=function(t){this.ca=this.ca.delete(t),this.aa=this.aa.delete(t)},t.prototype.Ea=function(t){var e=new M(new R([])),n=new Fo(e,t),r=new Fo(e,t+1),i=lt();return this.aa.Kt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Qr=function(t){var e=new Fo(t,0),n=this.ca.jt(e);return null!==n&&t.isEqual(n.key)},t}(),Fo=function(){function t(t,e){this.key=t,this.Ta=e}return t.ua=function(t,e){return M.$(t.key,e.key)||S(t.Ta,e.Ta)},t.ha=function(t,e){return S(t.Ta,e.Ta)||M.$(t.key,e.key)},t}();function zo(t,e){return"firestore_clients_"+t+"_"+e}function Bo(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.u()&&(r+="_"+e.uid),r}function Go(t,e){return"firestore_targets_"+t+"_"+e}var Ko=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Ia=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new _(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wo=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Ia=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new _(r.error.code,r.error.message)),i?new t(e,r.state,o):(d("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ho=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Ia=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=dt(),s=0;i&&s<r.activeTargetIds.length;++s)i=F(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(d("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Yo=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Ia=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+e),null)},t}(),Qo=function(){function t(){this.activeTargetIds=dt()}return t.prototype.Aa=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ra=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ma=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Xo=function(){function t(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.Pa=r,this.ga=null,this.Pu=null,this.ps=null,this.ya=this.Va.bind(this),this.pa=new tt(S),this.lr=!1,this.va=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ba=zo(this.persistenceKey,this.Pa),this.Sa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pa=this.pa.Tt(this.Pa,new Qo),this.Da=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ca=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Na=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xa=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fa=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ya)}return t.Gs=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(e["b"])(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,a,c,h,f,l=this;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,this.ga.Ic()];case 1:for(t=e.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Pa&&(o=this.getItem(zo(this.persistenceKey,i)))&&(s=Ho.Ia(i,o))&&(this.pa=this.pa.Tt(s.clientId,s));for(this.Oa(),(u=this.storage.getItem(this.xa))&&(a=this.Ma(u))&&this.ka(a),c=0,h=this.va;c<h.length;c++)f=h[c],this.Va(f);return this.va=[],this.window.addEventListener("unload",(function(){return l.fc()})),this.lr=!0,[2]}}))}))},t.prototype.Ss=function(t){this.setItem(this.Sa,JSON.stringify(t))},t.prototype.$a=function(){return this.La(this.pa)},t.prototype.Ba=function(t){var e=!1;return this.pa.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.qa=function(t){this.Ua(t,"pending")},t.prototype.Qa=function(t,e,n){this.Ua(t,e,n),this.Ka(t)},t.prototype.Wa=function(t){var e="not-current";if(this.Ba(t)){var n=this.storage.getItem(Go(this.persistenceKey,t));if(n){var r=Wo.Ia(t,n);r&&(e=r.state)}}return this.ja.Aa(t),this.Oa(),e},t.prototype.Ga=function(t){this.ja.Ra(t),this.Oa()},t.prototype.za=function(t){return this.ja.activeTargetIds.has(t)},t.prototype.Ha=function(t){this.removeItem(Go(this.persistenceKey,t))},t.prototype.Ja=function(t,e,n){this.Ya(t,e,n)},t.prototype.Xa=function(t,e,n){var r=this;e.forEach((function(t){r.Ka(t)})),this.currentUser=t,n.forEach((function(t){r.qa(t)}))},t.prototype.Za=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.fc=function(){this.lr&&(this.window.removeEventListener("storage",this.ya),this.removeItem(this.ba),this.lr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){p("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Va=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(p("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ba)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi((function(){return Object(e["b"])(n,void 0,void 0,(function(){var t,n,i,o,s,u;return Object(e["d"])(this,(function(e){if(this.lr){if(null!==r.key)if(this.Da.test(r.key)){if(null==r.newValue)return t=this.sh(r.key),[2,this.ih(t,null)];if(n=this.rh(r.key,r.newValue))return[2,this.ih(n.clientId,n)]}else if(this.Ca.test(r.key)){if(null!==r.newValue&&(i=this.oh(r.key,r.newValue)))return[2,this.uh(i)]}else if(this.Na.test(r.key)){if(null!==r.newValue&&(o=this.ah(r.key,r.newValue)))return[2,this.hh(o)]}else if(r.key===this.xa){if(null!==r.newValue&&(s=this.Ma(r.newValue)))return[2,this.ka(s)]}else if(r.key===this.Sa)(u=function(t){var e=sr.Ds;if(null!=t)try{var n=JSON.parse(t);m("number"==typeof n),e=n}catch(t){d("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(r.newValue))!==sr.Ds&&this.ps(u);else if(r.key===this.Fa)return[2,this.ga.lh()]}else this.va.push(r);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ja",{get:function(){return this.pa.get(this.Pa)},enumerable:!1,configurable:!0}),t.prototype.Oa=function(){this.setItem(this.ba,this.ja.ma())},t.prototype.Ua=function(t,e,n){var r=new Ko(this.currentUser,t,e,n),i=Bo(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ma())},t.prototype.Ka=function(t){var e=Bo(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){var e={clientId:this.Pa,onlineState:t};this.storage.setItem(this.xa,JSON.stringify(e))},t.prototype.Ya=function(t,e,n){var r=Go(this.persistenceKey,t),i=new Wo(t,e,n);this.setItem(r,i.ma())},t.prototype.nh=function(){this.setItem(this.Fa,"value-not-used")},t.prototype.sh=function(t){var e=this.Da.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return Ho.Ia(n,e)},t.prototype.oh=function(t,e){var n=this.Ca.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ko.Ia(new h(i),r,e)},t.prototype.ah=function(t,e){var n=this.Na.exec(t),r=Number(n[1]);return Wo.Ia(r,e)},t.prototype.Ma=function(t){return Yo.Ia(t)},t.prototype.uh=function(t){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.ga._h(t.batchId,t.state,t.error)]:(p("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.hh=function(t){return this.ga.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pa.Tt(t,e):this.pa.remove(t),i=this.La(this.pa),o=this.La(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.ga.dh(s,u).then((function(){n.pa=r}))},t.prototype.ka=function(t){this.pa.get(t.clientId)&&this.Pu(t.onlineState)},t.prototype.La=function(t){var e=dt();return t.forEach((function(t,n){e=e.Gt(n.activeTargetIds)})),e},t}(),Jo=function(){function t(){this.wh=new Qo,this.Eh={},this.Pu=null,this.ps=null}return t.prototype.qa=function(t){},t.prototype.Qa=function(t,e,n){},t.prototype.Wa=function(t){return this.wh.Aa(t),this.Eh[t]||"not-current"},t.prototype.Ja=function(t,e,n){this.Eh[t]=e},t.prototype.Ga=function(t){this.wh.Ra(t)},t.prototype.za=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Ha=function(t){delete this.Eh[t]},t.prototype.$a=function(){return this.wh.activeTargetIds},t.prototype.Ba=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new Qo,Promise.resolve()},t.prototype.Xa=function(t,e,n){},t.prototype.Za=function(t){},t.prototype.fc=function(){},t.prototype.Ss=function(t){},t.prototype.eh=function(){},t}(),$o=function(t){this.key=t},Zo=function(t){this.key=t},ts=function(){function t(t,e){this.query=t,this.Th=e,this.Ih=null,this.le=!1,this.mh=lt(),this.ee=lt(),this.Ah=kn(t),this.Rh=new vt(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Th},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.yh:new yt,i=e?e.Rh:this.Rh,o=e?e.ee:this.ee,s=i,u=!1,a=bn(this.query)&&i.size===this.query.limit?i.last():null,c=wn(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pt((function(t,e){var h=i.get(t),f=e instanceof pn?e:null;f&&(f=Dn(n.query,f)?f:null);var l=!!h&&n.ee.has(h.key),p=!!f&&(f.an||n.ee.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Vh(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.Ah(f,a)>0||c&&n.Ah(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),bn(this.query)||wn(this.query))for(;s.size>this.query.limit;){var h=bn(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Rh:s,yh:r,ph:u,ee:o}},t.prototype.Vh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},t.prototype.Zn=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.ee=t.ee;var o=t.yh.Zt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)})),this.bh(n);var s=e?this.Sh():[],u=0===this.mh.size&&this.le?1:0,a=u!==this.Ih;return this.Ih=u,0!==o.length||a?{snapshot:new gt(this.query,t.Rh,i,o,t.ee,0===u,a,!1),Dh:s}:{Dh:s}},t.prototype.Yu=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Rh:this.Rh,yh:new yt,ee:this.ee,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Th.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).an},t.prototype.bh=function(t){var e=this;t&&(t._e.forEach((function(t){return e.Th=e.Th.add(t)})),t.fe.forEach((function(t){})),t.de.forEach((function(t){return e.Th=e.Th.delete(t)})),this.le=t.le)},t.prototype.Sh=function(){var t=this;if(!this.le)return[];var e=this.mh;this.mh=lt(),this.Rh.forEach((function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))}));var n=[];return e.forEach((function(e){t.mh.has(e)||n.push(new Zo(e))})),this.mh.forEach((function(t){e.has(t)||n.push(new $o(t))})),n},t.prototype.Nh=function(t){this.Th=t.Bc,this.mh=lt();var e=this.gh(t.documents);return this.Zn(e,!0)},t.prototype.xh=function(){return gt.ie(this.query,this.Rh,this.ee,0===this.Ih)},t}(),es=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ns=function(t){this.key=t,this.Fh=!1},rs=function(){function t(t,e,n,r,i,o){this.Cu=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new Xn((function(t){return Nn(t)}),An),this.qh=new Map,this.Uh=[],this.Qh=new tt(M.$),this.Kh=new Map,this.Wh=new qo,this.jh={},this.Gh=new Map,this.zh=Ai._o(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function is(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return r=Cs(t),(s=r.Bh.get(n))?(i=s.targetId,r.kh.Wa(i),o=s.view.xh(),[3,4]):[3,1];case 1:return[4,Hi(r.Cu,Tn(n))];case 2:return u=e.sent(),a=r.kh.Wa(u.targetId),i=u.targetId,[4,os(r,n,i,"current"===a)];case 3:o=e.sent(),r.Jh&&ao(r.Oh,u),e.label=4;case 4:return[2,o]}}))}))}function os(t,n,r,i){return Object(e["b"])(this,void 0,void 0,(function(){var o,s,u,a,c,h;return Object(e["d"])(this,(function(f){switch(f.label){case 0:return t.Yh=function(n,r,i){return function(t,n,r,i){return Object(e["b"])(this,void 0,void 0,(function(){var o,s,u;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return o=n.view.gh(r),o.ph?[4,Qi(t.Cu,n.query,!1).then((function(t){var e=t.documents;return n.view.gh(e,o)}))]:[3,2];case 1:o=e.sent(),e.label=2;case 2:return s=i&&i.re.get(n.targetId),u=n.view.Zn(o,t.Jh,s),[2,(ms(t,n.targetId,u.Dh),u.snapshot)]}}))}))}(t,n,r,i)},[4,Qi(t.Cu,n,!0)];case 1:return o=f.sent(),s=new ts(n,o.Bc),u=s.gh(o.documents),a=bt.he(r,i&&"Offline"!==t.onlineState),c=s.Zn(u,t.Jh,a),ms(t,r,c.Dh),h=new es(n,r,s),[2,(t.Bh.set(n,h),t.qh.has(r)?t.qh.get(r).push(n):t.qh.set(r,[n]),c.snapshot)]}}))}))}function ss(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return r=b(t),i=r.Bh.get(n),(o=r.qh.get(i.targetId)).length>1?[2,(r.qh.set(i.targetId,o.filter((function(t){return!An(t,n)}))),void r.Bh.delete(n))]:r.Jh?(r.kh.Ga(i.targetId),r.kh.Ba(i.targetId)?[3,2]:[4,Yi(r.Cu,i.targetId,!1).then((function(){r.kh.Ha(i.targetId),co(r.Oh,i.targetId),ys(r,i.targetId)})).catch(Zi)]):[3,3];case 1:e.sent(),e.label=2;case 2:return[3,5];case 3:return ys(r,i.targetId),[4,Yi(r.Cu,i.targetId,!0)];case 4:e.sent(),e.label=5;case 5:return[2]}}))}))}function us(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o,s,u;return Object(e["d"])(this,(function(e){switch(e.label){case 0:i=Ps(t),e.label=1;case 1:return e.trys.push([1,5,,6]),[4,function(t,e){var n,r=b(t),i=x.now(),o=e.reduce((function(t,e){return t.add(e.key)}),lt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Oc._s(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=Je(c,n.get(c.key));null!=h&&s.push(new en(c.key,h,fn(h.proto.mapValue),We.exists(!0)))}return r.rs.Sr(t,i,s,e)}))})).then((function(t){var e=t.vn(n);return{batchId:t.batchId,Qn:e}}))}(i.Cu,n)];case 2:return o=e.sent(),i.kh.qa(o.batchId),function(t,e,n){var r=t.jh[t.currentUser.h()];r||(r=new tt(S)),r=r.Tt(e,n),t.jh[t.currentUser.h()]=r}(i,o.batchId,r),[4,_s(i,o.Qn)];case 3:return e.sent(),[4,Io(i.Oh)];case 4:return e.sent(),[3,6];case 5:return s=e.sent(),u=_r(s,"Failed to persist write"),r.reject(u),[3,6];case 6:return[2]}}))}))}function as(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i;return Object(e["d"])(this,(function(e){switch(e.label){case 0:r=b(t),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,Ki(r.Cu,n)];case 2:return i=e.sent(),n.re.forEach((function(t,e){var n=r.Kh.get(e);n&&(m(t._e.size+t.fe.size+t.de.size<=1),t._e.size>0?n.Fh=!0:t.fe.size>0?m(n.Fh):t.de.size>0&&(m(n.Fh),n.Fh=!1))})),[4,_s(r,i,n)];case 3:return e.sent(),[3,6];case 4:return[4,Zi(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function cs(t,e,n){var r=b(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach((function(t,n){var r=n.view.Yu(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=b(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Yu(e)&&(r=!0)})),r&&Mo(n)}(r.Mh,e),i.length&&r.Lh.au(i),r.onlineState=e,r.Jh&&r.kh.Za(e)}}function hs(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return(i=b(t)).kh.Ja(n,"rejected",r),o=i.Kh.get(n),(s=o&&o.key)?(u=(u=new tt(M.$)).Tt(s,new dn(s,C.min())),a=lt().add(s),c=new mt(C.min(),new Map,new rt(S),u,a),[4,as(i,c)]):[3,2];case 1:return e.sent(),i.Qh=i.Qh.remove(s),i.Kh.delete(n),ws(i),[3,4];case 2:return[4,Yi(i.Cu,n,!1).then((function(){return ys(i,n,r)})).catch(Zi)];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}function fs(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o;return Object(e["d"])(this,(function(e){switch(e.label){case 0:r=b(t),i=n.batch.batchId,e.label=1;case 1:return e.trys.push([1,4,,6]),[4,Bi(r.Cu,n)];case 2:return o=e.sent(),vs(r,i,null),ds(r,i),r.kh.Qa(i,"acknowledged"),[4,_s(r,o)];case 3:return e.sent(),[3,6];case 4:return[4,Zi(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function ls(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o;return Object(e["d"])(this,(function(e){switch(e.label){case 0:i=b(t),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,function(t,e){var n=b(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.rs.Cr(t,e).next((function(e){return m(null!==e),r=e.keys(),n.rs.$r(t,e)})).next((function(){return n.rs.Ur(t)})).next((function(){return n.Oc._s(t,r)}))}))}(i.Cu,n)];case 2:return o=e.sent(),vs(i,n,r),ds(i,n),i.kh.Qa(n,"rejected",r),[4,_s(i,o)];case 3:return e.sent(),[3,6];case 4:return[4,Zi(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function ps(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(e["d"])(this,(function(e){switch(e.label){case 0:vo((r=b(t)).Oh)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,function(t){var e=b(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.rs.Or(t)}))}(r.Cu)];case 2:return-1===(i=e.sent())?[2,void n.resolve()]:((o=r.Gh.get(i)||[]).push(n),r.Gh.set(i,o),[3,4]);case 3:return s=e.sent(),u=_r(s,"Initialization of waitForPendingWrites() operation failed"),n.reject(u),[3,4];case 4:return[2]}}))}))}function ds(t,e){(t.Gh.get(e)||[]).forEach((function(t){t.resolve()})),t.Gh.delete(e)}function vs(t,e,n){var r=b(t),i=r.jh[r.currentUser.h()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.h()]=i}}function ys(t,e,n){void 0===n&&(n=null),t.kh.Ga(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.da(e).forEach((function(e){t.Wh.Qr(e)||gs(t,e)}))}function gs(t,e){var n=t.Qh.get(e);null!==n&&(co(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),ws(t))}function ms(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof $o?(t.Wh.Do(o.key,e),bs(t,o)):o instanceof Zo?(p("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.No(o.key,e),t.Wh.Qr(o.key)||gs(t,o.key)):g()}}function bs(t,e){var n=e.key;t.Qh.get(n)||(p("SyncEngine","New document in limbo: "+n),t.Uh.push(n),ws(t))}function ws(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new ns(e)),t.Qh=t.Qh.Tt(e,n),ao(t.Oh,new X(Tn(mn(e.path)),n,2,sr.Ds))}}function _s(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o,s,u;return Object(e["d"])(this,(function(a){switch(a.label){case 0:return i=b(t),o=[],s=[],u=[],i.Bh.W()?[3,3]:(i.Bh.forEach((function(t,e){u.push(i.Yh(e,n,r).then((function(t){if(t){i.Jh&&i.kh.Ja(e.targetId,t.fromCache?"not-current":"current"),o.push(t);var n=or.Vs(e.targetId,t);s.push(n)}})))})),[4,Promise.all(u)]);case 1:return a.sent(),i.Lh.au(o),[4,function(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f;return Object(e["d"])(this,(function(e){switch(e.label){case 0:r=b(t),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Jn.forEach(n,(function(e){return Jn.forEach(e.gs,(function(n){return r.persistence.Vr.Do(t,e.targetId,n)})).next((function(){return Jn.forEach(e.ys,(function(n){return r.persistence.Vr.No(t,e.targetId,n)}))}))}))}))];case 2:return e.sent(),[3,4];case 3:if(!fr(i=e.sent()))throw i;return p("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=n;o<s.length;o++)u=s[o],a=u.targetId,u.fromCache||(c=r.Cc.get(a),h=c.ft,f=c.Et(h),r.Cc=r.Cc.Tt(a,f));return[2]}}))}))}(i.Cu,s)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Is(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return(r=b(t)).currentUser.isEqual(n)?[3,3]:(p("SyncEngine","User change. New user:",n.h()),[4,zi(r.Cu,n)]);case 1:return i=e.sent(),r.currentUser=n,function(t,e){t.Gh.forEach((function(t){t.forEach((function(t){t.reject(new _(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Gh.clear()}(r),r.kh.Xa(n,i.$c,i.Lc),[4,_s(r,i.kc)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}function Es(t,e){var n=b(t),r=n.Kh.get(e);if(r&&r.Fh)return lt().add(r.key);var i=lt(),o=n.qh.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Bh.get(a);i=i.Gt(c.view.Ph)}return i}function Os(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,Qi((r=b(t)).Cu,n.query,!0)];case 1:return i=e.sent(),o=n.view.Nh(i),[2,(r.Jh&&ms(r,n.targetId,o.Dh),o)]}}))}))}function Ts(t){return Object(e["b"])(this,void 0,void 0,(function(){var n;return Object(e["d"])(this,(function(e){return[2,Ji((n=b(t)).Cu).then((function(t){return _s(n,t)}))]}))}))}function js(t,n,r,i){return Object(e["b"])(this,void 0,void 0,(function(){var o,s;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,function(t,e){var n=b(t),r=b(n.rs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Nr(t,e).next((function(e){return e?n.Oc._s(t,e):Jn.resolve(null)}))}))}((o=b(t)).Cu,n)];case 1:return null===(s=e.sent())?[3,6]:"pending"!==r?[3,3]:[4,Io(o.Oh)];case 2:return e.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(vs(o,n,i||null),ds(o,n),function(t,e){b(b(t).rs).Br(e)}(o.Cu,n)):g(),e.label=4;case 4:return[4,_s(o,s)];case 5:return e.sent(),[3,7];case 6:p("SyncEngine","Cannot apply mutation batch with id: "+n),e.label=7;case 7:return[2]}}))}))}function As(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return Cs(r=b(t)),Ps(r),!0!==n||!0===r.Hh?[3,3]:(i=r.kh.$a(),[4,Ns(r,i.H())]);case 1:return o=e.sent(),r.Hh=!0,[4,So(r.Oh,!0)];case 2:for(e.sent(),s=0,u=o;s<u.length;s++)a=u[s],ao(r.Oh,a);return[3,7];case 3:return!1!==n||!1===r.Hh?[3,7]:(c=[],h=Promise.resolve(),r.qh.forEach((function(t,e){r.kh.za(e)?c.push(e):h=h.then((function(){return ys(r,e),Yi(r.Cu,e,!0)})),co(r.Oh,e)})),[4,h]);case 4:return e.sent(),[4,Ns(r,c)];case 5:return e.sent(),function(t){var e=b(t);e.Kh.forEach((function(t,n){co(e.Oh,n)})),e.Wh.wa(),e.Kh=new Map,e.Qh=new tt(M.$)}(r),r.Hh=!1,[4,So(r.Oh,!1)];case 6:e.sent(),e.label=7;case 7:return[2]}}))}))}function Ns(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l,p,d,v,y;return Object(e["d"])(this,(function(e){switch(e.label){case 0:r=b(t),i=[],o=[],s=0,u=n,e.label=1;case 1:return s<u.length?(a=u[s],c=void 0,(h=r.qh.get(a))&&0!==h.length?[4,Hi(r.Cu,Tn(h[0]))]:[3,7]):[3,13];case 2:c=e.sent(),f=0,l=h,e.label=3;case 3:return f<l.length?(p=l[f],d=r.Bh.get(p),[4,Os(r,d)]):[3,6];case 4:(v=e.sent()).snapshot&&o.push(v.snapshot),e.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Xi(r.Cu,a)];case 8:return y=e.sent(),[4,Hi(r.Cu,y)];case 9:return c=e.sent(),[4,os(r,Ss(y),a,!1)];case 10:e.sent(),e.label=11;case 11:i.push(c),e.label=12;case 12:return s++,[3,1];case 13:return[2,(r.Lh.au(o),i)]}}))}))}function Ss(t){return gn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ds(t){var e=b(t);return b(b(e.Cu).persistence).Ic()}function ks(t,n,r,i){return Object(e["b"])(this,void 0,void 0,(function(){var o,s,u;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return(o=b(t)).Hh?(p("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.qh.has(n))return[3,8];switch(r){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ji(o.Cu)];case 3:return s=e.sent(),u=mt.ae(n,"current"===r),[4,_s(o,s,u)];case 4:return e.sent(),[3,8];case 5:return[4,Yi(o.Cu,n,!0)];case 6:return e.sent(),ys(o,n,i),[3,8];case 7:g(),e.label=8;case 8:return[2]}}))}))}function xs(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o,s,u,a,c,h,f,l,d;return Object(e["d"])(this,(function(v){switch(v.label){case 0:if(!(i=Cs(t)).Hh)return[3,10];o=0,s=n,v.label=1;case 1:return o<s.length?(u=s[o],i.qh.has(u)?(p("SyncEngine","Adding an already active target "+u),[3,5]):[4,Xi(i.Cu,u)]):[3,6];case 2:return a=v.sent(),[4,Hi(i.Cu,a)];case 3:return c=v.sent(),[4,os(i,Ss(a),c.targetId,!1)];case 4:v.sent(),ao(i.Oh,c),v.label=5;case 5:return o++,[3,1];case 6:h=function(t){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return i.qh.has(t)?[4,Yi(i.Cu,t,!1).then((function(){co(i.Oh,t),ys(i,t)})).catch(Zi)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=r,v.label=7;case 7:return f<l.length?(d=l[f],[5,h(d)]):[3,10];case 8:v.sent(),v.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function Cs(t){var e=b(t);return e.Oh.xu.Qu=as.bind(null,e),e.Oh.xu.Xe=Es.bind(null,e),e.Oh.xu.Uu=hs.bind(null,e),e.Lh.au=Lo.bind(null,e.Mh),e.Lh.Xh=Vo.bind(null,e.Mh),e}function Ps(t){var e=b(t);return e.Oh.xu.Ku=fs.bind(null,e),e.Oh.xu.Wu=ls.bind(null,e),e}var Rs=function(){function t(){}return t.prototype.Mc=function(t){this.Zh=t},t.prototype.ws=function(t,e,n,r){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Tn.length||1===t.Tn.length&&t.Tn[0].field.tt())}(e)||n.isEqual(C.min())?this.tl(t,e):this.Zh._s(t,r).next((function(s){var u=o.el(e,s);return(bn(e)||wn(e))&&o.ph(e.limitType,u,r,n)?o.tl(t,e):(l()<=i["a"].DEBUG&&p("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Sn(e)),o.Zh.ws(t,e,n).next((function(t){return u.forEach((function(e){t=t.Tt(e.key,e)})),t})))}))},t.prototype.el=function(t,e){var n=new rt(kn(t));return e.forEach((function(e,r){r instanceof pn&&Dn(t,r)&&(n=n.add(r))})),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.F(r)>0)},t.prototype.tl=function(t,e){return l()<=i["a"].DEBUG&&p("IndexFreeQueryEngine","Using full collection scan to execute query:",Sn(e)),this.Zh.ws(t,e,C.min())},t}(),Ls=function(){function t(t,e){this.os=t,this.Vr=e,this.rs=[],this.nl=1,this.sl=new rt(Fo.ua)}return t.prototype.br=function(t){return Jn.resolve(0===this.rs.length)},t.prototype.Sr=function(t,e,n,r){var i=this.nl;this.nl++,this.rs.length>0&&this.rs[this.rs.length-1];var o=new Yn(i,e,n,r);this.rs.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.sl=this.sl.add(new Fo(a.key,i)),this.os.Dr(t,a.key.path.q())}return Jn.resolve(o)},t.prototype.Cr=function(t,e){return Jn.resolve(this.il(e))},t.prototype.Fr=function(t,e){var n=e+1,r=this.rl(n),i=r<0?0:r;return Jn.resolve(this.rs.length>i?this.rs[i]:null)},t.prototype.Or=function(){return Jn.resolve(0===this.rs.length?-1:this.nl-1)},t.prototype.Mr=function(t){return Jn.resolve(this.rs.slice())},t.prototype.us=function(t,e){var n=this,r=new Fo(e,0),i=new Fo(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Kt([r,i],(function(t){var e=n.il(t.Ta);o.push(e)})),Jn.resolve(o)},t.prototype.ds=function(t,e){var n=this,r=new rt(S);return e.forEach((function(t){var e=new Fo(t,0),i=new Fo(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,i],(function(t){r=r.add(t.Ta)}))})),Jn.resolve(this.ol(r))},t.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,i=n;M.ot(i)||(i=i.child(""));var o=new Fo(new M(i),0),s=new rt(S);return this.sl.Wt((function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(s=s.add(t.Ta)),!0)}),o),Jn.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.il(t);null!==r&&n.push(r)})),n},t.prototype.$r=function(t,e){var n=this;m(0===this.cl(e.batchId,"removed")),this.rs.shift();var r=this.sl;return Jn.forEach(e.mutations,(function(i){var o=new Fo(i.key,e.batchId);return r=r.delete(o),n.Vr.qr(t,i.key)})).next((function(){n.sl=r}))},t.prototype.Br=function(t){},t.prototype.Qr=function(t,e){var n=new Fo(e,0),r=this.sl.jt(n);return Jn.resolve(e.isEqual(r&&r.key))},t.prototype.Ur=function(t){return this.rs.length,Jn.resolve()},t.prototype.cl=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.rs.length?null:this.rs[e]},t}(),Vs=function(){function t(t,e){this.os=t,this.ul=e,this.docs=new tt(M.$),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:s,readTime:n}),this.size+=s-o,this.os.Dr(t,r.path.q())},t.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Jn=function(t,e){var n=this.docs.get(e);return Jn.resolve(n?n.zn:null)},t.prototype.getEntries=function(t,e){var n=this,r=ut();return e.forEach((function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)})),Jn.resolve(r)},t.prototype.ws=function(t,e,n){for(var r=ct(),i=new M(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),u=s.key,a=s.value,c=a.zn,h=a.readTime;if(!e.path.j(u.path))break;h.F(n)<=0||c instanceof pn&&Dn(e,c)&&(r=r.Tt(c.key,c))}return Jn.resolve(r)},t.prototype.al=function(t,e){return Jn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Xr=function(t){return new Ms(this)},t.prototype.eo=function(t){return Jn.resolve(this.size)},t}(),Ms=function(t){function n(e){var n=this;return(n=t.call(this)||this).no=e,n}return Object(e["c"])(n,t),n.prototype.Zn=function(t){var e=this,n=[];return this.Qn.forEach((function(r,i){i&&i.zn?n.push(e.no.jn(t,i.zn,e.Wn(r))):e.no.Hn(r)})),Jn.qn(n)},n.prototype.Yn=function(t,e){return this.no.Jn(t,e)},n.prototype.Xn=function(t,e){return this.no.getEntries(t,e)},n}($n),Us=function(){function t(t){this.persistence=t,this.hl=new Xn((function(t){return G(t)}),K),this.lastRemoteSnapshotVersion=C.min(),this.highestTargetId=0,this.ll=0,this._l=new qo,this.targetCount=0,this.fl=Ai.lo()}return t.prototype.Ue=function(t,e){return this.hl.forEach((function(t,n){return e(n)})),Jn.resolve()},t.prototype.To=function(t){return Jn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Io=function(t){return Jn.resolve(this.ll)},t.prototype.fo=function(t){return this.highestTargetId=this.fl.next(),Jn.resolve(this.highestTargetId)},t.prototype.mo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),Jn.resolve()},t.prototype.Ro=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new Ai(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Ao=function(t,e){return this.Ro(e),this.targetCount+=1,Jn.resolve()},t.prototype.yo=function(t,e){return this.Ro(e),Jn.resolve()},t.prototype.Vo=function(t,e){return this.hl.delete(e.target),this._l.da(e.targetId),this.targetCount-=1,Jn.resolve()},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.hl.delete(s),o.push(r.po(t,u.targetId)),i++)})),Jn.qn(o).next((function(){return i}))},t.prototype.vo=function(t){return Jn.resolve(this.targetCount)},t.prototype.bo=function(t,e){var n=this.hl.get(e)||null;return Jn.resolve(n)},t.prototype.So=function(t,e,n){return this._l.la(e,n),Jn.resolve()},t.prototype.Co=function(t,e,n){this._l.fa(e,n);var r=this.persistence.Vr,i=[];return r&&e.forEach((function(e){i.push(r.qr(t,e))})),Jn.qn(i)},t.prototype.po=function(t,e){return this._l.da(e),Jn.resolve()},t.prototype.xo=function(t,e){var n=this._l.Ea(e);return Jn.resolve(n)},t.prototype.Qr=function(t,e){return Jn.resolve(this._l.Qr(e))},t}(),qs=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.ro=function(t,e){return Jn.resolve(this.dl.get(e))},t.prototype.oo=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:oe(n.createTime)}),Jn.resolve()},t.prototype.co=function(t,e){return Jn.resolve(this.wl.get(e))},t.prototype.uo=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:zr(n.bundledQuery),readTime:oe(n.readTime)}),Jn.resolve()},t}(),Fs=function(){function t(t,e){var n=this;this.El={},this.ko=new sr(0),this.$o=!1,this.$o=!0,this.Vr=t(this),this.jo=new Us(this),this.os=new ei,this.ss=function(t,e){return new Vs(t,(function(t){return n.Vr.Tl(t)}))}(this.os),this.serializer=new xr(e),this.Go=new qs(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.fc=function(){return this.$o=!1,Promise.resolve()},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.tc=function(){},t.prototype.ec=function(){},t.prototype.Pc=function(){return this.os},t.prototype.mc=function(t){var e=this.El[t.h()];return e||(e=new Ls(this.os,this.Vr),this.El[t.h()]=e),e},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new zs(this.ko.next());return this.Vr.Il(),n(i).next((function(t){return r.Vr.ml(i).next((function(){return t}))})).Ln().then((function(t){return i.ns(),t}))},t.prototype.Al=function(t,e){return Jn.Un(Object.values(this.El).map((function(n){return function(){return n.Qr(t,e)}})))},t}(),zs=function(t){function n(e){var n=this;return(n=t.call(this)||this).Fo=e,n}return Object(e["c"])(n,t),n}(rr),Bs=function(){function t(t){this.persistence=t,this.Rl=new qo,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw g()},enumerable:!1,configurable:!0}),t.prototype.Do=function(t,e,n){return this.Rl.Do(n,e),this.yl.delete(n.toString()),Jn.resolve()},t.prototype.No=function(t,e,n){return this.Rl.No(n,e),this.yl.add(n.toString()),Jn.resolve()},t.prototype.qr=function(t,e){return this.yl.add(e.toString()),Jn.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.da(e.targetId).forEach((function(t){return n.yl.add(t.toString())}));var r=this.persistence.Ac();return r.xo(t,e.targetId).next((function(t){t.forEach((function(t){return n.yl.add(t.toString())}))})).next((function(){return r.Vo(t,e)}))},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Rc().Xr();return Jn.forEach(this.yl,(function(r){var i=M.st(r);return e.Vl(t,i).next((function(t){t||n.Hn(i)}))})).next((function(){return e.Pl=null,n.apply(t)}))},t.prototype.Sc=function(t,e){var n=this;return this.Vl(t,e).next((function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())}))},t.prototype.Tl=function(t){return 0},t.prototype.Vl=function(t,e){var n=this;return Jn.Un([function(){return Jn.resolve(n.Rl.Qr(e))},function(){return n.persistence.Ac().Qr(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),Gs=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.cu=function(t){this.bl=t},t.prototype.nu=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),Ks={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ws=function(t){function n(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(e["c"])(n,t),n.prototype.Ll=function(t,e,n,r){return new Promise((function(i,o){var u=new s["f"];u.listenOnce(s["c"].COMPLETE,(function(){try{switch(u.getLastErrorCode()){case s["a"].NO_ERROR:var e=u.getResponseJson();p("Connection","XHR received:",JSON.stringify(e)),i(e);break;case s["a"].TIMEOUT:p("Connection",'RPC "'+t+'" timed out'),o(new _(w.DEADLINE_EXCEEDED,"Request time out"));break;case s["a"].HTTP_ERROR:var n=u.getStatus();if(p("Connection",'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(w).indexOf(e)>=0?e:w.UNKNOWN}(r.status);o(new _(a,r.message))}else o(new _(w.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new _(w.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{p("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);u.send(e,"POST",a,n,15)}))},n.prototype.uu=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Object(s["g"])(),i=Object(s["h"])(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(u.initMessageHeaders,e),Object(o["l"])()||Object(o["n"])()||Object(o["j"])()||Object(o["k"])()||Object(o["o"])()||Object(o["i"])()||(u.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");p("Connection","Creating WebChannel: "+a,u);var c=r.createWebChannel(a,u),h=!1,f=!1,l=new Gs({pl:function(t){f?p("Connection","Not sending because WebChannel is closed:",t):(h||(p("Connection","Opening WebChannel transport."),c.open(),h=!0),p("Connection","WebChannel sending:",t),c.send(t))},vl:function(){return c.close()}}),d=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(c,s["e"].EventType.OPEN,(function(){f||p("Connection","WebChannel transport opened.")})),d(c,s["e"].EventType.CLOSE,(function(){f||(f=!0,p("Connection","WebChannel transport closed"),l.Nl())})),d(c,s["e"].EventType.ERROR,(function(t){f||(f=!0,v("Connection","WebChannel transport errored:",t),l.Nl(new _(w.UNAVAILABLE,"The operation could not be completed")))})),d(c,s["e"].EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];m(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){p("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Y[t];if(void 0!==e)return Z(e)}(o),u=i.message;void 0===s&&(s=w.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),f=!0,l.Nl(new _(s,u)),c.close()}else p("Connection","WebChannel received:",n),l.xl(n)}})),d(i,s["b"].STAT_EVENT,(function(t){t.stat===s["d"].PROXY?p("Connection","Detected buffering proxy"):t.stat===s["d"].NOPROXY&&p("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Cl()}),0),l},n}(function(){function t(t){this.Fl=t,this.t=t.t;var e=t.ssl?"https":"http";this.Ol=e+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.Au=function(t,e,n,r){var i=this.kl(t,e);p("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then((function(t){return p("RestConnection","Received: ",t),t}),(function(e){throw v("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Ru=function(t,e,n,r){return this.Au(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.1",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},t.prototype.kl=function(t,e){var n=Ks[t];return this.Ol+"/v1/"+e+":"+n},t}()),Hs=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Lu=function(t){this.Kl.push(t)},t.prototype.fc=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ys=function(){function t(){}return t.prototype.Lu=function(t){},t.prototype.fc=function(){},t}(),Qs=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return this.serializer=tr(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Cu=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Fi(this.persistence,new Rs,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Fs(Bs.gl,this.serializer)},t.prototype.jl=function(t){return new Jo},t.prototype.terminate=function(){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.fc()];case 1:return t.sent(),[4,this.persistence.fc()];case 2:return t.sent(),[2]}}))}))},t}(),Xs=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(e["c"])(n,t),n.prototype.initialize=function(n){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return e.sent(),[4,$i(this.Cu)];case 2:return e.sent(),[4,this.Xl.initialize(this,n)];case 3:return e.sent(),[4,Ps(this.Xl.ga)];case 4:return e.sent(),[4,Io(this.Xl.Oh)];case 5:return e.sent(),[2]}}))}))},n.prototype.Jl=function(t){return Fi(this.persistence,new Rs,t.Yl,this.serializer)},n.prototype.Hl=function(t){var e=this.persistence.Vr.cr;return new jr(e,t.di)},n.prototype.Gl=function(t){var e=Ui(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?Tr.er(this.cacheSizeBytes):Tr.ir;return new Pi(this.synchronizeTabs,e,t.clientId,n,t.di,gr(),mr(),this.serializer,this.kh,!!this.forceOwnership)},n.prototype.jl=function(t){return new Jo},n}(Qs),Js=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(e["c"])(n,t),n.prototype.initialize=function(n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i=this;return Object(e["d"])(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Xl.ga,this.kh instanceof Xo?(this.kh.ga={_h:js.bind(null,r),fh:ks.bind(null,r),dh:xs.bind(null,r),Ic:Ds.bind(null,r),lh:Ts.bind(null,r)},[4,this.kh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Zo((function(t){return Object(e["b"])(i,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,As(this.Xl.ga,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.lr?this.zl.start(this.Cu):t||this.zl.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},n.prototype.jl=function(t){var e=gr();if(!Xo.Gs(e))throw new _(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ui(t.Fl.t,t.Fl.persistenceKey);return new Xo(e,t.di,n,t.clientId,t.Yl)},n}(Xs),$s=function(){function t(){}return t.prototype.initialize=function(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r=this;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return this.Cu?[3,2]:(this.Cu=t.Cu,this.kh=t.kh,this.Nu=this.Zl(n),this.Oh=this.t_(n),this.Mh=this.e_(n),this.ga=this.n_(n,!t.synchronizeTabs),this.kh.Pu=function(t){return cs(r.ga,t,1)},this.Oh.xu.s_=Is.bind(null,this.ga),[4,So(this.Oh,this.ga.Jh)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new Co},t.prototype.Zl=function(t){var e,n=tr(t.Fl.t),r=(e=t.Fl,new Ws(e));return function(t,e,n){return new ro(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Cu,n=this.Nu,r=t.di,i=function(t){return cs(s.ga,t,0)},o=Hs.Gs()?new Hs:new Ys,new oo(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new rs(t,e,n,r,i,o);return s&&(u.Hh=!0),u}(this.Cu,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return Object(e["b"])(this,void 0,void 0,(function(){var n;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return n=b(t),p("RemoteStore","RemoteStore shutting down."),n.Mu.add(5),[4,uo(n)];case 1:return e.sent(),n.$u.fc(),n.Bu.set("Unknown"),[2]}}))}))}(this.Oh)},t}(),Zs=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),tu=function(t){this.o_=t};function eu(t,e,n){if(!n)throw new _(w.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function nu(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _(w.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ru(t,e,n,r){if(!0===e&&!0===r)throw new _(w.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function iu(t){if(!M.ot(t))throw new _(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ou(t){if(M.ot(t))throw new _(w.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function su(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g()}function uu(t,e){if(t instanceof tu&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new _(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=su(t);throw new _(w.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function au(t,e){if(e<=0)throw new _(w.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var cu=function(t){this.c_=t},hu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.prototype.u_=function(t){if(2!==t.a_)throw 1===t.a_?t.h_(this.c_+"() can only appear at the top level of your update data"):t.h_(this.c_+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},n.prototype.isEqual=function(t){return t instanceof n},n}(cu);function fu(t,e,n){return new da({a_:3,l_:e.settings.l_,methodName:t.c_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var lu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.prototype.u_=function(t){return new Ge(t.path,new Re)},n.prototype.isEqual=function(t){return t instanceof n},n}(cu),pu=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(e["c"])(n,t),n.prototype.u_=function(t){var e=fu(this,t,!0),n=this.f_.map((function(t){return wa(t,e)})),r=new Le(n);return new Ge(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(cu),du=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(e["c"])(n,t),n.prototype.u_=function(t){var e=fu(this,t,!0),n=this.f_.map((function(t){return wa(t,e)})),r=new Me(n);return new Ge(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(cu),vu=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return Object(e["c"])(n,t),n.prototype.u_=function(t){var e=new qe(t.serializer,ee(t.serializer,this.d_));return new Ge(t.path,e)},n.prototype.isEqual=function(t){return this===t},n}(cu),yu=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new _(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.E_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.E_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.E_===t.E_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.E_}},t.prototype.C=function(t){return S(this.w_,t.w_)||S(this.E_,t.E_)},t}(),gu=function(){function t(t){this.T_=t}return t.fromBase64String=function(e){try{return new t(H.fromBase64String(e))}catch(e){throw new _(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(H.fromUint8Array(e))},t.prototype.toBase64=function(){return this.T_.toBase64()},t.prototype.toUint8Array=function(){return this.T_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.T_.isEqual(t.T_)},t}(),mu=new Map,bu=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new _(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ru("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),wu=function(){function t(t,e){this.I_="(lite)",this.m_=new bu({}),this.A_=!1,t instanceof c?(this.R_=t,this.P_=new E):(this.g_=t,this.R_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new _(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new c(t.options.projectId)}(t),this.P_=new O(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.g_)throw new _(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.g_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y_",{get:function(){return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"V_",{get:function(){return void 0!==this.p_},enumerable:!1,configurable:!0}),t.prototype.v_=function(t){if(this.A_)throw new _(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.m_=new bu(t),void 0!==t.credentials&&(this.P_=function(t){if(!t)return new E;switch(t.type){case"gapi":var e=t.client;return m(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new j(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new _(w.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.b_=function(){return this.m_},t.prototype.S_=function(){return this.A_=!0,this.m_},t.prototype._delete=function(){return this.p_||(this.p_=this.D_()),this.p_},t.prototype.D_=function(){return function(t){var e=mu.get(t);e&&(p("ComponentProvider","Removing Datastore"),mu.delete(t),e.terminate())}(this),Promise.resolve()},t}();function _u(){if("undefined"==typeof Uint8Array)throw new _(w.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Iu(){if("undefined"==typeof atob)throw new _(w.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Eu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.fromBase64String=function(t){return Iu(),new n(gu.fromBase64String(t))},n.fromUint8Array=function(t){return _u(),new n(gu.fromUint8Array(t))},n.prototype.toBase64=function(){return Iu(),this.o_.toBase64()},n.prototype.toUint8Array=function(){return _u(),this.o_.toUint8Array()},n.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},n.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},n}(tu),Ou=function(){function t(){}return t.prototype.C_=function(t,e){switch(void 0===e&&(e="none"),Pt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zt(t.integerValue||t.doubleValue);case 3:return this.N_(t.timestampValue);case 4:return this.x_(t,e);case 5:return t.stringValue;case 6:return this.F_(Bt(t.bytesValue));case 7:return this.O_(t.referenceValue);case 8:return this.M_(t.geoPointValue);case 9:return this.k_(t.arrayValue,e);case 10:return this.L_(t.mapValue,e);default:throw g()}},t.prototype.L_=function(t,e){var n=this,r={};return Nt(t.fields||{},(function(t,i){r[t]=n.C_(i,e)})),r},t.prototype.M_=function(t){return new yu(zt(t.latitude),zt(t.longitude))},t.prototype.k_=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.C_(t,e)}))},t.prototype.x_=function(t,e){switch(e){case"previous":var n=kt(t);return null==n?null:this.C_(n,e);case"estimate":return this.N_(xt(t));default:return null}},t.prototype.N_=function(t){var e=Ft(t);return new x(e.seconds,e.nanos)},t.prototype.B_=function(t,e){var n=R.Y(t);m(De(n));var r=new c(n.get(1),n.get(3)),i=new M(n.B(5));return r.isEqual(e)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Tu=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e["c"])(n,t),n.prototype.F_=function(t){return new Eu(new gu(t))},n.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return $a.q_(e,this.firestore,null)},n}(Ou),ju=function(){function t(t,e,n,r,i){this.U_=t,this.Q_=e,this.K_=n,this.W_=r,this.j_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Bu(this.U_,this.j_,this.K_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.W_},t.prototype.data=function(){if(this.W_){if(this.j_){var t=new Au(this.U_,this.Q_,this.K_,this.W_,null);return this.j_.fromFirestore(t)}return this.Q_.C_(this.W_.En())}},t.prototype.get=function(t){if(this.W_){var e=this.W_.data().field(Nu("DocumentSnapshot.get",t));if(null!==e)return this.Q_.C_(e)}},t}(),Au=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.prototype.data=function(){return t.prototype.data.call(this)},n}(ju);function Nu(t,e){return"string"==typeof e?ja(t,e):e instanceof tu?e.o_.G_:e.G_}var Su=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new _(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.G_=new V(t)}return t.prototype.isEqual=function(t){return this.G_.isEqual(t.G_)},t}(),Du=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).z_=new wr,r.I_="name"in e?e.name:"[DEFAULT]",r}return Object(e["c"])(n,t),n.prototype.D_=function(){return this.H_||Qa(this),this.H_.terminate()},n}(wu);function ku(t,n,r){var i=this,o=new Zn;return t.di.enqueue((function(){return Object(e["b"])(i,void 0,void 0,(function(){var i;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,xa(t,r)];case 1:return e.sent(),[4,Ca(t,n)];case 2:return e.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=e.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function xu(t){if(t.y_||t.V_)throw new _(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Cu=function(t){function n(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).U_=e,u.J_=e,u.metadata=o,u}return Object(e["c"])(n,t),n.prototype.exists=function(){return t.prototype.exists.call(this)},n.prototype.data=function(t){if(void 0===t&&(t={}),this.W_){if(this.j_){var e=new Pu(this.U_,this.Q_,this.K_,this.W_,this.metadata,null);return this.j_.fromFirestore(e,t)}return this.Q_.C_(this.W_.En(),t.serverTimestamps)}},n.prototype.get=function(t,e){if(void 0===e&&(e={}),this.W_){var n=this.W_.data().field(Nu("DocumentSnapshot.get",t));if(null!==n)return this.Q_.C_(n,e.serverTimestamps)}},n}(ju),Pu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},n}(Cu),Ru=function(){function t(t,e,n,r){this.U_=t,this.Q_=e,this.Y_=r,this.metadata=new nc(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Y_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Y_.docs.forEach((function(r){t.call(e,new Pu(n.U_,n.Q_,r.key,r,new nc(n.Y_.ee.has(r.key),n.Y_.fromCache),n.query.j_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.Y_.se)throw new _(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.X_&&this.Z_===e||(this.X_=function(t,e){if(t.Y_.te.W()){var n=0;return t.Y_.docChanges.map((function(e){var r=new Pu(t.U_,t.Q_,e.doc.key,e.doc,new nc(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.Y_.te;return t.Y_.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Pu(t.U_,t.Q_,e.doc.key,e.doc,new nc(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Lu(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.Z_=e),this.X_},t}();function Lu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function Vu(t,e){return t instanceof Cu&&e instanceof Cu?t.U_===e.U_&&t.K_.isEqual(e.K_)&&(null===t.W_?null===e.W_:t.W_.isEqual(e.W_))&&t.j_===e.j_:t instanceof Ru&&e instanceof Ru&&t.U_===e.U_&&aa(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.Y_.isEqual(e.Y_)}var Mu=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e["c"])(n,t),n.prototype.F_=function(t){return new gu(t)},n.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new Bu(this.firestore,null,e)},n}(Ou);function Uu(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=uu(t.firestore,Du),s=ca(o);return e instanceof tu&&(e=e.o_),Fu(o,("string"==typeof e||e instanceof Su?ma(s,"updateDoc",t.K_,e,n,r):ga(s,"updateDoc",t.K_,e)).ef(t.K_,We.exists(!0)))}function qu(t){for(var n,r,i,o=this,s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];var a={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||er(s[c])||(a=s[c],c++);var h,f,l,p={includeMetadataChanges:a.includeMetadataChanges};if(er(s[c])){var d=s[c];s[c]=null===(n=d.next)||void 0===n?void 0:n.bind(d),s[c+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),s[c+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}if(t instanceof Bu)f=uu(t.firestore,Du),l=mn(t.K_.path),h={next:function(e){s[c]&&s[c](zu(f,t,e))},error:s[c+1],complete:s[c+2]};else{f=uu(t.firestore,Du),l=t.tf;var v=new Mu(f);h={next:function(e){s[c]&&s[c](new Ru(f,v,t,e))},error:s[c+1],complete:s[c+2]},na(t.tf)}var y=Ya(f),g=new Zs(h),m=new Uo(l,g,p);return f.z_.Ri((function(){return Object(e["b"])(o,void 0,void 0,(function(){var t;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return t=Po,[4,qa(y)];case 1:return[2,t.apply(void 0,[e.sent(),m])]}}))}))})),function(){g.r_(),f.z_.Ri((function(){return Object(e["b"])(o,void 0,void 0,(function(){var t;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return t=Ro,[4,qa(y)];case 1:return[2,t.apply(void 0,[e.sent(),m])]}}))}))}))}}function Fu(t,n){return function(t,n){var r=this,i=new Zn;return t.di.Ri((function(){return Object(e["b"])(r,void 0,void 0,(function(){var r;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return r=us,[4,Ua(t)];case 1:return[2,r.apply(void 0,[e.sent(),n,i])]}}))}))})),i.promise}(Ya(t),n)}function zu(t,e,n){var r=n.docs.get(e.K_),i=new Mu(t);return new Cu(t,i,e.K_,r,new nc(n.hasPendingWrites,n.fromCache),e.j_)}var Bu=function(){function t(t,e,n){this.j_=e,this.K_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"nf",{get:function(){return this.K_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.K_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ra(this.firestore,this.j_,this.K_.path.q())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.K_)},t}(),Gu=function(){function t(t,e,n){this.j_=e,this.tf=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.tf)},t}(),Ku=function(){};function Wu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.sf(t)}return t}var Hu=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).rf=e,i.cf=n,i.uf=r,i.type="where",i}return Object(e["c"])(n,t),n.prototype.sf=function(t){var e=ca(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.tt()){if("array-contains"===o||"array-contains-any"===o)throw new _(w.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ta(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(Zu(r,t,f))}u={arrayValue:{values:a}}}else u=Zu(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ta(s,o),u=ba(n,"where",s,"in"===o||"not-in"===o);var l=xn.create(i,o,u);return function(t,e){if(e.An()){var n=In(t);if(null!==n&&!n.isEqual(e.field))throw new _(w.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=_n(t);null!==r&&ea(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new _(w.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new _(w.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.tf,0,e,t.firestore.R_,this.rf,this.cf,this.uf);return new Gu(t.firestore,t.j_,function(t,e){var n=t.filters.concat([e]);return new yn(t.path,t.collectionGroup,t.Tn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,n))},n}(Ku),Yu=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).rf=e,r.af=n,r.type="orderBy",r}return Object(e["c"])(n,t),n.prototype.sf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new _(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new _(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Kn(e,n);return function(t,e){if(null===_n(t)){var n=In(t);null!==n&&ea(t,n,e.field)}}(t,r),r}(t.tf,this.rf,this.af);return new Gu(t.firestore,t.j_,function(t,e){var n=t.Tn.concat([e]);return new yn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,e))},n}(Ku),Qu=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.hf=n,i.lf=r,i}return Object(e["c"])(n,t),n.prototype.sf=function(t){return new Gu(t.firestore,t.j_,jn(t.tf,this.hf,this.lf))},n}(Ku),Xu=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(e["c"])(n,t),n.prototype.sf=function(t){var e=$u(t,this.type,this._f,this.ff);return new Gu(t.firestore,t.j_,function(t,e){return new yn(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.tf,e))},n}(Ku),Ju=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(e["c"])(n,t),n.prototype.sf=function(t){var e=$u(t,this.type,this._f,this.ff);return new Gu(t.firestore,t.j_,function(t,e){return new yn(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.tf,e))},n}(Ku);function $u(t,e,n,r){if(n[0]instanceof tu&&(n[0]=n[0].o_),n[0]instanceof ju)return function(t,e,n,r,i){if(!r)throw new _(w.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=On(t);s<u.length;s++){var a=u[s];if(a.field.tt())o.push(Gt(e,r.key));else{var c=r.field(a.field);if(Dt(c))throw new _(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.J();throw new _(w.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Fn(o,i)}(t.tf,t.firestore.R_,e,n[0].W_,r);var i=ca(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new _(w.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.tt()){if("string"!=typeof c)throw new _(w.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!En(t)&&-1!==c.indexOf("/"))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(R.Y(c));if(!M.ot(h))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new M(h);u.push(Gt(e,f))}else{var l=ba(n,r,c);u.push(l)}}return new Fn(u,o)}(t.tf,t.firestore.R_,i,e,n,r)}function Zu(t,e,n){if(n instanceof tu&&(n=n.o_),"string"==typeof n){if(""===n)throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!En(e)&&-1!==n.indexOf("/"))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(R.Y(n));if(!M.ot(r))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Gt(t,new M(r))}if(n instanceof Bu)return Gt(t,n.K_);throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+su(n)+".")}function ta(t,e){if(!Array.isArray(t)||0===t.length)throw new _(w.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new _(w.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ea(t,e,n){if(!n.isEqual(e))throw new _(w.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function na(t){if(wn(t)&&0===t.Tn.length)throw new _(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ra=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,mn(r))||this).firestore=e,i.nf=r,i.type="collection",i}return Object(e["c"])(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.tf.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.tf.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this.nf.q();return t.W()?null:new Bu(this.firestore,null,new M(t))},enumerable:!1,configurable:!0}),n.prototype.withConverter=function(t){return new n(this.firestore,t,this.nf)},n}(Gu);function ia(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(eu("collection","path",n),t instanceof wu){var o=R.Y.apply(R,Object(e["g"])([n],r));return ou(o),new ra(t,null,o)}if(!(t instanceof Bu||t instanceof ra))throw new _(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=R.Y.apply(R,Object(e["g"])([t.path],r)).child(R.Y(n));return ou(s),new ra(t.firestore,null,s)}function oa(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(1===arguments.length&&(n=N.D()),eu("doc","path",n),t instanceof wu){var o=R.Y.apply(R,Object(e["g"])([n],r));return iu(o),new Bu(t,null,new M(o))}if(!(t instanceof Bu||t instanceof ra))throw new _(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=t.nf.child(R.Y.apply(R,Object(e["g"])([n],r)));return iu(s),new Bu(t.firestore,t instanceof ra?t.j_:null,new M(s))}var sa=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e["c"])(n,t),n.prototype.F_=function(t){return new gu(t)},n.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new Bu(this.firestore,null,e)},n}(Ou);function ua(t,e){return(t instanceof Bu||t instanceof ra)&&(e instanceof Bu||e instanceof ra)&&t.firestore===e.firestore&&t.path===e.path&&t.j_===e.j_}function aa(t,e){return t instanceof Gu&&e instanceof Gu&&t.firestore===e.firestore&&An(t.tf,e.tf)&&t.j_===e.j_}function ca(t){var e=t.S_(),n=tr(t.R_);return new va(t.R_,!!e.ignoreUndefinedProperties,n)}var ha=/^__.*__$/,fa=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[];return null!==this.en?n.push(new en(t,this.data,this.en,e)):n.push(new tn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new rn(t,this.fieldTransforms)),n},t}(),la=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[new en(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new rn(t,this.fieldTransforms)),n},t}();function pa(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}var da=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.df(),this.fieldTransforms=i||[],this.en=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a_",{get:function(){return this.settings.a_},enumerable:!1,configurable:!0}),t.prototype.wf=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},t.prototype.Ef=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.Tf(t),r},t.prototype.If=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.df(),r},t.prototype.mf=function(t){return this.wf({path:void 0,__:!0})},t.prototype.h_=function(t){return Aa(t,this.settings.methodName,this.settings.Af||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.en.find((function(e){return t.j(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.j(e.field)}))},t.prototype.df=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Tf(this.path.get(t))},t.prototype.Tf=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(pa(this.a_)&&ha.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),va=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||tr(t)}return t.prototype.Rf=function(t,e,n,r){return void 0===r&&(r=!1),new da({a_:t,methodName:e,l_:n,path:V.X(),__:!1,Af:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function ya(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Rf(o.merge||o.mergeFields?2:0,e,n,i);Ea("Data must be an object, but it was:",s,r);var u,a,c=_a(r,s);if(o.merge)u=new Be(s.en),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=Oa(e,l[f],n);if(!s.contains(p))throw new _(w.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Na(h,p)||h.push(p)}u=new Be(h),a=s.fieldTransforms.filter((function(t){return u.un(t.field)}))}else u=null,a=s.fieldTransforms;return new fa(new cn(c),u,a)}function ga(t,e,n,r){var i=t.Rf(1,e,n);Ea("Data must be an object, but it was:",i,r);var o=[],s=new hn;Nt(r,(function(t,r){var u=ja(e,t,n);r instanceof tu&&(r=r.o_);var a=i.If(u);if(r instanceof hu)o.push(u);else{var c=wa(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Be(o);return new la(s.hn(),u,i.fieldTransforms)}function ma(t,e,n,r,i,o){var s=t.Rf(1,e,n),u=[Oa(e,r,n)],a=[i];if(o.length%2!=0)throw new _(w.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Oa(e,o[c])),a.push(o[c+1]);for(var h=[],f=new hn,l=u.length-1;l>=0;--l)if(!Na(h,u[l])){var p=u[l],d=a[l];d instanceof tu&&(d=d.o_);var v=s.If(p);if(d instanceof hu)h.push(p);else{var y=wa(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new Be(h);return new la(f.hn(),g,s.fieldTransforms)}function ba(t,e,n,r){return void 0===r&&(r=!1),wa(n,t.Rf(r?4:3,e))}function wa(t,e){if(t instanceof tu&&(t=t.o_),Ia(t))return Ea("Unsupported field value:",e,t),_a(t,e);if(t instanceof cu)return function(t,e){if(!pa(e.a_))throw e.h_(t.c_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.c_+"() is not currently supported inside arrays");var n=t.u_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.a_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=wa(o[i],e.mf(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof tu&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ee(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=x.fromDate(t);return{timestampValue:ne(e.serializer,n)}}if(t instanceof x){var r=new x(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ne(e.serializer,r)}}if(t instanceof yu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gu)return{bytesValue:re(e.serializer,t.T_)};if(t instanceof Bu){var i=e.t,o=t.firestore.R_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:se(t.firestore.R_||e.t,t.K_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+su(t))}(t,e)}function _a(t,e){var n={};return St(t)?e.path&&e.path.length>0&&e.en.push(e.path):Nt(t,(function(t,r){var i=wa(r,e.Ef(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ia(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof x||t instanceof yu||t instanceof gu||t instanceof Bu||t instanceof cu)}function Ea(t,e,n){if(!Ia(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=su(n);throw"an object"===r?e.h_(t+" a custom object"):e.h_(t+" "+r)}}function Oa(t,e,n){if(e instanceof tu&&(e=e.o_),e instanceof Su)return e.G_;if("string"==typeof e)return ja(t,e);throw Aa("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Ta=new RegExp("[~\\*/\\[\\]]");function ja(t,n,r){if(n.search(Ta)>=0)throw Aa("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,r);try{return(new(Su.bind.apply(Su,Object(e["g"])([void 0],n.split("."))))).G_}catch(i){throw Aa("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,r)}}function Aa(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new _(w.INVALID_ARGUMENT,(u+=". ")+t+a)}function Na(t,e){return t.some((function(t){return t.isEqual(e)}))}var Sa=function(){function t(t){this.Nu=t,this.Pf=new Map,this.mutations=[],this.gf=!1,this.yf=null,this.Vf=new Set}return t.prototype.pf=function(t){return Object(e["b"])(this,void 0,void 0,(function(){var n,r=this;return Object(e["d"])(this,(function(i){switch(i.label){case 0:if(this.vf(),this.mutations.length>0)throw new _(w.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return r=b(t),i=le(r.serializer)+"/documents",o={documents:n.map((function(t){return ae(r.serializer,t)}))},[4,r.Ru("BatchGetDocuments",i,o)];case 1:return s=e.sent(),u=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){m(!!e.found),e.found.name,e.found.updateTime;var n=ce(t,e.found.name),r=oe(e.found.updateTime),i=new cn({mapValue:{fields:e.found.fields}});return new pn(n,r,i,{})}(t,e):"missing"in e?function(t,e){m(!!e.missing),m(!!e.readTime);var n=ce(t,e.missing),r=oe(e.readTime);return new dn(n,r)}(t,e):g()}(r.serializer,t);u.set(e.key.toString(),e)})),a=[],[2,(n.forEach((function(t){var e=u.get(t.toString());m(!!e),a.push(e)})),a)]}}))}))}(this.Nu,t)];case 1:return[2,((n=i.sent()).forEach((function(t){t instanceof dn||t instanceof pn?r.bf(t):g()})),n)]}}))}))},t.prototype.set=function(t,e){this.write(e.ef(t,this.rn(t))),this.Vf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.ef(t,this.Sf(t)))}catch(t){this.yf=t}this.Vf.add(t.toString())},t.prototype.delete=function(t){this.write([new un(t,this.rn(t))]),this.Vf.add(t.toString())},t.prototype.commit=function(){return Object(e["b"])(this,void 0,void 0,(function(){var t,n=this;return Object(e["d"])(this,(function(r){switch(r.label){case 0:if(this.vf(),this.yf)throw this.yf;return t=this.Pf,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,e){var r=M.st(e);n.mutations.push(new an(r,n.rn(r)))})),[4,function(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i,o;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return r=b(t),i=le(r.serializer)+"/documents",o={writes:n.map((function(t){return ve(r.serializer,t)}))},[4,r.Au("Commit",i,o)];case 1:return e.sent(),[2]}}))}))}(this.Nu,this.mutations)];case 1:return r.sent(),this.gf=!0,[2]}}))}))},t.prototype.bf=function(t){var e;if(t instanceof pn)e=t.version;else{if(!(t instanceof dn))throw g();e=C.min()}var n=this.Pf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new _(w.ABORTED,"Document version changed between two reads.")}else this.Pf.set(t.key.toString(),e)},t.prototype.rn=function(t){var e=this.Pf.get(t.toString());return!this.Vf.has(t.toString())&&e?We.updateTime(e):We.on()},t.prototype.Sf=function(t){var e=this.Pf.get(t.toString());if(!this.Vf.has(t.toString())&&e){if(e.isEqual(C.min()))throw new _(w.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return We.updateTime(e)}return We.exists(!0)},t.prototype.write=function(t){this.vf(),this.mutations=this.mutations.concat(t)},t.prototype.vf=function(){},t}(),Da=function(){function t(t,e,n,r){this.di=t,this.Nu=e,this.updateFunction=n,this.Ti=r,this.Df=5,this.Si=new ur(this.di,"transaction_retry")}return t.prototype.run=function(){this.Cf()},t.prototype.Cf=function(){var t=this;this.Si.Bs((function(){return Object(e["b"])(t,void 0,void 0,(function(){var t,n,r=this;return Object(e["d"])(this,(function(e){return t=new Sa(this.Nu),(n=this.Nf(t))&&n.then((function(e){r.di.Ri((function(){return t.commit().then((function(){r.Ti.resolve(e)})).catch((function(t){r.xf(t)}))}))})).catch((function(t){r.xf(t)})),[2]}))}))}))},t.prototype.Nf=function(t){try{var e=this.updateFunction(t);return!U(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},t.prototype.xf=function(t){var e=this;this.Df>0&&this.Ff(t)?(this.Df-=1,this.di.Ri((function(){return e.Cf(),Promise.resolve()}))):this.Ti.reject(t)},t.prototype.Ff=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!$(e)}return!1},t}(),ka=function(){function t(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=h.UNAUTHENTICATED,this.clientId=N.D(),this.Of=function(){},this.g=new Zn,this.credentials.A((function(t){p("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Of(t)),r.g.resolve()}))}return t.prototype.getConfiguration=function(){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}}))}))},t.prototype.Mf=function(t){var e=this;this.Of=t,this.g.promise.then((function(){return e.Of(e.user)}))},t.prototype.kf=function(){if(this.di.Ci)throw new _(w.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.di.Oi();var n=new Zn;return this.di.Ni((function(){return Object(e["b"])(t,void 0,void 0,(function(){var t,r;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),this.$f?[4,this.$f.terminate()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Lf?[4,this.Lf.terminate()]:[3,4];case 3:e.sent(),e.label=4;case 4:return this.credentials.R(),n.resolve(),[3,6];case 5:return t=e.sent(),r=_r(t,"Failed to shutdown persistence"),n.reject(r),[3,6];case 6:return[2]}}))}))})),n.promise},t}();function xa(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i=this;return Object(e["d"])(this,(function(o){switch(o.label){case 0:return t.di.Li(),p("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return r=o.sent(),[4,n.initialize(r)];case 2:return o.sent(),t.Mf((function(r){return t.di.Mi((function(){return Object(e["b"])(i,void 0,void 0,(function(){return Object(e["d"])(this,(function(t){switch(t.label){case 0:return[4,zi(n.Cu,r)];case 1:return t.sent(),[2]}}))}))}))})),n.persistence.tc((function(){return t.terminate()})),t.Lf=n,[2]}}))}))}function Ca(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i;return Object(e["d"])(this,(function(o){switch(o.label){case 0:return t.di.Li(),[4,Pa(t)];case 1:return r=o.sent(),p("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,n.initialize(r,i)];case 3:return o.sent(),t.Mf((function(r){return t.di.Mi((function(){return function(t,n){return Object(e["b"])(this,void 0,void 0,(function(){var r,i;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return(r=b(t)).di.Li(),p("RemoteStore","RemoteStore received new credentials"),i=vo(r),r.Mu.add(3),[4,uo(r)];case 1:return e.sent(),i&&r.Bu.set("Unknown"),[4,r.xu.s_(n)];case 2:return e.sent(),r.Mu.delete(3),[4,so(r)];case 3:return e.sent(),[2]}}))}))}(n.Oh,r)}))})),t.$f=n,[2]}}))}))}function Pa(t){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return t.Lf?[3,2]:(p("FirestoreClient","Using default OfflineComponentProvider"),[4,xa(t,new Qs)]);case 1:e.sent(),e.label=2;case 2:return[2,t.Lf]}}))}))}function Ra(t){return Object(e["b"])(this,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return t.$f?[3,2]:(p("FirestoreClient","Using default OnlineComponentProvider"),[4,Ca(t,new $s)]);case 1:e.sent(),e.label=2;case 2:return[2,t.$f]}}))}))}function La(t){return Pa(t).then((function(t){return t.persistence}))}function Va(t){return Pa(t).then((function(t){return t.Cu}))}function Ma(t){return Ra(t).then((function(t){return t.Oh}))}function Ua(t){return Ra(t).then((function(t){return t.ga}))}function qa(t){return Object(e["b"])(this,void 0,void 0,(function(){var n,r;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,Ra(t)];case 1:return n=e.sent(),[2,((r=n.Mh).Ju=is.bind(null,n.ga),r.Zu=ss.bind(null,n.ga),r)]}}))}))}function Fa(t,e,n,r,i){var o=new Zs({next:function(o){e.Ri((function(){return Ro(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new _(w.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new _(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Uo(mn(n.path),o,{includeMetadataChanges:!0,oa:!0});return Po(t,s)}function za(t,e,n,r,i){var o=new Zs({next:function(n){e.Ri((function(){return Ro(t,s)})),n.fromCache&&"server"===r.source?i.reject(new _(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Uo(n,o,{includeMetadataChanges:!0,oa:!0});return Po(t,s)}var Ba=function(){function t(t,e){this.U_=t,this.Bf=e,this.qf=[],this.Uf=!1,this.Qf=ca(t)}return t.prototype.set=function(t,e,n){this.Kf();var r=Ga(t,this.U_),i=hc(r.j_,e,n),o=ya(this.Qf,"WriteBatch.set",r.K_,i,null!==r.j_,n);return this.qf=this.qf.concat(o.ef(r.K_,We.on())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Kf();var o,s=Ga(t,this.U_);return e instanceof tu&&(e=e.o_),o="string"==typeof e||e instanceof Su?ma(this.Qf,"WriteBatch.update",s.K_,e,n,r):ga(this.Qf,"WriteBatch.update",s.K_,e),this.qf=this.qf.concat(o.ef(s.K_,We.exists(!0))),this},t.prototype.delete=function(t){this.Kf();var e=Ga(t,this.U_);return this.qf=this.qf.concat(new un(e.K_,We.on())),this},t.prototype.commit=function(){return this.Kf(),this.Uf=!0,this.qf.length>0?this.Bf(this.qf):Promise.resolve()},t.prototype.Kf=function(){if(this.Uf)throw new _(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ga(t,e){if(t instanceof tu&&(t=t.o_),t.firestore!==e)throw new _(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Ka=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).U_=e,r}return Object(e["c"])(n,t),n.prototype.get=function(e){var n=this,r=Ga(e,this.U_),i=new Mu(this.U_);return t.prototype.get.call(this,e).then((function(t){return new Cu(n.U_,i,r.K_,t.W_,new nc(!1,!1),r.j_)}))},n}(function(){function t(t,e){this.U_=t,this.Wf=e,this.Qf=ca(t)}return t.prototype.get=function(t){var e=this,n=Ga(t,this.U_),r=new sa(this.U_);return this.Wf.pf([n.K_]).then((function(t){if(!t||1!==t.length)return g();var i=t[0];if(i instanceof dn)return new ju(e.U_,r,n.K_,null,n.j_);if(i instanceof pn)return new ju(e.U_,r,i.key,i,n.j_);throw g()}))},t.prototype.set=function(t,e,n){var r=Ga(t,this.U_),i=hc(r.j_,e,n),o=ya(this.Qf,"Transaction.set",r.K_,i,null!==r.j_,n);return this.Wf.set(r.K_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Ga(t,this.U_);return e instanceof tu&&(e=e.o_),o="string"==typeof e||e instanceof Su?ma(this.Qf,"Transaction.update",s.K_,e,n,r):ga(this.Qf,"Transaction.update",s.K_,e),this.Wf.update(s.K_,o),this},t.prototype.delete=function(t){var e=Ga(t,this.U_);return this.Wf.delete(e.K_),this},t}()),Wa=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){xu(t);var n=Ya(t),r=t.S_(),i=new $s;return ku(n,i,new Xs(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){xu(t);var e=Ya(t),n=t.S_(),r=new $s;return ku(e,r,new Js(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var n=this;if(t.y_&&!t.V_)throw new _(w.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new Zn;return t.z_.Ni((function(){return Object(e["b"])(n,void 0,void 0,(function(){var n;return Object(e["d"])(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(e["b"])(this,void 0,void 0,(function(){var n;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return ar.Gs()?(n=t+"main",[4,ar.delete(n)]):[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Ui(t.R_,t.I_))];case 1:return i.sent(),r.resolve(),[3,3];case 2:return n=i.sent(),r.reject(n),[3,3];case 3:return[2]}}))}))})),r.promise}(t.o_)},t}(),Ha=function(t){function n(e,n,r){var i=this;return(i=t.call(this,n)||this).jf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof c||(i.Gf=e),i}return Object(e["c"])(n,t),Object.defineProperty(n.prototype,"R_",{get:function(){return this.o_.R_},enumerable:!1,configurable:!0}),n.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.b_()),t)).merge,this.o_.v_(t)},n.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.b_().host&&v("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},n.prototype.enableNetwork=function(){return function(t){return function(t){var n=this;return t.di.enqueue((function(){return Object(e["b"])(n,void 0,void 0,(function(){var n,r;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,La(t)];case 1:return n=e.sent(),[4,Ma(t)];case 2:return r=e.sent(),[2,(n.ec(!0),function(t){var e=b(t);return e.Mu.delete(0),so(e)}(r))]}}))}))}))}(Ya(t))}(this.o_)},n.prototype.disableNetwork=function(){return function(t){return function(t){var n=this;return t.di.enqueue((function(){return Object(e["b"])(n,void 0,void 0,(function(){var n,r;return Object(e["d"])(this,(function(i){switch(i.label){case 0:return[4,La(t)];case 1:return n=i.sent(),[4,Ma(t)];case 2:return r=i.sent(),[2,(n.ec(!1),function(t){return Object(e["b"])(this,void 0,void 0,(function(){var n;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return(n=b(t)).Mu.add(0),[4,uo(n)];case 1:return e.sent(),n.Bu.set("Offline"),[2]}}))}))}(r))]}}))}))}))}(Ya(t))}(this.o_)},n.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ru("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.jf.enableMultiTabIndexedDbPersistence(this):this.jf.enableIndexedDbPersistence(this,n)},n.prototype.clearPersistence=function(){return this.jf.clearIndexedDbPersistence(this)},n.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},n.prototype.waitForPendingWrites=function(){return function(t){return function(t){var n=this,r=new Zn;return t.di.Ri((function(){return Object(e["b"])(n,void 0,void 0,(function(){var n;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return n=ps,[4,Ua(t)];case 1:return[2,n.apply(void 0,[e.sent(),r])]}}))}))})),r.promise}(Ya(t))}(this.o_)},n.prototype.onSnapshotsInSync=function(t){return function(t,n){var r=this,i=Ya(t),o=er(n)?n:{next:n},s=new Zs(o);return t.z_.Ri((function(){return Object(e["b"])(r,void 0,void 0,(function(){var t;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return t=function(t,e){b(t).Hu.add(e),e.next()},[4,qa(i)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}}))}))})),function(){s.r_(),t.z_.Ri((function(){return Object(e["b"])(r,void 0,void 0,(function(){var t;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return t=function(t,e){b(t).Hu.delete(e)},[4,qa(i)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}}))}))}))}}(this.o_,t)},Object.defineProperty(n.prototype,"app",{get:function(){if(!this.Gf)throw new _(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Gf},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new ac(this,ia(this.o_,t))}catch(t){throw Za(t,"collection()","Firestore.collection()")}},n.prototype.doc=function(t){try{return new $a(this,oa(this.o_,t))}catch(t){throw Za(t,"doc()","Firestore.doc()")}},n.prototype.collectionGroup=function(t){try{return new oc(this,function(t,e){if(eu("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _(w.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Gu(t,null,function(t){return new yn(R.X(),t)}(e))}(this.o_,t))}catch(t){throw Za(t,"collectionGroup()","Firestore.collectionGroup()")}},n.prototype.runTransaction=function(t){var n=this;return function(t,n){return function(t,n){var r=this,i=new Zn;return t.di.Ri((function(){return Object(e["b"])(r,void 0,void 0,(function(){var r;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,function(t){return Ra(t).then((function(t){return t.Nu}))}(t)];case 1:return r=e.sent(),new Da(t.di,r,n,i).run(),[2]}}))}))})),i.promise}(Ya(t),(function(e){return n(new Ka(t,e))}))}(this.o_,(function(e){return t(new Xa(n,e))}))},n.prototype.batch=function(){var t=this;return Ya(this.o_),new Ja(new Ba(this.o_,(function(e){return Fu(t.o_,e)})))},n}(tu);function Ya(t){return t.H_||Qa(t),t.H_.kf(),t.H_}function Qa(t){var e=t.S_(),n=function(t,e,n){return new a(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.R_,t.I_,e);t.H_=new ka(t.P_,t.z_,n)}var Xa=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(e["c"])(n,t),n.prototype.get=function(t){var e=this,n=cc(t);return this.o_.get(n).then((function(t){return new rc(e.U_,t)}))},n.prototype.set=function(t,e,n){var r=cc(t);return n?(nu("Transaction.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},n.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=cc(t);return 2===arguments.length?this.o_.update(u,n):(i=this.o_).update.apply(i,Object(e["g"])([u,n,r],o)),this},n.prototype.delete=function(t){var e=cc(t);return this.o_.delete(e),this},n}(tu),Ja=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.prototype.set=function(t,e,n){var r=cc(t);return n?(nu("WriteBatch.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},n.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=cc(t);return 2===arguments.length?this.o_.update(u,n):(i=this.o_).update.apply(i,Object(e["g"])([u,n,r],o)),this},n.prototype.delete=function(t){var e=cc(t);return this.o_.delete(e),this},n.prototype.commit=function(){return this.o_.commit()},n}(tu),$a=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Q_=new Tu(e),r}return Object(e["c"])(n,t),n.zf=function(t,e,r){if(t.length%2!=0)throw new _(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new n(e,new Bu(e.o_,r,new M(t)))},n.q_=function(t,e,r){return new n(e,new Bu(e.o_,r,t))},Object.defineProperty(n.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new ac(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new ac(this.firestore,ia(this.o_,t))}catch(t){throw Za(t,"collection()","DocumentReference.collection()")}},n.prototype.isEqual=function(t){return t instanceof tu&&(t=t.o_),t instanceof Bu&&ua(this.o_,t)},n.prototype.set=function(t,e){e=nu("DocumentReference.set",e);try{return function(t,e,n){var r=uu(t.firestore,Du),i=hc(t.j_,e,n);return Fu(r,ya(ca(r),"setDoc",t.K_,i,null!==t.j_,n).ef(t.K_,We.on()))}(this.o_,t,e)}catch(t){throw Za(t,"setDoc()","DocumentReference.set()")}},n.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Uu(this.o_,t):Uu.apply(void 0,Object(e["g"])([this.o_,t,n],r))}catch(t){throw Za(t,"updateDoc()","DocumentReference.update()")}},n.prototype.delete=function(){return Fu(uu((t=this.o_).firestore,Du),[new un(t.K_,We.on())]);var t},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=tc(e),i=ec(e,(function(e){return new rc(t.firestore,new Cu(t.firestore.o_,t.Q_,e.K_,e.W_,e.metadata,t.o_.j_))}));return qu(this.o_,r,i)},n.prototype.get=function(t){var n=this;return("cache"===(null==t?void 0:t.source)?function(t){var n=this,r=uu(t.firestore,Du),i=Ya(r),o=new Mu(r),s=new Zn;return r.z_.Ri((function(){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(n){switch(n.label){case 0:return[4,Va(i)];case 1:return[4,function(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o,s;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(t,e){var n=b(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Oc.cs(t,e)}))}(t,n)];case 1:return(i=e.sent())instanceof pn?r.resolve(i):i instanceof dn?r.resolve(null):r.reject(new _(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=e.sent(),s=_r(o,"Failed to get document '"+n+" from cache"),r.reject(s),[3,3];case 3:return[2]}}))}))}(n.sent(),t.K_,s)];case 2:return n.sent(),[2]}}))}))})),s.promise.then((function(e){return new Cu(r,o,t.K_,e,new nc(e instanceof pn&&e.an,!0),t.j_)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var n=this,r=uu(t.firestore,Du),i=Ya(r),o=new Zn;return r.z_.Ri((function(){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,qa(i)];case 1:return[4,Fa(e.sent(),r.z_,t.K_,{source:"server"},o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return zu(r,t,e)}))}(this.o_):function(t){var n=this,r=uu(t.firestore,Du),i=Ya(r),o=new Zn;return r.z_.Ri((function(){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,qa(i)];case 1:return[4,Fa(e.sent(),r.z_,t.K_,{source:"default"},o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return zu(r,t,e)}))}(this.o_)).then((function(t){return new rc(n.firestore,new Cu(n.firestore.o_,n.Q_,t.K_,t.W_,t.metadata,n.o_.j_))}))},n.prototype.withConverter=function(t){return new n(this.firestore,this.o_.withConverter(t))},n}(tu);function Za(t,e,n){return t.message=t.message.replace(e,n),t}function tc(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!er(r))return r}return{}}function ec(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=er(t[0])?t[0]:er(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var nc=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),rc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(e["c"])(n,t),Object.defineProperty(n.prototype,"ref",{get:function(){return new $a(this.U_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),n.prototype.data=function(t){return this.o_.data(t)},n.prototype.get=function(t,e){return this.o_.get(t,e)},n.prototype.isEqual=function(t){return Vu(this.o_,t.o_)},n}(tu),ic=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.prototype.data=function(t){return this.o_.data(t)},n}(rc),oc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r}return Object(e["c"])(n,t),n.prototype.where=function(t,e,r){try{return new n(this.firestore,Wu(this.o_,function(t,e,n){var r=e,i=Nu("where",t);return new Hu(i,r,n)}(t,e,r)))}catch(t){throw Za(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.orderBy=function(t,e){try{return new n(this.firestore,Wu(this.o_,function(t,e){void 0===e&&(e="asc");var n=e,r=Nu("orderBy",t);return new Yu(r,n)}(t,e)))}catch(t){throw Za(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.limit=function(t){try{return new n(this.firestore,Wu(this.o_,function(t){return au("limit",t),new Qu("limit",t,"F")}(t)))}catch(t){throw Za(t,"limit()","Query.limit()")}},n.prototype.limitToLast=function(t){try{return new n(this.firestore,Wu(this.o_,function(t){return au("limitToLast",t),new Qu("limitToLast",t,"L")}(t)))}catch(t){throw Za(t,"limitToLast()","Query.limitToLast()")}},n.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Wu(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xu("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Za(t,"startAt()","Query.startAt()")}},n.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Wu(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xu("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Za(t,"startAfter()","Query.startAfter()")}},n.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Wu(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ju("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Za(t,"endBefore()","Query.endBefore()")}},n.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Wu(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ju("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Za(t,"endAt()","Query.endAt()")}},n.prototype.isEqual=function(t){return aa(this.o_,t.o_)},n.prototype.get=function(t){var n=this;return("cache"===(null==t?void 0:t.source)?function(t){var n=this,r=uu(t.firestore,Du),i=Ya(r),o=new Mu(r),s=new Zn;return r.z_.Ri((function(){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(n){switch(n.label){case 0:return[4,Va(i)];case 1:return[4,function(t,n,r){return Object(e["b"])(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Object(e["d"])(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Qi(t,n,!0)];case 1:return i=e.sent(),o=new ts(n,i.Bc),s=o.gh(i.documents),u=o.Zn(s,!1),r.resolve(u.snapshot),[3,3];case 2:return a=e.sent(),c=_r(a,"Failed to execute query '"+n+" against cache"),r.reject(c),[3,3];case 3:return[2]}}))}))}(n.sent(),t.tf,s)];case 2:return n.sent(),[2]}}))}))})),s.promise.then((function(e){return new Ru(r,o,t,e)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var n=this,r=uu(t.firestore,Du),i=Ya(r),o=new Mu(r),s=new Zn;return r.z_.Ri((function(){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,qa(i)];case 1:return[4,za(e.sent(),r.z_,t.tf,{source:"server"},s)];case 2:return e.sent(),[2]}}))}))})),s.promise.then((function(e){return new Ru(r,o,t,e)}))}(this.o_):function(t){var n=this,r=uu(t.firestore,Du),i=Ya(r),o=new Mu(r);na(t.tf);var s=new Zn;return r.z_.Ri((function(){return Object(e["b"])(n,void 0,void 0,(function(){return Object(e["d"])(this,(function(e){switch(e.label){case 0:return[4,qa(i)];case 1:return[4,za(e.sent(),r.z_,t.tf,{source:"default"},s)];case 2:return e.sent(),[2]}}))}))})),s.promise.then((function(e){return new Ru(r,o,t,e)}))}(this.o_)).then((function(t){return new uc(n.firestore,t)}))},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=tc(e),i=ec(e,(function(e){return new uc(t.firestore,e)}));return qu(this.o_,r,i)},n.prototype.withConverter=function(t){return new n(this.firestore,this.o_.withConverter(t))},n}(tu),sc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(e["c"])(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doc",{get:function(){return new ic(this.U_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),n}(tu),uc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(e["c"])(n,t),Object.defineProperty(n.prototype,"query",{get:function(){return new oc(this.U_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map((function(e){return new ic(t.U_,e)}))},enumerable:!1,configurable:!0}),n.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map((function(t){return new sc(e.U_,t)}))},n.prototype.forEach=function(t,e){var n=this;this.o_.forEach((function(r){t.call(e,new ic(n.U_,r))}))},n.prototype.isEqual=function(t){return Vu(this.o_,t.o_)},n}(tu),ac=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.o_=n,r}return Object(e["c"])(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new $a(this.firestore,t):null},enumerable:!1,configurable:!0}),n.prototype.doc=function(t){try{return new $a(this.firestore,void 0===t?oa(this.o_):oa(this.o_,t))}catch(t){throw Za(t,"doc()","CollectionReference.doc()")}},n.prototype.add=function(t){var e=this;return function(t,e){var n=uu(t.firestore,Du),r=oa(t),i=hc(t.j_,e);return Fu(n,ya(ca(t.firestore),"addDoc",r.K_,i,null!==t.j_,{}).ef(r.K_,We.exists(!1))).then((function(){return r}))}(this.o_,t).then((function(t){return new $a(e.firestore,t)}))},n.prototype.isEqual=function(t){return ua(this.o_,t.o_)},n.prototype.withConverter=function(t){return new n(this.firestore,this.o_.withConverter(t))},n}(oc);function cc(t){return t instanceof tu&&(t=t.o_),uu(t,Bu)}function hc(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fc=function(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.call(this,new(Su.bind.apply(Su,Object(e["g"])([void 0],n))))||this}return Object(e["c"])(n,t),n.documentId=function(){return new n(V.et().J())},n.prototype.isEqual=function(t){return t instanceof tu&&(t=t.o_),t instanceof Su&&this.o_.G_.isEqual(t.G_)},n}(tu),lc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e["c"])(n,t),n.serverTimestamp=function(){var t=new lu("serverTimestamp");return t.c_="FieldValue.serverTimestamp",new n(t)},n.delete=function(){var t=new hu("deleteField");return t.c_="FieldValue.delete",new n(t)},n.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pu("arrayUnion",t)}.apply(void 0,t);return r.c_="FieldValue.arrayUnion",new n(r)},n.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new du("arrayRemove",t)}.apply(void 0,t);return r.c_="FieldValue.arrayRemove",new n(r)},n.increment=function(t){var e=function(t){return new vu("increment",t)}(t);return e.c_="FieldValue.increment",new n(e)},n.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},n}(tu),pc={Firestore:Ha,GeoPoint:yu,Timestamp:x,Blob:Eu,Transaction:Xa,WriteBatch:Ja,DocumentReference:$a,DocumentSnapshot:rc,Query:oc,QueryDocumentSnapshot:ic,QuerySnapshot:uc,CollectionReference:ac,FieldPath:fc,FieldValue:lc,setLogLevel:function(t){var e;e=t,f.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};function dc(t){!function(t,e){t.INTERNAL.registerComponent(new u["a"]("firestore",(function(t){return function(t,e){return new Ha(t,new Du(t,e),new Wa)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},pc)))}(t),t.registerVersion("@firebase/firestore","2.0.4")}dc(r["a"])}).call(this,n("Q2Ig"))},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),u=n("/6Yf"),a=n("q/0M"),c=(r={},r["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s["b"]("app","Firebase",c),f="@firebase/app",l="0.6.13",p="@firebase/analytics",d="@firebase/auth",v="@firebase/database",y="@firebase/functions",g="@firebase/installations",m="@firebase/messaging",b="@firebase/performance",w="@firebase/remote-config",_="@firebase/storage",I="@firebase/firestore",E="firebase-wrapper",O="[DEFAULT]",T=(i={},i[f]="fire-core",i[p]="fire-analytics",i[d]="fire-auth",i[v]="fire-rtdb",i[y]="fire-fn",i[g]="fire-iid",i[m]="fire-fcm",i[b]="fire-perf",i[w]="fire-rc",i[_]="fire-gcs",i[I]="fire-fst",i["fire-js"]="fire-js",i[E]="fire-js-all",i),j=new a["b"]("@firebase/app"),A=function(){function t(t,e,n){var r,i,a=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s["e"])(t),this.container=new u["b"](e.name),this._addComponent(new u["a"]("app",(function(){return a}),"PUBLIC"));try{for(var c=Object(o["h"])(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next()){var f=h.value;this._addComponent(f)}}catch(l){r={error:l}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=O),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=O),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){j.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();A.prototype.name&&A.prototype.options||A.prototype.delete||console.log("dc");var N="8.0.1";function S(t){var e={},n=new Map,r={__esModule:!0,initializeApp:f,app:c,registerVersion:d,setLogLevel:a["c"],onLog:v,apps:null,SDK_VERSION:N,INTERNAL:{registerComponent:p,removeApp:i,components:n,useAsService:y}};function i(t){delete e[t]}function c(t){if(t=t||O,!Object(s["c"])(e,t))throw h.create("no-app",{appName:t});return e[t]}function f(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var u=i;void 0===u.name&&(u.name=O);var a=u.name;if("string"!==typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if(Object(s["c"])(e,a))throw h.create("duplicate-app",{appName:a});var c=new t(n,u,r);return e[a]=c,c}function l(){return Object.keys(e).map((function(t){return e[t]}))}function p(i){var u,a,f=i.name;if(n.has(f))return j.debug("There were multiple attempts to register component "+f+"."),"PUBLIC"===i.type?r[f]:null;if(n.set(f,i),"PUBLIC"===i.type){var l=function(t){if(void 0===t&&(t=c()),"function"!==typeof t[f])throw h.create("invalid-app-argument",{appName:f});return t[f]()};void 0!==i.serviceProps&&Object(s["f"])(l,i.serviceProps),r[f]=l,t.prototype[f]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,f);return n.apply(this,i.multipleInstances?t:[])}}try{for(var p=Object(o["h"])(Object.keys(e)),d=p.next();!d.done;d=p.next()){var v=d.value;e[v]._addComponent(i)}}catch(y){u={error:y}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===i.type?r[f]:null}function d(t,e,n){var r,i=null!==(r=T[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void j.warn(a.join(" "))}p(new u["a"](i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function v(t,e){if(null!==t&&"function"!==typeof t)throw h.create("invalid-log-argument",{appName:name});Object(a["d"])(t,e)}function y(t,e){if("serverAuth"===e)return null;var n=e;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:l}),c["App"]=t,r}function D(){var t=S(A);function e(e){Object(s["f"])(t,e)}return t.INTERNAL=Object(o["a"])(Object(o["a"])({},t.INTERNAL),{createFirebaseNamespace:D,extendNamespace:e,createSubscribe:s["d"],ErrorFactory:s["b"],deepExtend:s["f"]}),t}var k=D(),x=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(C(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();function C(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}function P(t,e){t.INTERNAL.registerComponent(new u["a"]("platform-logger",(function(t){return new x(t)}),"PRIVATE")),t.registerVersion(f,l,e),t.registerVersion("fire-js","")}if(Object(s["h"])()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var R=self.firebase.SDK_VERSION;R&&R.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var L=k.initializeApp;k.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s["m"])()&&j.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),L.apply(void 0,t)};var V=k;P(V),e["a"]=V}}]);